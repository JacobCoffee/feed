<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Planet Python - Page 5</title>
    <link href="styles.css" rel="stylesheet" />
  </head>
  <body class="h-full">
    <div class="drawer lg:drawer-open h-full">
      <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />
      <div class="drawer-content flex flex-col h-full">
        <div class="navbar bg-base-100 lg:hidden">
          <div class="flex-none">
            <label
              for="my-drawer-2"
              class="btn btn-square btn-ghost drawer-button"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                class="inline-block w-5 h-5 stroke-current"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path>
              </svg>
            </label>
          </div>
          <div class="flex-1">
            <a class="btn btn-ghost normal-case text-xl">Planet Python</a>
          </div>
        </div>
        
<div
  class="h-full overflow-y-auto p-4 bg-gradient-to-br from-base-200 to-base-300"
>
  <h1 class="text-4xl font-bold mb-6 text-center text-primary">
    Planet Python - Page 5
  </h1>
  <div class="mt-8"><div class="btn-group my-4"><a href="index4.html" class="btn">«</a><a href="index3.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">3</a><a href="index4.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">4</a><button class="btn btn-active hover:bg-primary hover:shadow-lg hover:shadow-primary/50">5</button><a href="index6.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">6</a><a href="index7.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">7</a><a href="index6.html" class="btn">»</a></div></div>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://juripakaste.fi/dotenvy/" class="hover:underline"
              >DotEnvy</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>I released a new Swift library, <a href="https://github.com/juri/dotenvy">DotEnvy</a>. It's a parser and loader for dotenv files.</p>
<p>Dotenv is a vaguely specified format that is supported by libraries found for most languages used in server-side development. The idea is that a <a href="https://12factor.net">twelve-factor app</a> is supposed to read its configuration from environment variables, which can be a hassle to maintain during development. So you store them in a non-version controlled file called <code>.env</code> your application reads upon startup.</p>
<p>The format looks more or less like this:</p>
<pre style="background-color: #2b303b; color: #c0c5ce;"><code><span>KEY1=VALUE1
</span><span>KEY2=&quot;VALUE2&quot;
</span><span>KEY3=&quot;MULTILINE
</span><span>VALUE&quot;
</span><span>KEY4='REFERENCE TO ${KEY3}'
</span></code></pre>
<p>The Swift libraries I could find seemed to lack features and had not seen updates in years. I don't think a library like this needs a huge number of features, but multiline strings and variable references were something I wanted. And writing parsers is fun.</p>
<p>DotEnvy has good test coverage and online <a href="https://swiftpackageindex.com/juri/dotenvy/documentation/dotenvy">documentation</a>. There's also pretty good error reporting.</p>
<p>There's also a command line tool that allows you to syntax check a dotenv file or convert it to JSON. I was going add a launcher (i.e. run <code>dotenv-tool launch sh</code> and it'd export the environment from <code>.env</code> and run <code>sh</code>), but discovered that pseudo terminals are a pain and my <a href="https://en.wikipedia.org/wiki/Advanced_Programming_in_the_Unix_Environment">Stevens</a> has gone missing. Patches are welcome.</p>
<p>I accidentally used the same name as <a href="https://docs.rs/dotenvy/latest/dotenvy/">a Rust dotenv library</a>, but I decided there's enough namespacing provided by the language support that the risk of confusion isn't too great.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 18, 2024 05:00 PM UTC by
            <a href="http://www.iki.fi/juri/blog/index.rss" class="link link-hover text-primary"
              >Juri Pakaste</a
            >
          </div>
          <a
            href="https://juripakaste.fi/dotenvy/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://juripakaste.fi/git-history-search-fzf/" class="hover:underline"
              >Git history search with fzf</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p><a href="https://github.com/junegunn/fzf">fzf</a> is one of my favorite shell tools. I have a ton of scripts where I use it for selection. Here's one for searching git history. <code>git log -Gpattern</code> allows you to search for commits that contain <em>pattern</em> in the patch text. Combine it with fzf and you get a pretty decent history search tool.</p>
<p>I have this saved as <code>~/bin/git-search-log</code>, so I can invoke it as <code>git search-log pattern</code> or <code>git search-log pattern branch</code>:</p>
<pre class="language-sh " style="background-color: #2b303b; color: #c0c5ce;"><code class="language-sh"><span style="color: #65737e;">#!/bin/bash
</span><span>
</span><span style="color: #96b5b4;">set</span><span> -euo pipefail
</span><span>
</span><span style="color: #65737e;"># Ensure compatibility with fish etc by ensuring fzf uses bash for the preview command
</span><span style="color: #b48ead;">export </span><span style="color: #bf616a;">SHELL</span><span>=</span><span style="color: #a3be8c;">/bin/bash
</span><span>
</span><span style="color: #bf616a;">git</span><span> log</span><span style="color: #bf616a;"> -G</span><span>$</span><span style="color: #bf616a;">@ --oneline </span><span>| </span><span style="color: #bf616a;">fzf </span><span>\
</span><span style="color: #bf616a;">    --preview-window</span><span>=bottom,80% \
</span><span style="color: #bf616a;">    --preview </span><span>&quot;</span><span style="color: #a3be8c;">echo {} | sed 's/ .*//g' | xargs git show --color</span><span>&quot; \
</span><span style="color: #bf616a;">    --bind </span><span>'</span><span style="color: #a3be8c;">enter:execute(commit=$(echo {} | sed &quot;s/ .*//g&quot;) &amp;&amp; git diff-tree --no-commit-id --name-only $commit -r | fzf --preview-window=bottom,80% --preview &quot;git show --color $commit -- $(git rev-parse --show-toplevel)/\{}&quot;)</span><span>'
</span></code></pre>
<p>When you run it you get an selection of matching commits, one per line, with a preview window showing the patch. If you hit enter on a commit, you get another fzf screen, this time allowing you to select files modified in that commit. Hit enter again and you're back in the first one.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 18, 2024 04:00 PM UTC by
            <a href="http://www.iki.fi/juri/blog/index.rss" class="link link-hover text-primary"
              >Juri Pakaste</a
            >
          </div>
          <a
            href="https://juripakaste.fi/git-history-search-fzf/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="http://lucumr.pocoo.org/2024/5/16/macro-vtable-magic" class="hover:underline"
              >Using Rust Macros for Custom VTables</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>Given that building programming languages and interpreters is the
developer's most favorite hobby, I will never stop writing templating
engines.  About three years ago I first wanted to see if I can make an
implementation of my <a class="reference external" href="https://jinja.palletsprojects.com/">Jinja2 template engine</a> for Rust.  It's called <a class="reference external" href="https://github.com/mitsuhiko/minijinja/">MiniJinja</a> and very close in behavior to
Jinja2.  Close enought that I have seen people pick it up more than I
thought they would.  For instance the Hugging Face <a class="reference external" href="https://github.com/huggingface/text-generation-inference/blob/d8402eaf6723818eec2d8abf7715b9dc42da07df/router/src/infer.rs">Text Generation
Inference uses it</a>
for chat templates.</p>
<p>I wrote it primarily just to see how you would introduce dynamic things
into a language that doesn't have much of a dynamic runtime.  A few weeks
ago I released a major new version of the engine that has a very different
internal object model for values and in this post I want to share a bit
how it works, and what you can learn from it.  At the heart of it is a
<tt class="docutils literal">type_erase!</tt> macro originally contributed by Sergio Benitez.  This post
goes into the need and usefulness of that macro.</p>
<div class="section" id="runtime-values">
<h2>Runtime Values</h2>
<p>To understand the problem you first need to understand that a template
engine like Jinja2 has requirements for runtime types that are a bit
different from how Rust likes to think about data.  The runtime is
entirely dynamic and requires a form of garbage collection for those
values.  In case of a simple templating engine like Jinja2 you can largely
get away with reference counting.  The way this works in practice is that
MiniJinja has a type called <a class="reference external" href="https://docs.rs/minijinja/latest/minijinja/value/struct.Value.html">Value</a>
which can be cloned to increment the refcount, and when it's dropped the
refcount is decremented.  The value is the basic type that can hold all
kinds of things (integers, strings, functions, sequences, etc.).  In
MiniJinja you can thus do something like this:</p>
<div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">minijinja</span>::<span class="n">Value</span><span class="p">;</span><span class="w"></span>

<span class="c1">// primitives</span>
<span class="kd">let</span><span class="w"> </span><span class="n">int_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="n">str_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="s">&quot;Maximilian&quot;</span><span class="p">);</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="n">bool_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>

<span class="c1">// complex objects</span>
<span class="kd">let</span><span class="w"> </span><span class="n">vec_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]);</span><span class="w"></span>

<span class="c1">// reference counting</span>
<span class="kd">let</span><span class="w"> </span><span class="n">vec_val2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec_val</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span><span class="w">   </span><span class="c1">// refcount = 2</span>
<span class="nb">drop</span><span class="p">(</span><span class="n">vec_val</span><span class="p">);</span><span class="w">                    </span><span class="c1">// refcount = 1</span>
<span class="nb">drop</span><span class="p">(</span><span class="n">vec_val2</span><span class="p">);</span><span class="w">                   </span><span class="c1">// refcount = 0 -&gt; gone</span>
</pre></div>
<p>Inside the engine these objects have all kinds of behaviors to make
templates like this work:</p>
<div class="highlight"><pre><span></span>{{ int_val }}
    42
{{ str_val|upper }}
    MAXIMILIAN
{{ not bool_val }}
    false
{{ vec_val }}
    [1, 2, 3]
{{ vec_val|reverse }}
    [3, 2, 1]
</pre></div>
<p>Some of that functionality is also exposed via Rust APIs.  So for instance
you can iterate over values if they contain sequences:</p>
<div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">vec_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]);</span><span class="w"></span>
<span class="k">for</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">vec_val</span><span class="p">.</span><span class="n">try_iter</span><span class="p">()</span><span class="o">?</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{} ({})&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">kind</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>If you run this, this will print the following:</p>
<pre class="literal-block">
1 (number)
2 (number)
3 (number)
</pre>
<p>So each value in this object has itself been “boxed” in a value.  As far
as the engine is concerned, everything is a value.</p>
</div>
<div class="section" id="objects">
<h2>Objects</h2>
<p>But how do you get something interesting into these values that is not
just a basic type that could be hardcoded (such as a vector)?  Imagine you
have a custom object that you want to efficently expose to the engine.
This is in fact even something the engine itself needs to do internally.
For instance Jinja has first class functions in the form of macros so it
needs to expose that into the engine as well.  Additionally Rust functions
passed to the engine also need to be represented.</p>
<p>This is why a <cite>Value</cite> type can hold objects internally.  These objects
also support downcasting:</p>
<div class="highlight"><pre><span></span><span class="c1">// box a vector in a value</span>
<span class="kd">let</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Value</span>::<span class="n">from_object</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[</span><span class="mi">1</span><span class="k">i32</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]);</span><span class="w"></span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{} ({})&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">kind</span><span class="p">());</span><span class="w"></span>

<span class="c1">// downcast it back into a reference of the original object</span>
<span class="kd">let</span><span class="w"> </span><span class="n">v</span>: <span class="kp">&amp;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">downcast_object_ref</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"></span>
</pre></div>
<p>In order to do this, MiniJinja provides a trait called <a class="reference external" href="https://docs.rs/minijinja/latest/minijinja/value/trait.Object.html">Object</a>
which if a type implements can be boxed into a value.  All the dynamic
operations of the value are forwarded into the internal <cite>Object</cite>.  These
operations are the following:</p>
<ul class="simple">
<li><cite>repr()</cite>: returns the “representation” of the object.  The
representation define is how the object is represented (serialized) and
how it behaves.  Valid representations are <cite>Seq</cite> (the object is a list or
sequence), <cite>Map</cite> (the object is a struct or map), <cite>Iterable</cite> (the object
can be iterated over but not indexed), <cite>Plain</cite> (the object is just a plain
object, for instance used for functions)</li>
<li><cite>get_value(key)</cite>: looks up a key in the object</li>
<li><cite>enumerate()</cite>: returns the contents of the object if there are any</li>
</ul>
<p>Additionally there is quite a few extra API (to render them to strings, to
make them callable etc.) but we can ignore this for now.  In addition
there are a few more but some of them just have default implementations.
For instance the “length” of an object by default comes from the length of
the enumerator returned by <cite>enumerate()</cite>.</p>
<p>So how would one design a trait like this?  For sake of keeping this post
brief let's pretend there is only <cite>repr</cite>, <cite>get_value</cite> and <cite>enumerate</cite>.
Remember that we need to reference count, so we might be encouraged to
make a trait like the following:</p>
<div class="highlight"><pre><span></span><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">Object</span>: <span class="nc">Debug</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Sync</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">repr</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ObjectRepr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ObjectRepr</span>::<span class="n">Map</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">key</span>: <span class="kp">&amp;</span><span class="nc">Value</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">None</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">enumerate</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Enumerator</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Enumerator</span>::<span class="n">NonEnumerable</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>This trait looks pretty appealing.  The <cite>self</cite> receiver type is reference
counted (thanks to <cite>&amp;Arc&lt;Self&gt;</cite>) and the interface is pretty minimal. <a class="footnote-reference" href="http://lucumr.pocoo.org/feed.atom#footnote-1" id="footnote-reference-1">[1]</a>
<cite>Enumerator</cite> maybe needs a bit of explanation before we go further.  In
Rust usually when you iterate over an object you have something called an
<cite>Iterator</cite>.  Iterators usually borrow and you use traits to give the
iterator additional functionality.  For instance a <cite>DoubleEndedIterator</cite>
can be reversed.  In a template engine like Jinja we however need to do
everything dynamically <strong>and</strong> we also need to ensure that we do not end
up borrowing with lifetimes from the object.  The engine needs to be able
to hold on to the iterator independent of the object that you iterate.  To
simplify this process the engine uses this <cite>Enumerator</cite> type internally.
It looks a bit like the following:</p>
<div class="highlight"><pre><span></span><span class="cp">#[non_exhaustive]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Enumerator</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// object cannot be enumerated</span>
<span class="w">    </span><span class="n">NonEnumerable</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="c1">// object is empty</span>
<span class="w">    </span><span class="n">Empty</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="c1">// iterate over static strings</span>
<span class="w">    </span><span class="n">Str</span><span class="p">(</span><span class="o">&amp;'</span><span class="nb">static</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;'</span><span class="nb">static</span><span class="w"> </span><span class="kt">str</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="c1">// iterate over an actual dynamic iterator</span>
<span class="w">    </span><span class="n">Iter</span><span class="p">(</span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Value</span><span class="o">&gt;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Sync</span><span class="o">&gt;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="c1">// iterate by calling `get_value` in senquence from 0 to `usize`</span>
<span class="w">    </span><span class="n">Seq</span><span class="p">(</span><span class="kt">usize</span><span class="p">),</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>There are many more versions (for instance for <cite>DoubleEndedIterators</cite>
and a few more) but again, let's keep it simple.</p>
</div>
<div class="section" id="why-arc-receiver">
<h2>Why Arc Receiver?</h2>
<p>So why do you need an <cite>&amp;Arc&lt;Self&gt;</cite> as receiver?  Because in a lot of cases
you really need to bump your own refcount to do something useful.  For
instance here is how the iteration of an object is implemented for
sequences:</p>
<div class="highlight"><pre><span></span><span class="k">fn</span> <span class="nf">try_iter</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Value</span><span class="o">&gt;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Sync</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="bp">Self</span>: <span class="o">'</span><span class="nb">static</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">enumerate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Enumerator</span>::<span class="n">Seq</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">self_clone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="nb">Some</span><span class="p">(</span><span class="nb">Box</span>::<span class="n">new</span><span class="p">((</span><span class="mi">0</span><span class="o">..</span><span class="n">l</span><span class="p">).</span><span class="n">map</span><span class="p">(</span><span class="k">move</span><span class="w"> </span><span class="o">|</span><span class="n">idx</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">self_clone</span><span class="p">.</span><span class="n">get_value</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="n">idx</span><span class="p">)).</span><span class="n">unwrap_or_default</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="p">})))</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>If we did not have a way to bump our own refcount, we could not implement
something like this.</p>
</div>
<div class="section" id="boxing-up-objects">
<h2>Boxing Up Objects</h2>
<p>We can now use this to implement a custom struct for instance (say a 2D
point with two attributes: x and y):</p>
<div class="highlight"><pre><span></span><span class="cp">#[derive(Debug)]</span><span class="w"></span>
<span class="k">struct</span> <span class="nc">Point</span><span class="p">(</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="kt">f32</span><span class="p">);</span><span class="w"></span>

<span class="k">impl</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">repr</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ObjectRepr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ObjectRepr</span>::<span class="n">Map</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">key</span>: <span class="kp">&amp;</span><span class="nc">Value</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="n">as_str</span><span class="p">()</span><span class="o">?</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="p">)),</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;y&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mi">1</span><span class="p">)),</span><span class="w"></span>
<span class="w">            </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">None</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">enumerate</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Enumerator</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Enumerator</span>::<span class="n">Str</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;y&quot;</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>Or alternatively as a custom sequence:</p>
<div class="highlight"><pre><span></span><span class="cp">#[derive(Debug)]</span><span class="w"></span>
<span class="k">struct</span> <span class="nc">Point</span><span class="p">(</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="kt">f32</span><span class="p">);</span><span class="w"></span>

<span class="k">impl</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">repr</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ObjectRepr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ObjectRepr</span>::<span class="n">Seq</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">key</span>: <span class="kp">&amp;</span><span class="nc">Value</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="n">as_usize</span><span class="p">()</span><span class="o">?</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="mi">0</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="p">)),</span><span class="w"></span>
<span class="w">            </span><span class="mi">1</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mi">1</span><span class="p">)),</span><span class="w"></span>
<span class="w">            </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">None</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">enumerate</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">Arc</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Enumerator</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Enumerator</span>::<span class="n">Seq</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>Now that we have the object, we need to box it up into an <cite>Arc</cite>.
Unfortunatley this is where we hit a hurdle:</p>
<pre class="literal-block">
error[E0038]: the trait `Object` cannot be made into an object
   --&gt; src/main.rs:29:15
    |
29  |     let val = Arc::new(Point(1.0, 2.5)) as Arc&lt;dyn Object&gt;;
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^ `Object` cannot be made into an object
    |
note: for a trait to be &quot;object safe&quot; it needs to allow building a
      vtable to allow the call to be resolvable dynamically
</pre>
<p>The reason it cannot be made into an object is because we declare the
receiver as <cite>&amp;Arc&lt;Self&gt;</cite> instead of <cite>&amp;Self</cite>.  This is a limitation because
Rust is not capable of building a vtable for us.  A vtable is nothing more
than a struct that holds a field with a function pointer for each method
on the trait.  So our plan of using <cite>Arc&lt;dyn Object&gt;</cite> won't work, but we
can in fact build out own version of this.  To accomplish this we just
need to build something like a <cite>DynObject</cite> which internally implements
trampolines to call into the original methods and to manage the
refcounting for us.</p>
</div>
<div class="section" id="macro-magic">
<h2>Macro Magic</h2>
<p>Since this requires a lot of unsafe code, and we want to generate all the
necessary trampolines to put into the vtable automatically, we will use a
macro.  The invocation of that macro which generates the final type looks
like this:</p>
<div class="highlight"><pre><span></span><span class="n">type_erase</span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">DynObject</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">fn</span> <span class="nf">repr</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ObjectRepr</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">fn</span> <span class="nf">get_value</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">key</span>: <span class="kp">&amp;</span><span class="nc">Value</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Value</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">fn</span> <span class="nf">enumerate</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Enumerator</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>You can read this as “map trait Object into a DynObject smart pointer”.
The actual macro has a few extra things (it also supports building the
necessary vtable entries for <cite>fmt::Debug</cite> and other traits) but let's
focus on the simple pieces.  This macro generates some pretty wild output.</p>
<p>I cleaned it up and added some comments about what it does.  Later I will
show you the macro that generates it.  First let's start with the
definition of the fat pointer:</p>
<div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">sync</span>::<span class="n">Arc</span><span class="p">;</span><span class="w"></span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">mem</span>::<span class="n">ManuallyDrop</span><span class="p">;</span><span class="w"></span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">any</span>::<span class="p">{</span><span class="n">type_name</span><span class="p">,</span><span class="w"> </span><span class="n">TypeId</span><span class="p">};</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">DynObject</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// ptr points to the payload of the Arc&lt;T&gt;</span>
<span class="w">    </span><span class="n">ptr</span>: <span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">(),</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// this points to our vtable.  The actual type is hidden</span>
<span class="w">    </span><span class="sd">/// (`VTable`) in a local scope.</span>
<span class="w">    </span><span class="n">vtable</span>: <span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">(),</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>And this is the implementation of the vtable and the type:</p>
<div class="highlight"><pre><span></span><span class="c1">// this is a trick that is useful for generated macros to hide a type</span>
<span class="c1">// at a local scope</span>
<span class="k">const</span><span class="w"> </span><span class="n">_</span>: <span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// This is the actual vtable.</span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">VTable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// regular trampolines</span>
<span class="w">        </span><span class="n">repr</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">())</span><span class="w"> </span>-&gt; <span class="nc">ObjectRepr</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">get_value</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">key</span>: <span class="kp">&amp;</span><span class="nc">Value</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Value</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">enumerate</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">())</span><span class="w"> </span>-&gt; <span class="nc">Enumerator</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="c1">// method to return the type ID of the internal type for casts</span>
<span class="w">        </span><span class="n">__type_id</span>: <span class="nc">fn</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">TypeId</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="c1">// method to return the type name of the internal type</span>
<span class="w">        </span><span class="n">__type_name</span>: <span class="nc">fn</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">str</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="c1">// method used to increment the refcount by one</span>
<span class="w">        </span><span class="n">__incref</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">()),</span><span class="w"></span>
<span class="w">        </span><span class="c1">// method used to decrement the refcount by one</span>
<span class="w">        </span><span class="n">__decref</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">()),</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="sd">/// Utility function to return a reference to the real vtable.</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">vt</span><span class="p">(</span><span class="n">e</span>: <span class="kp">&amp;</span><span class="nc">DynObject</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">VTable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&amp;*</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">vtable</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">VTable</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">impl</span><span class="w"> </span><span class="n">DynObject</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="sd">/// Takes ownership of an Arc&lt;T&gt; and boxes it up.</span>
<span class="w">        </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">new</span><span class="o">&lt;</span><span class="n">T</span>: <span class="nc">Object</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span>: <span class="nc">Arc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// &quot;shrinks&quot; an Arc into a raw pointer.  This returns the</span>
<span class="w">            </span><span class="c1">// address of the payload it carries, just behind the</span>
<span class="w">            </span><span class="c1">// refcount.</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span>::<span class="n">into_raw</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">();</span><span class="w"></span>

<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">vtable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">VTable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="c1">// example trampoline that is generated for each method</span>
<span class="w">                </span><span class="n">repr</span>: <span class="o">|</span><span class="n">ptr</span><span class="o">|</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="c1">// now take ownership of the ptr and put it in a</span>
<span class="w">                    </span><span class="c1">// ManuallyDrop so we don't have to manipulate the</span>
<span class="w">                    </span><span class="c1">// reference count.</span>
<span class="w">                    </span><span class="kd">let</span><span class="w"> </span><span class="n">arc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ManuallyDrop</span>::<span class="n">new</span><span class="p">(</span><span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">from_raw</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">));</span><span class="w"></span>
<span class="w">                    </span><span class="c1">// and invoke the original method via the arc</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span>::<span class="n">repr</span><span class="p">(</span><span class="o">&amp;</span><span class="n">arc</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="n">get_value</span>: <span class="o">|</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="o">|</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="kd">let</span><span class="w"> </span><span class="n">arc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ManuallyDrop</span>::<span class="n">new</span><span class="p">(</span><span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">from_raw</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">));</span><span class="w"></span>
<span class="w">                    </span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span>::<span class="n">get_value</span><span class="p">(</span><span class="o">&amp;</span><span class="n">arc</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="n">enumerate</span>: <span class="o">|</span><span class="n">ptr</span><span class="o">|</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="kd">let</span><span class="w"> </span><span class="n">arc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ManuallyDrop</span>::<span class="n">new</span><span class="p">(</span><span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">from_raw</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">));</span><span class="w"></span>
<span class="w">                    </span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span>::<span class="n">enumerate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">arc</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="c1">// these are pretty trivial, they are modelled after</span>
<span class="w">                </span><span class="c1">// rust's `Any` type.</span>
<span class="w">                </span><span class="n">__type_id</span>: <span class="o">||</span><span class="w"> </span><span class="n">TypeId</span>::<span class="n">of</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"></span>
<span class="w">                </span><span class="n">__type_name</span>: <span class="o">||</span><span class="w"> </span><span class="n">type_name</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"></span>
<span class="w">                </span><span class="c1">// on clone we need to increment the refcount.  Due to</span>
<span class="w">                </span><span class="c1">// potential alignment issues we need to go via the vtable too.</span>
<span class="w">                </span><span class="n">__incref</span>: <span class="o">|</span><span class="n">ptr</span><span class="o">|</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">std</span>::<span class="n">sync</span>::<span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">increment_strong_count</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="c1">// on drop take ownership of the pointer (decrements</span>
<span class="w">                </span><span class="c1">// refcount by one)</span>
<span class="w">                </span><span class="n">__decref</span>: <span class="o">|</span><span class="n">ptr</span><span class="o">|</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">Arc</span>::<span class="n">from_raw</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="p">};</span><span class="w"></span>
<span class="w">            </span><span class="bp">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">ptr</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">vtable</span>: <span class="nc">vtable</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">VTable</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">(),</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="sd">/// DynObject::repr() just calls via the vtable into the</span>
<span class="w">        </span><span class="sd">/// original type.</span>
<span class="w">        </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">repr</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ObjectRepr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">repr</span><span class="p">)(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">get_value</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">key</span>: <span class="kp">&amp;</span><span class="nc">Value</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">get_value</span><span class="p">)(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">enumerate</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Enumerator</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">enumerate</span><span class="p">)(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="p">};</span><span class="w"></span>
</pre></div>
<p>At this point the object is functional, but it's kind of problematic
because it does not yet have memory management so we would just leak
memory.  So we need to add that:</p>
<p>Memory management:</p>
<div class="highlight"><pre><span></span><span class="sd">/// Clone increments the refcount via a method in the vtable.</span>
<span class="k">impl</span><span class="w"> </span><span class="nb">Clone</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">DynObject</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">clone</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__incref</span><span class="p">)(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="bp">Self</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ptr</span>: <span class="nc">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">vtable</span>: <span class="nc">self</span><span class="p">.</span><span class="n">vtable</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="sd">/// Drop decrements the refcount via a method in the vtable.</span>
<span class="k">impl</span><span class="w"> </span><span class="nb">Drop</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">DynObject</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">drop</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__decref</span><span class="p">)(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>Additionally to make the object useful, we need to add support for
downcasting which is surprisingly easy at this point.  If the type ID
matches we're good to cast:</p>
<div class="highlight"><pre><span></span><span class="k">impl</span><span class="w"> </span><span class="n">DynObject</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">downcast_ref</span><span class="o">&lt;</span><span class="n">T</span>: <span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__type_id</span><span class="p">)()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TypeId</span>::<span class="n">of</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="o">&amp;*</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">));</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nb">None</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">downcast</span><span class="o">&lt;</span><span class="n">T</span>: <span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__type_id</span><span class="p">)()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TypeId</span>::<span class="n">of</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">increment_strong_count</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">from_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">));</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nb">None</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">type_name</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">str</span> <span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__type_name</span><span class="p">)()</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="section" id="the-macro">
<h2>The Macro</h2>
<p>So now that we know what we want, we can actually use a Rust macro to
generate this stuff for us.  I will leave most of this undocumented given
that you know now what it expands to.  Here just some notes to better
understand what is going on:</p>
<ol class="arabic simple">
<li>The <tt class="docutils literal">const <span class="pre">_:()</span> = { ... }</tt> trick is useful as macros today cannot
generate custom identifiers.  Unlike with C macros where you can
concatenate identifiers to create temporary names, that is unavailable
in Rust.  But you can use that to hide a type in a local scope as we
are doing with the <tt class="docutils literal">VTable</tt> struct.</li>
<li>Since we cannot prefix identifiers, there is a potential conflict with
the names in the struct for the methods and the internal names
(<tt class="docutils literal">__type_id</tt> etc.)  To reduce the likelihood of collision the
internal names are prefixed with two underscores.</li>
<li>All names are fully canonicalized (eg: <tt class="docutils literal"><span class="pre">std::sync::Arc</span></tt> instead of
<tt class="docutils literal">Arc</tt>) to make the macro work without having to bring types into
scope.</li>
</ol>
<p>The macro is surprisingly only a bit awful:</p>
<div class="highlight"><pre><span></span><span class="fm">macro_rules!</span><span class="w"> </span><span class="n">type_erase</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="cp">$v</span>:<span class="nc">vis</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="cp">$t</span>:<span class="nc">ident</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="cp">$erased_t</span>:<span class="nc">ident</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="cp">$(</span><span class="k">fn</span> <span class="cp">$f</span>:<span class="nc">ident</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="w"> </span><span class="cp">$(,</span><span class="w"> </span><span class="cp">$p</span>:<span class="nc">ident</span>: <span class="cp">$t</span>:<span class="nc">ty</span><span class="w"> </span><span class="cp">$(,</span><span class="p">)</span><span class="o">?</span><span class="p">)</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="cp">$(</span>-&gt; <span class="cp">$r</span>:<span class="nc">ty</span><span class="p">)</span><span class="o">?</span><span class="p">;)</span><span class="o">*</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="cp">$v</span><span class="w"> </span><span class="k">struct</span> <span class="cp">$erased_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">ptr</span>: <span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">(),</span><span class="w"></span>
<span class="w">            </span><span class="n">vtable</span>: <span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">(),</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">_</span>: <span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">struct</span> <span class="nc">VTable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="cp">$($f</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="cp">$($p</span>: <span class="cp">$t</span><span class="p">),</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="cp">$(</span>-&gt; <span class="cp">$r</span><span class="p">)</span><span class="o">?</span><span class="p">,)</span><span class="o">*</span><span class="w"></span>
<span class="w">                </span><span class="cp">$($($f_impl</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="cp">$($p_impl</span>: <span class="cp">$t_impl</span><span class="p">),</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="cp">$(</span>-&gt; <span class="cp">$r_impl</span><span class="p">)</span><span class="o">?</span><span class="p">,)</span><span class="o">*</span><span class="p">)</span><span class="o">*</span><span class="w"></span>
<span class="w">                </span><span class="n">__type_id</span>: <span class="nc">fn</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">std</span>::<span class="n">any</span>::<span class="n">TypeId</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">__type_name</span>: <span class="nc">fn</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">str</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">__incref</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">()),</span><span class="w"></span>
<span class="w">                </span><span class="n">__decref</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">()),</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="k">fn</span> <span class="nf">vt</span><span class="p">(</span><span class="n">e</span>: <span class="kp">&amp;</span><span class="cp">$erased_t</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">VTable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&amp;*</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">vtable</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">VTable</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="k">impl</span><span class="w"> </span><span class="cp">$erased_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="cp">$v</span><span class="w"> </span><span class="k">fn</span> <span class="nf">new</span><span class="o">&lt;</span><span class="n">T</span>: <span class="cp">$t</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span>: <span class="nc">std</span>::<span class="n">sync</span>::<span class="n">Arc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="kd">let</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span>::<span class="n">sync</span>::<span class="n">Arc</span>::<span class="n">into_raw</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="w">                    </span><span class="kd">let</span><span class="w"> </span><span class="n">vtable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">VTable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="cp">$(</span><span class="w"></span>
<span class="w">                            </span><span class="cp">$f</span>: <span class="o">|</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="cp">$($p</span><span class="p">),</span><span class="o">*|</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                                </span><span class="kd">let</span><span class="w"> </span><span class="n">arc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span>::<span class="n">mem</span>::<span class="n">ManuallyDrop</span>::<span class="n">new</span><span class="p">(</span><span class="w"></span>
<span class="w">                                    </span><span class="n">std</span>::<span class="n">sync</span>::<span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">from_raw</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">));</span><span class="w"></span>
<span class="w">                                </span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="cp">$t</span><span class="o">&gt;</span>::<span class="cp">$f</span><span class="p">(</span><span class="o">&amp;</span><span class="n">arc</span><span class="p">,</span><span class="w"> </span><span class="cp">$($p</span><span class="p">),</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">                            </span><span class="p">},</span><span class="w"></span>
<span class="w">                        </span><span class="p">)</span><span class="o">*</span><span class="w"></span>
<span class="w">                        </span><span class="n">__type_id</span>: <span class="o">||</span><span class="w"> </span><span class="n">std</span>::<span class="n">any</span>::<span class="n">TypeId</span>::<span class="n">of</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"></span>
<span class="w">                        </span><span class="n">__type_name</span>: <span class="o">||</span><span class="w"> </span><span class="n">std</span>::<span class="n">any</span>::<span class="n">type_name</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"></span>
<span class="w">                        </span><span class="n">__incref</span>: <span class="o">|</span><span class="n">ptr</span><span class="o">|</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="n">std</span>::<span class="n">sync</span>::<span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">increment_strong_count</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">);</span><span class="w"></span>
<span class="w">                        </span><span class="p">},</span><span class="w"></span>
<span class="w">                        </span><span class="n">__decref</span>: <span class="o">|</span><span class="n">ptr</span><span class="o">|</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="n">std</span>::<span class="n">sync</span>::<span class="n">Arc</span>::<span class="n">from_raw</span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">);</span><span class="w"></span>
<span class="w">                        </span><span class="p">},</span><span class="w"></span>
<span class="w">                    </span><span class="p">};</span><span class="w"></span>
<span class="w">                    </span><span class="bp">Self</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">vtable</span>: <span class="nc">vtable</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">VTable</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>

<span class="w">                </span><span class="cp">$(</span><span class="w"></span>
<span class="w">                    </span><span class="cp">$v</span><span class="w"> </span><span class="k">fn</span> <span class="cp">$f</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="cp">$($p</span>: <span class="cp">$t</span><span class="p">),</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="cp">$(</span>-&gt; <span class="cp">$r</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="cp">$f</span><span class="p">)(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="cp">$($p</span><span class="p">),</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">)</span><span class="o">*</span><span class="w"></span>

<span class="w">                </span><span class="cp">$v</span><span class="w"> </span><span class="k">fn</span> <span class="nf">type_name</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">str</span> <span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__type_name</span><span class="p">)()</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>

<span class="w">                </span><span class="cp">$v</span><span class="w"> </span><span class="k">fn</span> <span class="nf">downcast_ref</span><span class="o">&lt;</span><span class="n">T</span>: <span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__type_id</span><span class="p">)()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">std</span>::<span class="n">any</span>::<span class="n">TypeId</span>::<span class="n">of</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="k">return</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="o">&amp;*</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">));</span><span class="w"></span>
<span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>

<span class="w">                    </span><span class="nb">None</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>

<span class="w">                </span><span class="cp">$v</span><span class="w"> </span><span class="k">fn</span> <span class="nf">downcast</span><span class="o">&lt;</span><span class="n">T</span>: <span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__type_id</span><span class="p">)()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">std</span>::<span class="n">any</span>::<span class="n">TypeId</span>::<span class="n">of</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="n">std</span>::<span class="n">sync</span>::<span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">increment_strong_count</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">);</span><span class="w"></span>
<span class="w">                            </span><span class="k">return</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">std</span>::<span class="n">sync</span>::<span class="n">Arc</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>::<span class="n">from_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="p">));</span><span class="w"></span>
<span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>

<span class="w">                    </span><span class="nb">None</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="k">impl</span><span class="w"> </span><span class="nb">Clone</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="cp">$erased_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">fn</span> <span class="nf">clone</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__incref</span><span class="p">)(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">);</span><span class="w"></span>
<span class="w">                    </span><span class="bp">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="n">ptr</span>: <span class="nc">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="n">vtable</span>: <span class="nc">self</span><span class="p">.</span><span class="n">vtable</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="k">impl</span><span class="w"> </span><span class="nb">Drop</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="cp">$erased_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">fn</span> <span class="nf">drop</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="p">(</span><span class="n">vt</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">__decref</span><span class="p">)(</span><span class="bp">self</span><span class="p">.</span><span class="n">ptr</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>The full macro that is in MiniJinja is a bit more feature rich.  It also
generates documentation and implementations for other traits.  If you want
to see the full one look here: <a class="reference external" href="https://github.com/mitsuhiko/minijinja/blob/main/minijinja/src/value/type_erase.rs">type_erase.rs</a>.</p>
</div>
<div class="section" id="putting-it-together">
<h2>Putting it Together</h2>
<p>So now that we have this <cite>DynObject</cite> internally it's trivially possible to
use it in the internals of our value type:</p>
<div class="highlight"><pre><span></span><span class="cp">#[derive(Clone)]</span><span class="w"></span>
<span class="k">pub</span><span class="p">(</span><span class="k">crate</span><span class="p">)</span><span class="w"> </span><span class="k">enum</span> <span class="nc">ValueRepr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Undefined</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">Bool</span><span class="p">(</span><span class="kt">bool</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">U64</span><span class="p">(</span><span class="kt">u64</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">I64</span><span class="p">(</span><span class="kt">i64</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">F64</span><span class="p">(</span><span class="kt">f64</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="nb">None</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nb">String</span><span class="p">(</span><span class="n">Arc</span><span class="o">&lt;</span><span class="kt">str</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">StringType</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">Bytes</span><span class="p">(</span><span class="n">Arc</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">u8</span><span class="o">&gt;&gt;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">Object</span><span class="p">(</span><span class="n">DynObject</span><span class="p">),</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#[derive(Clone)]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Value</span><span class="p">(</span><span class="k">pub</span><span class="p">(</span><span class="k">crate</span><span class="p">)</span><span class="w"> </span><span class="n">ValueRepr</span><span class="p">);</span><span class="w"></span>
</pre></div>
<p>And make the downcasting and construction of such types directly
available:</p>
<div class="highlight"><pre><span></span><span class="k">impl</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">from_object</span><span class="o">&lt;</span><span class="n">T</span>: <span class="nc">Object</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Sync</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="n">value</span>: <span class="nc">T</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Value</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Value</span>::<span class="n">from</span><span class="p">(</span><span class="n">ValueRepr</span>::<span class="n">Object</span><span class="p">(</span><span class="n">DynObject</span>::<span class="n">new</span><span class="p">(</span><span class="n">Arc</span>::<span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">downcast_object_ref</span><span class="o">&lt;</span><span class="n">T</span>: <span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">ValueRepr</span>::<span class="n">Object</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">downcast_ref</span><span class="p">(),</span><span class="w"></span>
<span class="w">            </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">None</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">downcast_object</span><span class="o">&lt;</span><span class="n">T</span>: <span class="o">'</span><span class="nb">static</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Option</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">ValueRepr</span>::<span class="n">Object</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">downcast</span><span class="p">(),</span><span class="w"></span>
<span class="w">            </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">None</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>What do we learn from this?  Not sure.  I at least learned that just
because Rust tells you that you cannot make something into an object does
not mean that you actually can't.  It just requires some creativity and
the willingness to actually use unsafe code.  Another thing is that this
yet again makes a pretty good argument in favor of <a class="reference external" href="https://soasis.org/posts/a-mirror-for-rust-a-plan-for-generic-compile-time-introspection-in-rust/">compile time
introspection</a>.
Zig programmers will laugh / cry about this since comptime is a much more
powerful system to make something like this work compared to the
ridiculous macro abuse necessary in Rust.</p>
<p>Anyways.  Maybe this is useful to you.</p>
<table class="docutils footnote" frame="void" id="footnote-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="http://lucumr.pocoo.org/feed.atom#footnote-reference-1">[1]</a></td><td>Important note: You can actually make an <tt class="docutils literal">Arc&lt;Self&gt;</tt> object safe but
that involves moving the object which means manipulating the reference
count.  If you are okay with the implication that this requires, you
can avoid most of what this blog post talks about and just use
<tt class="docutils literal">Arc&lt;Self&gt;</tt>.</td></tr>
</tbody>
</table>
</div>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 16, 2024 12:00 AM UTC by
            <a href="http://lucumr.pocoo.org/feed.atom" class="link link-hover text-primary"
              >Armin Ronacher</a
            >
          </div>
          <a
            href="http://lucumr.pocoo.org/2024/5/16/macro-vtable-magic"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.mattlayman.com/blog/2024/settings-and-billing-portal-building-saas-with-python-and-django-190/" class="hover:underline"
              >Settings and Billing Portal - Building SaaS with Python and Django #190</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            In this episode, I worked on the settings page for the user. This was a vital addition because it allows users to access the Stripe billing portal and close their account if they no longer wish to use JourneyInbox.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 16, 2024 12:00 AM UTC by
            <a href="https://www.mattlayman.com/categories/python/index.xml" class="link link-hover text-primary"
              >Matt Layman</a
            >
          </div>
          <a
            href="https://www.mattlayman.com/blog/2024/settings-and-billing-portal-building-saas-with-python-and-django-190/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://blog.glyph.im/2024/05/how-to-pycon.html" class="hover:underline"
              >How To PyCon</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>Since I am headed to PyCon tomorrow, let’s talk about conference tips.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 15, 2024 09:12 AM UTC by
            <a href="http://glyph.twistedmatrix.com/feeds/posts/default" class="link link-hover text-primary"
              >Glyph Lefkowitz</a
            >
          </div>
          <a
            href="https://blog.glyph.im/2024/05/how-to-pycon.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://blog.europython.eu/community-post-invisible-threads/" class="hover:underline"
              >Community Post: The Invisible Threads that sustained me in STEM/Tech</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            Joana Owusu-Appiah tells her community experience at PyLadies Ghana and  describes her important the Python Community was on her career journey.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 14, 2024 10:20 AM UTC by
            <a href="http://blog.europython.eu/rss" class="link link-hover text-primary"
              >EuroPython</a
            >
          </div>
          <a
            href="https://blog.europython.eu/community-post-invisible-threads/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://doughellmann.com/releases/sphinxcontrib-sqltable-2-1-1/" class="hover:underline"
              >sphinxcontrib-sqltable 2.1.1 - db cursor fix</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            What&rsquo;s new in 2.1.1? Access cursor before closing the db connection (contributions by dopas21) use the readthedocs.org theme for docs
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 14, 2024 08:11 AM UTC by
            <a href="https://feeds.feedburner.com/doughellmann/python" class="link link-hover text-primary"
              >Doug Hellmann</a
            >
          </div>
          <a
            href="https://doughellmann.com/releases/sphinxcontrib-sqltable-2-1-1/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.listendata.com/2024/05/how-to-use-gemini-in-python.html" class="hover:underline"
              >How to Integrate Gemini API with Python</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <img alt="Integrating Gemini API with Python" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhv7fZDMJQnSKigSmu3bT10rNbDFCUCJjE9vZjSa2Ad0ri3E_9NyEXs32sIu_pvxx77-7ffmAOLbQW9Ip601KaPAPIdpoyXjwKHoQyI0p4uDnY0OEnzOf3W_t600pIt1qyVjD5pNOh0bfzrvHYKpnJ_D3jOQ_QFvd9UIdeGPjgVasQfM3Wt_NisHpE29f4-/s1600/Gemini_API.png" />

<p>In this tutorial, you will learn how to use Google's Gemini AI model through its API in Python.</p>
<div class="db">Steps to Access Gemini API</div>
<p>Follow the steps below to access the Gemini API and then use it in python.</p>
<ol>
<li>Visit <a href="https://aistudio.google.com/" rel="nofollow">Google AI Studio</a> website.</li>
<li>Sign in using your Google account.</li>
<li>Create an <a href="https://aistudio.google.com/app/apikey" rel="nofollow">API key</a>.</li>
<li>Install the Google AI Python library for the Gemini API using the command below : <br /> <pre>pip install google-generativeai</pre>.</li>
</ol>
<a href="https://www.listendata.com/2024/05/how-to-use-gemini-in-python.html#more">To read this article in full, please click here</a><div class="blogger-post-footer">This post appeared first on <a href="https://www.listendata.com/">ListenData</a></div>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 13, 2024 06:18 PM UTC by
            <a href="https://www.listendata.com/feeds/posts/default/-/Python" class="link link-hover text-primary"
              >ListenData</a
            >
          </div>
          <a
            href="https://www.listendata.com/2024/05/how-to-use-gemini-in-python.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="http://paddy3118.blogspot.com/2024/05/predicting-results-from-small-samples.html" class="hover:underline"
              >Predicting results from small samples.</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <div class="separator"><p style="margin-left: 1em; margin-right: 1em;">&nbsp;

<img alt="A black Englishman doing statistics on a blackboard. Image 1 of 4" class="mimg" height="173" src="https://th.bing.com/th/id/OIG1.TDqZYPNqkW5fwMiIjtgr?w=173&amp;h=173&amp;c=6&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=ImgGn" width="173" />

</p></div><p>I've run simulations, tens of thousands of them at a time, over and over as we developed chips. In one project I noticed that I could predict the final result after only a small number of results were in which allowed me to halt the rest of the simulations, or make advance preparations for the final result.</p><p>I looked it up at the time and, indeed, there is an equation where if you want the pass rate of a "large" population to within a given accuracy, it will give you the minimum sample size to use.</p><p>To some, that's all gobledygook so I'll try to explain with some code.</p><h2 style="text-align: left;">Explanation</h2><p>Lets say you have a large randomised population of pass/fails or ones and zeroes:</p><div style="background-color: #1f1f1f; color: #cccccc; font-family: Consolas, 'Courier New', monospace; font-size: 14px; font-weight: normal; line-height: 19px; white-space: pre;"><div><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> random </span><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> sample</span></div><br /><div><span style="color: #cccccc;">population_size </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">100_000</span><span style="color: #cccccc;"> &nbsp; &nbsp;</span><span style="color: #6a9955;"># must be large, &gt; 65K?</span></div><div><span style="color: #cccccc;">sample_size </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">123 </span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># Actual</span></div><div><span style="color: #cccccc;">p_hat </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0.5</span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;"># Population pass rate, 0.5 == 50%</span></div><br /><div><span style="color: #cccccc;">_ones </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">(population_size</span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;">p_hat)</span></div><div><span style="color: #cccccc;">_zeroes </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> population_size </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> _ones</span></div><div><span style="color: #cccccc;">population </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> _ones </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> [</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> _zeroes</span></div></div><p></p><p>And that we take a sample from it and compute the pass rate of that single, smaller sample<br /></p><div style="background-color: #1f1f1f; color: #cccccc; font-family: Consolas, 'Courier New', monospace; font-size: 14px; font-weight: normal; line-height: 19px; white-space: pre;"><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">random_sample</span><span style="color: #cccccc;">() -&gt; list[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> sample(population, </span><span style="color: #9cdcfe;">k</span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;">sample_size)</span></div><br /><div><span style="color: #cccccc;">pass_rate </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> (</span><span style="color: #dcdcaa;">sum</span><span style="color: #cccccc;">(random_sample()) &nbsp;</span><span style="color: #6a9955;"># how many ones</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #d4d4d4;">/</span><span style="color: #cccccc;"> sample_size) &nbsp; &nbsp;   &nbsp;</span><span style="color: #6a9955;"># convert to a pass rate</span></div><br /><div><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(pass_rate) &nbsp;</span><span style="color: #6a9955;"># e.g. 0.59027552674230146</span></div></div><p></p><p>Every time we run that pass_rate expression we get a different value. It is random. We need to run that pass_rate calculation many times to get an idea of what the likely pass_rate would be when using the given sample size:</p><div style="background-color: #1f1f1f; color: #cccccc; font-family: Consolas, 'Courier New', monospace; font-size: 14px; font-weight: normal; line-height: 19px; white-space: pre;"><div><span style="color: #cccccc;">runs_per_sample </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">10_000</span><span style="color: #cccccc;"> &nbsp; &nbsp; </span><span style="color: #6a9955;"># each sample size is run this many times ~2500</span></div><br /><div><span style="color: #cccccc;">pass_rates </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #dcdcaa;">sum</span><span style="color: #cccccc;">(random_sample()) </span><span style="color: #d4d4d4;">/</span><span style="color: #cccccc;"> sample_size</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> _ </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">(runs_per_sample)]</span></div></div><p></p><p>I have learnt that the question to ask is not how many times the sample pass rate was the population pass rate, but to define an acceptable margin of error, (say 5%) and say we want to be confident that pass rates be within that margin a certain percentage of the time</p><div style="background-color: #1f1f1f; color: #cccccc; font-family: Consolas, 'Courier New', monospace; font-size: 14px; font-weight: normal; line-height: 19px; white-space: pre;"><div><span style="color: #cccccc;">epsilon </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0.05</span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># target margin of error in sample pass rate. 0.05 == +/-5%</span></div><br /><div><span style="color: #cccccc;">p_hat_min, p_hat_max </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> p_hat </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> (</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> epsilon), p_hat </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> (</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> epsilon)</span></div><div><span style="color: #cccccc;">in_range_count </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sum</span><span style="color: #cccccc;">(p_hat_min </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> pass_rate </span><span style="color: #d4d4d4;">&lt;</span><span style="color: #cccccc;"> p_hat_max</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> pass_rate </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> pass_rates)</span></div><div><span style="color: #cccccc;">sample_confidence_level </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> in_range_count </span><span style="color: #d4d4d4;">/</span><span style="color: #cccccc;"> runs_per_sample</span></div><div><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">"</span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">sample_confidence_level = </span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">) &nbsp;</span><span style="color: #6a9955;"># = 0.4054</span></div></div><p></p><p><b><i>So for a sample size of 123 we could expect the pass rate of the sample to be within 5% of the actual pass rate of the population, 0.5 or 50%, onlr o.4 or 40% of the time!</i></b></p><h2 style="text-align: left;"><span style="font-weight: normal;">We need more!</span></h2><p style="text-align: left;"><span style="font-weight: normal;">What is actually done is we state what we <i>think </i>the population pass rate is, <b>p_hat</b>, (choose closer to 50% if you are unsure); the margin of error around p_hat we want, <b>epsilon</b>, usually +/-5% or +/-3%; and the <b>confidence_level</b> in hitting within the pass_rates margin of error.</span></p><p style="text-align: left;"><span style="font-weight: normal;">There are <a href="https://goodcalculators.com/sample-size-calculator/" rel="nofollow" target="_blank">calculators </a>that will then give you n, the size of the sample needed to satisfy those condition.</span></p><h2 style="text-align: left;"><span style="font-weight: normal;">Doing it myself</span></h2><p style="text-align: left;"><span style="font-weight: normal;">&nbsp;I calculated for one specific sample size, above. Obviousely, if I calculated pass_rates over a range of sample_sizes, and increqasing runs_per_sample, I could search out the sample size needed.</span></p><p style="text-align: left;"><span style="font-weight: normal;">That is done in my next program. I have to switch to using the numpy library for its speed and sample_size becomes a range.</span></p><p style="text-align: left;"><span style="font-weight: normal;">When the pass rate confidence levels are calculated I end up with a list of confidence levels for increasing sample sizes that are usually not increasing due to the randomness, e.g.</span></p><p style="text-align: left;"><span style="font-weight: normal;">range_hits = [...0.94, <b>0.95</b>, 0.93, 0.954, ... 0.95, 0.96, <b>0.95</b>, 0.96, 0.96, 0.97, ...]&nbsp; # confidence levels<br /></span></p><p style="text-align: left;"><span style="font-weight: normal;">The range of sample_size corresponding to the first occurrence&gt;= the requested confidence level, and the last occorrence of a confidence level &lt; the requested confidence level in then slightly widened and the runs_per_sample increased on another iteration to get a better result.</span></p><p style="text-align: left;"><span style="font-weight: normal;">Here's a sample of the output I get when searching<br /></span></p><h3 style="text-align: left;"><span style="font-weight: normal;">Sample output</span></h3><div style="background-color: #1f1f1f; color: #cccccc; font-family: Consolas, 'Courier New', monospace; font-size: 14px; font-weight: normal; line-height: 19px; white-space: pre;"><div><span style="color: #ce9178;">$ time python3 sample_search.py </span></div><div><span style="color: #ce9178;">2098 &lt;= n &lt;= 2610</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(50, 5000, 512), 250)</span></div><br /><div><span style="color: #ce9178;">2013 &lt;= n &lt;= 2525</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(2013, 2694, 256), 500)</span></div><br /><div><span style="color: #ce9178;">1501 &lt;= n &lt;= 2781</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1501, 3037, 256), 500)</span></div><br /><div><span style="color: #ce9178;">1757 &lt;= n &lt;= 2013</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(221, 4061, 256), 500)</span></div><br /><div><span style="color: #ce9178;">1714 &lt;= n &lt;= 1970</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1714, 2055, 128), 1000)</span></div><br /><div><span style="color: #ce9178;">1458 &lt;= n &lt;= 2098</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1458, 2226, 128), 1000)</span></div><br /><div><span style="color: #ce9178;">1586 &lt;= n &lt;= 1714</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(818, 2738, 128), 1000)</span></div><br /><div><span style="color: #ce9178;">1564 &lt;= n &lt;= 1692</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1564, 1735, 64), 2000)</span></div><br /><div><span style="color: #ce9178;">1500 &lt;= n &lt;= 1564</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1436, 1820, 64), 2000)</span></div><br /><div><span style="color: #ce9178;">1553 &lt;= n &lt;= 1585</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1489, 1575, 32), 4000)</span></div><br /><div><span style="color: #ce9178;">1547 &lt;= n &lt;= 1579</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1547, 1590, 16), 8000)</span></div><br /><div><span style="color: #ce9178;">1547 &lt;= n &lt;= 1579</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1515, 1611, 16), 8000)</span></div><br /><div><span style="color: #ce9178;">1541 &lt;= n &lt;= 1581</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1541, 1584, 8), 16000)</span></div><br /><div><span style="color: #ce9178;">1501 &lt;= n &lt;= 1533</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1501, 1621, 8), 16000)</span></div><br /><div><span style="color: #ce9178;">1501 &lt;= n &lt;= 1533</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1389, 1538, 8), 16000)</span></div><br /><div><span style="color: #ce9178;">1503 &lt;= n &lt;= 1575</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1495, 1677, 8), 16000)</span></div><br /><div><span style="color: #ce9178;">1503 &lt;= n &lt;= 1535</span></div><div><span style="color: #ce9178;">&nbsp; For p_hat, epsilon, confidence_level =(0.5, 0.05, 0.95)</span></div><div><span style="color: #ce9178;">&nbsp; Using population_size, sample_size, runs_per_sample =(100000, range(1491, 1587, 4), 32000)</span></div><br /><div><span style="color: #ce9178;">&nbsp;Use a sample n = 1535 to predict population pass rate of 50.0% +/-5% with a confidence level of 95%.</span></div><br /><div><span style="color: #ce9178;">real &nbsp; &nbsp;3m49.023s</span></div><div><span style="color: #ce9178;">user &nbsp; &nbsp;3m49.022s</span></div><div><span style="color: #ce9178;">sys &nbsp; &nbsp; 0m1.361s</span></div><div><span style="color: #ce9178;"><br /></span></div></div><p style="text-align: left;"></p><p style="text-align: left;"><span style="font-weight: normal;"><br /></span></p><h3 style="text-align: left;"><span style="font-weight: normal;">My Code</span></h3><div style="background-color: #1f1f1f; color: #cccccc; font-family: Consolas, 'Courier New', monospace; font-size: 14px; font-weight: normal; line-height: 19px; white-space: pre;"><div><span style="color: #6a9955;"># -*- coding: utf-8 -*-</span></div><div><span style="color: #ce9178;">"""</span></div><div><span style="color: #ce9178;">Created on Wed May &nbsp;8 14:04:17 2024</span></div><br /><div><span style="color: #ce9178;">@author: paddy</span></div><div><span style="color: #ce9178;">"""</span></div><div><span style="color: #6a9955;"># %%</span></div><div><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> random </span><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> sample</span></div><div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> numpy </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> np</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sample_search</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">population_size</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">sample_size</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">p_hat</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">epsilon</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">confidence_level</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">runs_per_sample</span><span style="color: #cccccc;">) -&gt; </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"""</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; Arguments with example values:</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; population_size = 100_000 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # must be large, &gt; 65K?</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; sample_size = range(1400, 1750, 16) # (+min, +max, +step)</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; p_hat = 0.5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Population pass rate, 0.5 == 50%</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; epsilon = 0.05 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# target margin of error in sample pass rate. 0.05 == +/-5%</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; confidence_level = 0.95 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # sample to be within p_hat +/- epsilon, 0.95 == 95% of the time.</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; runs_per_sample = 10_000 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# each sample size is run this many times ~2500</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; </span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; Return:</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; min,max range for the sample size, n, satisfying inputs.</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; </span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; """</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">create_1_0_array</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">population_size</span><span style="color: #d4d4d4;">=</span><span style="color: #b5cea8;">100_000</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">p_hat</span><span style="color: #d4d4d4;">=</span><span style="color: #b5cea8;">0.5</span><span style="color: #cccccc;">) -&gt; np.ndarray:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #ce9178;">"Create numpy array of ones and zeroes with p_hat% as ones"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; ones </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">(population_size</span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;">p_hat </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0.5</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; array10 </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> np.zeros(population_size, </span><span style="color: #9cdcfe;">dtype</span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;">np.uint8)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; array10[:ones] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> array10</span></div><br /><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">rates_of_samples</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">population</span><span style="color: #cccccc;">: np.ndarray, </span><span style="color: #9cdcfe;">sample_size_range</span><span style="color: #cccccc;">: </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">runs_per_sample</span><span style="color: #cccccc;">: </span><span style="color: #4ec9b0;">int</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) -&gt; list[list[</span><span style="color: #4ec9b0;">float</span><span style="color: #cccccc;">]]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #ce9178;">"Pass rates for range of sample sizes repeated runs_per_sample times."</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># many_samples_many_rates = [( np.random.shuffle(population), &nbsp; &nbsp; &nbsp; &nbsp; # shuffle every *run*</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [population[:s_count].sum() / s_count &nbsp;# The pass rate for samples</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for s_count in sample_size_range] &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )[1] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # drop the shuffle</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for _ in range(runs_per_sample)] &nbsp; &nbsp; &nbsp; &nbsp; # Every run</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; many_samples_many_rates </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [[ np.random.shuffle(population), &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># shuffle every *sample*</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[population[:s_count].sum() </span><span style="color: #d4d4d4;">/</span><span style="color: #cccccc;"> s_count &nbsp;</span><span style="color: #6a9955;"># The pass rate for samples</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> s_count </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> sample_size_range] &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;][</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># drop the shuffle</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> _ </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">(runs_per_sample)] &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># Every run</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">list</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">zip</span><span style="color: #cccccc;">(</span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;">many_samples_many_rates)) &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;"># Transpose to by_sample_size_then_runs</span></div><br /><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; population </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> create_1_0_array(population_size, p_hat)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; by_sample_size_then_runs </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> rates_of_samples(population, sample_size, runs_per_sample)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># Pass rates within target</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; target_pass_range </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> tmin, tmax </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> p_hat </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> (</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> epsilon), p_hat </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> (</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> epsilon) &nbsp;</span><span style="color: #6a9955;"># Looking for rates within the range</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; range_hits </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #dcdcaa;">sum</span><span style="color: #cccccc;">(tmin </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> sample_pass_rate </span><span style="color: #d4d4d4;">&lt;</span><span style="color: #cccccc;"> tmax </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> sample_pass_rate </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> single_sample_size)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> single_sample_size </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> by_sample_size_then_runs]</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; runs_for_confidence_level </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> confidence_level </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> runs_per_sample</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> n_min, conf </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">zip</span><span style="color: #cccccc;">(sample_size, range_hits):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> conf </span><span style="color: #d4d4d4;">&gt;=</span><span style="color: #cccccc;"> runs_for_confidence_level:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">break</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; n_min </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> sample_size.start</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> n_max, conf </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">list</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">zip</span><span style="color: #cccccc;">(sample_size, range_hits))[::</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> conf </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> runs_for_confidence_level:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n_max </span><span style="color: #d4d4d4;">+=</span><span style="color: #cccccc;"> sample_size.step &nbsp;</span><span style="color: #6a9955;"># back a step</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">break</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; n_max </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> sample_size.stop</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (n_min </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> sample_size.step) </span><span style="color: #d4d4d4;">&gt;=</span><span style="color: #cccccc;"> n_max </span><span style="color: #569cd6;">and</span><span style="color: #cccccc;"> sample_size.step </span><span style="color: #d4d4d4;">&gt;</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># Widen</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; n_max </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> n_max </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> sample_size.step </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">(n_min, n_max, sample_size.step)</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">min_max_mid_step</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">from_range</span><span style="color: #cccccc;">: </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">) -&gt; tuple[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">float</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Extract from **increasing** from_range the min, max, middle, step"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; mn, st </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> from_range.start, from_range.step</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># Handle range where start == stop</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; mx </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> from_range.stop</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> mx </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> from_range:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">pass</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; md </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> (mn </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> mx) </span><span style="color: #d4d4d4;">/</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> mn, mx, md, st</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">next_sample_size</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">new_samples</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">last_samples</span><span style="color: #cccccc;">,</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #9cdcfe;">runs_per_sample</span><span style="color: #cccccc;">,</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #9cdcfe;">widener</span><span style="color: #d4d4d4;">=</span><span style="color: #b5cea8;">1.33</span><span style="color: #cccccc;"> &nbsp;</span><span style="color: #6a9955;"># Widen range by</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; n_min, n_max, n_mid, n_step </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> min_max_mid_step(new_samples)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; l_min, l_max, l_mid, l_step </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> min_max_mid_step(last_samples)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># Next range of samples computes in names with prefix s_</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; increase_runs </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">True</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> n_max </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> l_max:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># Major expand of high end</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; s_max </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> l_max </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> (l_max </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> l_min)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; increase_runs </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">False</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; s_max </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> (n_mid </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;">( n_max </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> n_mid)</span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> widener)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> n_min </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> l_min:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># Major expand of low end</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; s_min </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">max</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, l_min </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> (l_min </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> l_max))</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; increase_runs </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">False</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; s_min </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> (n_mid </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;">( n_min </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> n_mid)</span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> widener)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; s_min, s_max </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> (</span><span style="color: #dcdcaa;">max</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">(s_min)), </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">(s_max </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0.5</span><span style="color: #cccccc;">))</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; s_step </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> n_step</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> s_min </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> s_max:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> s_min </span><span style="color: #d4d4d4;">&gt;</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s_min </span><span style="color: #d4d4d4;">-=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; s_max </span><span style="color: #d4d4d4;">+=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> increase_runs </span><span style="color: #569cd6;">or</span><span style="color: #cccccc;"> n_max </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> n_min:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; runs_per_sample </span><span style="color: #d4d4d4;">*=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> n_max </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> n_min:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s_step </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s_step </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">max</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, (s_step </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">) </span><span style="color: #d4d4d4;">//</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">) &nbsp;</span><span style="color: #6a9955;"># Go finer</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; next_sample_range </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">max</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">(s_min)), </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">(s_max </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0.5</span><span style="color: #cccccc;">), s_step)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> next_sample_range, runs_per_sample</span></div><br /><div><span style="color: #6a9955;"># %%</span></div><br /><div><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">__name__</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'__main__'</span><span style="color: #cccccc;">:</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; population_size </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">100_000</span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># must be large, &gt; 65K?</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; sample_size </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">50</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">5_000</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">512</span><span style="color: #cccccc;">) </span><span style="color: #6a9955;"># Increasing!</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; p_hat </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0.50</span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;"># Population pass rate, 0.5 == 50%</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; epsilon </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0.05</span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;"># target margin of error in sample pass rate. 0.05 == +/-5%</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; confidence_level </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0.95</span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># sample to be within p_hat +/- epsilon, 0.95 == 95% of the time.</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; runs_per_sample </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">250</span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># each sample size is run this many time at start, ~250</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; max_runs_per_sample </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">35_000</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">while</span><span style="color: #cccccc;"> runs_per_sample </span><span style="color: #d4d4d4;">&lt;</span><span style="color: #cccccc;"> max_runs_per_sample:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; new_range </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> sample_search(population_size, sample_size, p_hat, epsilon, confidence_level, runs_per_sample)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; n_min, n_max, n_mid, n_step </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> min_max_mid_step(new_range)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">"</span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">n_min</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> &lt;= n &lt;= </span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">n_max</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">" &nbsp;For </span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">p_hat, epsilon, confidence_level =</span><span style="color: #569cd6;">}</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">" &nbsp;Using </span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">population_size, sample_size, runs_per_sample =</span><span style="color: #569cd6;">}</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; sample_size, runs_per_sample </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> next_sample_size(new_range, sample_size, runs_per_sample)</span></div><br /><div><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">" Use a sample n = </span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">n_max</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> to predict population pass rate of </span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">p_hat</span><span style="color: #d4d4d4;">*</span><span style="color: #b5cea8;">100</span><span style="color: #cccccc;">.</span><span style="color: #569cd6;">:.1f}</span><span style="color: #ce9178;">% +/-</span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">epsilon</span><span style="color: #d4d4d4;">*</span><span style="color: #b5cea8;">100</span><span style="color: #cccccc;">.</span><span style="color: #569cd6;">:.0f}</span><span style="color: #ce9178;">% "</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">"with a confidence level of </span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">confidence_level</span><span style="color: #d4d4d4;">*</span><span style="color: #b5cea8;">100</span><span style="color: #cccccc;">.</span><span style="color: #569cd6;">:.0f}</span><span style="color: #ce9178;">%."</span><span style="color: #cccccc;">)</span></div><br /></div><p style="text-align: left;"></p><p style="text-align: left;"><b>END.<br /></b></p><p style="text-align: left;"><span style="font-weight: normal;"><br /></span></p><p><b><i>&nbsp;</i></b><br /></p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 10, 2024 07:09 PM UTC by
            <a href="http://feeds.feedburner.com/GoDeh" class="link link-hover text-primary"
              >Go Deh</a
            >
          </div>
          <a
            href="http://paddy3118.blogspot.com/2024/05/predicting-results-from-small-samples.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://blog.glyph.im/2024/05/hope.html" class="hover:underline"
              >Hope</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>Your words are doing something. Do you know what that something is?</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 07, 2024 10:26 PM UTC by
            <a href="http://glyph.twistedmatrix.com/feeds/posts/default" class="link link-hover text-primary"
              >Glyph Lefkowitz</a
            >
          </div>
          <a
            href="https://blog.glyph.im/2024/05/hope.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/" class="hover:underline"
              >Collating, processing, managing, backing up and serving a gallery of a 350GiB, 60k picture collection</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>In the last
<a href="https://en.osm.town/@mdione/112376851535336773">two</a>
<a href="https://en.osm.town/@mdione/112399328668312076">days</a>
I have commented a little bit how I process and manage my photos.
I'm not a very avid photographer, I have like 350 gigabytes of photos, most of them are
yet not processed, around 60,000 of them.
So I will comment a little bit more how do I manage all that.</p>
<p>I start with the camera, a 24Mpx camera, just a couple of lenses, nothing fancy.
Go out, take some pictures, come back home.</p>
<p>I put the SD camera on my computer and I use my own software to import it.
The import process is not fancy, it just empties the SD card, checks every file for the
EXIF information, uses the date and time to create the filename, a sequence number if needed,
and puts them all in a single
<code>incoming</code> directory where all the current unprocessed images are<sup id="fnref:1"><a class="footnote-ref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fn:1">1</a></sup>.</p>
<p>Then I use this software I developed in <code>PyQt5</code>.
It's very, very basic, but it's really quick, it's mostly keyboard based. It reads
the EXIF information and present some of the tags at the left of the screen; things like date,
time, size, orientation and then focal length, aperture, ISO and various other data I can
get from the images. It's mostly focused on my current camera and the previous one, both Nikons<sup id="fnref:2"><a class="footnote-ref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fn:2">2</a></sup>.
The previous one was an N90, right now it's an N7200.
The image occupies most of the window, and the program is always in full screen.
At the bottom there's the filename and a couple of toggles.</p>
<p><img alt="" src="https://www.grulic.org.ar/~mdione/glob/images/filter.png" /></p>
<p>I can do several things with this:</p>
<ul>
<li>
<p>Go forwards, backwards, by one, by ten, by a hundred
and by a thousand, because that <code>incoming</code> directory right now has almost seven years of history,
probably ten thousand pictures.</p>
</li>
<li>
<p>Move randomly, which allows me to pick up a new thing to collate when I get
bored with the current one but I want to keep doing it to reduce the backlog.</p>
</li>
<li>
<p>Mark the images in different ways. The main ones are about selecting for storing, with two modes:
One is to keep the image in the original size. I usually use this for my best landscape or astro photos. The other one will
resize it down to twelve megapixels<sup id="fnref:3"><a class="footnote-ref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fn:3">3</a></sup>, from 6000x4000 pixels to 4500x3000 pixels, 75% on each dimension.</p>
</li>
<li>Rotate the images, just in case the camera did not guess the orientation
correctly, usually when I'm taking pictures right upward or right downwards.</li>
<li>
<p>Select several pictures for stitching, which will use
<a href="https://hugin.sourceforge.io/"><code>hugin</code></a> to do so. It's not 100% automatic, but at least puts the pictures in a <code>stitch</code>
directory and point <code>hugin</code> there.</p>
</li>
<li>
<p>Select a picture for cropping or editing; I'm not going
to develop a whole image editor, so I just delegate to an existing program, <a href="https://apps.kde.org/gwenview/"><code>gwenview</code></a>.</p>
</li>
<li>
<p>Select images for deleting and delete them permanently.</p>
</li>
<li>
<p>Select several images for comparison and enter/exit comparison mode,
which means that going backwards and forwards applies only this this set.
This is good for things like when you take certain pictures, but there are not necessarily
sequences in the original picture sequence, which for me makes culling images faster.</p>
</li>
<li>It has two zoom levels, fit to screen and full size.
I don't have much the need for other options.</li>
<li>
<p>99% of the pictures I take are freehand,
so in a sequence there's always some movement between images. In full size I can put every image on its own position,
aligning the whole sequence and allow culling based on blurriness or other factors.</p>
</li>
<li>
<p>Also in full size, I can lock the view, so when I pan one of the images
and I switch to another one, it will also pan that second image to that position.
It also helps when I'm checking for details between two different images of the same thing.</p>
</li>
<li>
<p>Move all the selected images, resize them if needed, and put them in a folder. It also creates a hardlink
between my categorization in folders into a folder that collects all the images by date; there's one folder
for each month and year with all the pictures of that month inside.
It uses hardlinks so it doesn't duplicate the image file, saving space.</p>
</li>
<li>
<p>It also has a readonly mode, so I can hand the computer to my kids to watch the photos.</p>
</li>
</ul>
<p>When culling, I use the comparison mode and individual position and lock view features a lot,
going back and forth between images, discarding until only one is left.</p>
<p>That's the first part, the one I must spend my time on, just basic culling, selection and storage.
My main tree is just a tree based on my way of categorizing the images.</p>
<p>My program doesn't have a directory view; instead, I just use <code>gwenview</code> again.</p>
<p>Notice there's no photo editing in this workflow. I rarely shoot in RAW for two reasons: a) I'm really bad at
postprocessing; and b) even if I was good, I don't have the time to do it; my free time is shared among several
hobbies. I only do it for astro photograpy and very few, rare occasions.</p>
<p>The third tool I use is <a href="https://www.digikam.org/"><code>digikam</code></a>. I use it for two things, which are related:
semi-automatic and manual tagging.
The semi-automatic is face detection; <code>digikam</code> can find and guess faces, but requires manual confirmation<sup id="fnref:4"><a class="footnote-ref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fn:4">4</a></sup>.
The fully manual part is plain tagging, mostly with location<sup id="fnref:5"><a class="footnote-ref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fn:5">5</a></sup> and sometimes some other info.
I sometimes also rate my pictures; I mostly use four and five, sometimes three, only for my best pictures.</p>
<p>Then there's another script that reads the <code>digikam</code> database and uses
the tags to create another directory for the tags, which also uses hardlinks.
It still doesn't do anything about the rating, but I could easily add that.</p>
<p>That's all on my personal computer. I use <code>rsync</code> to make a copy on my home server that has two purposes.
One, it's a backup, which includes all the original 24Mpx images that I hadn't culled yet,
which I think is the biggest part of my collection.</p>
<p>The second one, it feeds a
<a href="https://www.files.gallery/">gallery program</a> that is developed in PHP by a guy named Karl. It's probably
the single paid software I use. It's a single PHP file that you put at the root of your gallery, you enable
PHP processing by your web server (in my case, Apache), and generates the gallery on the run,
just reading the directories and creating all the necessary thumbnails and all that.
I did a small change to this program. The original algorithm creates thumbnails based on each file's path
(and other attributes, 4 or 5 I think), but because I have all these hard links, it creates duplicated
thumbnail files. So I changed it to use the filename instead of the filepath<sup id="fnref:6"><a class="footnote-ref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fn:6">6</a></sup>.</p>
<p>I don't have any kind of synchronization with my phone.
Most of the pictures I take with it are not the kind of pictures I usually will put in my own gallery, except
the times I go out without my camera and I end up taking pictures anyway.
I still don't have a workflow for that, it's mostly manual.
So if I ever lose my phone, I'm fscked because I have definitely no backups of it.</p>
<p>That lack of synchronization also means that the only way to see the pictures in my phone is by opening the gallery
in the browser. It's not the best, but I don't do that that often.
I have tried to use alternatives like NextCloud, which I also have installed on my home server.
I have some issues with permissions because, again, this is a backup directory, so it has
all the owner information that belongs to me, instead of the web server.
That means it doesn't have the proper permissions to let NextCloud manage
those files. Luckily <code>files.gallery</code> just needs a subdirectory.</p>
<p>Another reason is that before I was using static gallery generators: <code>sigal</code>, <code>gallerpy</code> or even <code>nikola</code>, which
drives this glob. All those can generate the gallery statically, so serving them is so much easier.
My old home server died at some point and I had to come up with something.
I had a spare old laptop laying around and I used that. Now it's enough to generate the gallery on the fly.
I have plans to make something bigger, but that's for another time.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>In fact I have another directory for all the unprocessed photos from another era, and I'm thinking of starting a
  new era. <a class="footnote-backref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fnref:1" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>Even if EXIV is a standard for <em>storing</em> tags, there's no standard for the tag <em>names</em>, so every
  manufacturer has its own sets, that even change between camera lines. For a better idea of what I'm talking about,
  just peruse <a href="https://github.com/exiftool/exiftool/tree/master/lib/Image/ExifTool"><code>Image::ExifTool</code>'s source code</a>. <a class="footnote-backref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fnref:2" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:3">
<p>I currently own no screen that is 4500 pixels of width, let alone 6000. Maybe my kids will, but by then
  Mpx count will be so different that it won't make any sense to accomodate that. Right now storage for me is
  expensive, so I'll keep it this way. <a class="footnote-backref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fnref:3" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
<li id="fn:4">
<p>Or rejection: the false positive rate is bigger that I would like, and it doesn't have a way to say 'yes, this is
  that person, but don't train on this image'. This is the case for pictures where the face is either semi occluded,
  sometimes painted, sometimes bad lightning, and mostly just blurry. <a class="footnote-backref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fnref:4" title="Jump back to footnote 4 in the text">↩</a></p>
</li>
<li id="fn:5">
<p>Most of my pictures don't have GPS info, not even the ones in the phone. The latter I only enable when I really
  need the info later, mostly for mapping. Later I either discard the photo or remove the info. <a class="footnote-backref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fnref:5" title="Jump back to footnote 5 in the text">↩</a></p>
</li>
<li id="fn:6">
<p>For a while now I'm even making this distinction in my own code, filename vs filepath. <a class="footnote-backref" href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/#fnref:6" title="Jump back to footnote 6 in the text">↩</a></p>
</li>
</ol>
</div>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 07, 2024 11:06 AM UTC by
            <a href="http://www.grulic.org.ar/~mdione/glob/categories/python.xml" class="link link-hover text-primary"
              >Marcos Dione</a
            >
          </div>
          <a
            href="https://www.grulic.org.ar/~mdione/glob/posts/collating-processing-managing-backing-up-and-serving-a-gallery-of-a-350gib-60k-picture-collection/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.europython-society.org/community-call-for-venues-europython-2025/" class="hover:underline"
              >🐍 Community Call for Venues - EuroPython 2025</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            Help us select a location and venue for EuroPython 2025.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 06, 2024 01:23 PM UTC by
            <a href="http://www.europython-society.org/rss" class="link link-hover text-primary"
              >EuroPython Society</a
            >
          </div>
          <a
            href="https://www.europython-society.org/community-call-for-venues-europython-2025/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://blog.holoviz.org/posts/hvplot_release_0.10/" class="hover:underline"
              >Plotting made easy with hvPlot: 0.9 and 0.10 releases</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            Release announcement for hvPlot 0.9 and 0.10, including: Polars integration, Xarray support added to the Explorer, Large timeseries exploration made easier, and more!
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 06, 2024 12:00 AM UTC by
            <a href="https://blog.holoviz.org/index.xml" class="link link-hover text-primary"
              >HoloViz</a
            >
          </div>
          <a
            href="https://blog.holoviz.org/posts/hvplot_release_0.10/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://doughellmann.com/releases/sphinxcontrib-sqltable-2-1-0/" class="hover:underline"
              >sphinxcontrib-sqltable 2.1.0 - SQLAlchemy 2.0 support</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            What&rsquo;s new in 2.1.0? update packaging to use pyproject.toml Update sqltable.py to support SQLAlchemy 2.0 (contributions by Gabriel Gaona) Pin SQLAlchemy&gt;=2.0 to prevent backwards incompatibility with changes to the query execution interface. (contributions by Gabriel Gaona) fix up python version support list Fix the obsolete link to bitbucket (contributions by kbaikov) find the sample schema file depending on how sphinx is invoked move sample database to /tmp for rtd.org
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 05, 2024 09:17 AM UTC by
            <a href="https://feeds.feedburner.com/doughellmann/python" class="link link-hover text-primary"
              >Doug Hellmann</a
            >
          </div>
          <a
            href="https://doughellmann.com/releases/sphinxcontrib-sqltable-2-1-0/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://anarc.at/blog/2024-05-01-gitolite-gitlab-migration/" class="hover:underline"
              >Tor migrates from Gitolite/GitWeb to GitLab</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <blockquote><p>Note: I've been awfully silent here for the past ... (checks notes)
oh dear, 3 months! But that's not because I've been idle, quite the
contrary, I've been very busy but just didn't have time to write
about anything. So I've taken it upon myself to write <em>something</em>
about my work this week, and published <a href="https://blog.torproject.org/gitolite-gitlab-migration/">this post on the Tor
blog</a> which I copy here for a broader audience. Let me know if
you like this or not.</p></blockquote>

<p>Tor has finally completed a long migration from legacy Git
infrastructure (<a href="https://gitlab.torproject.org/tpo/tpa/team/-/wikis/howto/git">Gitolite and GitWeb</a>) to our self-hosted
<a href="https://gitlab.torproject.org/tpo/tpa/team/-/wikis/howto/gitlab">GitLab</a> server.</p>

<p>Git repository addresses have therefore changed. Many of you probably
have made the switch already, but if not, you will need to change:</p>

<pre><code>https://git.torproject.org/
</code></pre>

<p>to:</p>

<pre><code>https://gitlab.torproject.org/
</code></pre>

<p>In your Git configuration.</p>

<p>The <a href="https://gitweb.torproject.org/">GitWeb front page</a> is now an archived listing of all the
repositories before the migration. Inactive git repositories were
archived in GitLab <a href="https://gitlab.torproject.org/legacy/gitolite/">legacy/gitolite namespace</a> and the
<code>gitweb.torproject.org</code> and <code>git.torproject.org</code> web sites now
redirect to GitLab.</p>

<p>Best effort was made to reproduce the original gitolite repositories
faithfully and also avoid duplicating too much data in the
migration. But it's <em>possible</em> that some data present in Gitolite has
not migrated to GitLab.</p>

<p>User repositories are particularly at risk, because they were
massively migrated, and they were "re-forked" from their upstreams, to
avoid wasting disk space. If a user had a project with a matching name
it was <em>assumed</em> to have the right data, which might be inaccurate.</p>

<p>The two virtual machines responsible for the legacy service (<code>cupani</code>
for <code>git-rw.torproject.org</code> and <code>vineale</code> for <code>git.torproject.org</code> and
<code>gitweb.torproject.org</code>) have been shutdown. Their disks will remain
for 3 months (until the end of July 2024) and their backups for
another year after that (until the end of July 2025), after which
point all the data from those hosts will be destroyed, with only the
GitLab archives remaining.</p>

<p>The rest of this article expands on how this was done and what kind of
problems we faced during the migration.</p>

<h1 id="where-is-the-code">Where is the code?</h1>

<p>Normally, nothing should be lost. All repositories in gitolite have
been either explicitly migrated by their owners, forcibly migrated by
the sysadmin team (<a href="https://gitlab.torproject.org/tpo/tpa/team/">TPA</a>), or explicitly destroyed at their owner's
request.</p>

<p>An exhaustive <a href="https://archive.torproject.org/websites/gitolite2gitlab.txt">rewrite map</a> translates gitolite projects to GitLab
projects. Some of those projects actually redirect to their <em>parent</em>
in cases of empty repositories that were obvious forks. Destroyed
repositories redirect to the GitLab front page.</p>

<p>Because the migration happened progressively, it's technically
possible that commits pushed to gitolite were lost after the
migration. We took great care to avoid that scenario. First, we
adopted a proposal (<a href="https://gitlab.torproject.org/tpo/tpa/team/-/wikis/policy/tpa-rfc-36-gitolite-gitweb-retirement">TPA-RFC-36</a>) in June 2023 to announce the
transition. Then, in <a href="https://gitlab.torproject.org/tpo/tpa/team/-/issues/41213">March 2024</a>, we locked down all repositories
from any further changes. Around that time, only a <a href="https://gitlab.torproject.org/tpo/tpa/team/-/issues/41214#note_2983302" title="handful of repositories">handful of
repositories</a> had changes made after the adoption date, and we
examined each repository carefully to make sure nothing was lost.</p>

<p>Still, we built a <a href="https://gitlab.torproject.org/tpo/tpa/team/-/issues/41215#note_3023924">diff of all the changes in the git references</a>
that archivists can peruse to check for data loss. It's large (6MiB+)
because a lot of repositories were migrated before the mass migration
and then kept evolving in GitLab. Many other repositories were rebuilt
in GitLab from parent to rebuild a fork relationship which added extra
references to those clones.</p>

<p>A note to amateur archivists out there, it's probably too late for one
last crawl now. The Git repositories now all redirect to GitLab and
are effectively unavailable in their original form.</p>

<p>That said, the GitWeb site was crawled into the <a href="https://archive.org/">Internet Archive</a> <a href="https://gitlab.torproject.org/tpo/tpa/team/-/issues/41218#note_2992296">in
February 2024</a>, so at least some copy of it is available in the
<a href="https://web.archive.org/web/20240204162238/https://gitweb.torproject.org/">Wayback Machine</a>. At that point, however, many developers had already
migrated their projects to GitLab, so the copies there were already
possibly out of date compared with the repositories in GitLab.</p>

<p><a href="https://www.softwareheritage.org/">Software Heritage</a> also has a copy of all repositories hosted on
Gitolite <a href="https://gitlab.softwareheritage.org/swh/infra/sysadm-environment/-/issues/4939">since June 2023</a> and have continuously kept mirroring the
repositories, where they will be kept hopefully in eternity. There's
an <a href="https://gitlab.softwareheritage.org/swh/devel/swh-web/-/issues/4787">issue</a> where the main website can't find the repositories when
you search for <code>gitweb.torproject.org</code>, instead <a href="https://archive.softwareheritage.org/browse/search/?q=git.torproject.org&amp;visit_type=git&amp;with_content=true&amp;with_visit=true">search for
<code>git.torproject.org</code></a>.</p>

<p>In any case, if you believe data is missing, please do let us know by
<a href="https://gitlab.torproject.org/tpo/tpa/team/-/issues/new">opening an issue with TPA</a>.</p>

<h1 id="why">Why?</h1>

<p>This is an old project in the making. The first <a href="https://gitlab.torproject.org/tpo/tpa/team/-/issues/40472">discussion about
migrating from gitolite to GitLab</a> started in 2020 (almost 4 years
ago). But <a href="https://gitlab.torproject.org/tpo/tpa/team/-/wikis/howto/trac#history">going further back</a>, the first GitLab experiment was in
2016, almost a decade ago.</p>

<p>The current GitLab server dates from 2019, <a href="https://blog.torproject.org/from-trac-into-gitlab-for-tor/">replacing Trac for issue
tracking in 2020</a>. It was originally supposed to host only mirrors
for merge requests and issue trackers but, naturally, one thing led to
another and eventually, GitLab had grown a container registry,
continuous integration (CI) runners, GitLab Pages, and, of course,
hosted most Git repositories.</p>

<p>There were hesitations at moving to GitLab for code hosting. We had
<a href="https://gitlab.torproject.org/tpo/tpa/gitlab/-/issues/81">discussions about the increased attack surface</a> and <a href="https://gitlab.torproject.org/tpo/tpa/gitlab/-/issues/98">ways to
mitigate that</a>, but, ultimately, it seems the issues were not that
serious and the community embraced GitLab.</p>

<p>TPA actually migrated its most critical repositories out of shared
hosting entirely, into specific servers (e.g. the Puppet Git
repository is just on the Puppet server now), leveraging Git's
decentralized nature and removing an entire attack surface from our
infrastructure. Some of those repositories are <em>mirrored</em> back into
GitLab, but the authoritative copy is not on GitLab.</p>

<p>In any case, the proposal to migrate from Gitolite to GitLab was
effectively just formalizing a <em>fait accompli</em>.</p>

<h1 id="how-to-migrate-from-gitolite-cgit-to-gitlab">How to migrate from Gitolite / cgit to GitLab</h1>

<p>The progressive migration was a challenge. If you intend to migrate
between hosting platforms, we strongly recommend to make a "flag day"
during which you migrate <em>all</em> repositories <em>at once</em>. This ensures a
smoother transition and avoids elaborate rewrite rules.</p>

<p>When Gitolite access was shutdown, we had repositories on both GitLab
and Gitolite, without a clear relationship between the two. A priori,
the plan then was to import all the remaining Gitolite repositories
into the <code>legacy/gitolite</code> namespace, but that seemed wasteful,
particularly for large repositories like <a href="https://gitlab.torproject.org/tpo/applications/tor-browser">Tor Browser</a> which uses
nearly a gigabyte of disk space. So we took special care to avoid
duplicating repositories.</p>

<p>When the <a href="https://gitlab.torproject.org/tpo/tpa/team/-/issues/41215">mass migration</a> started, only 71 of the 538 Gitolite
repositories were <code>Migrated to GitLab</code> in the <code>gitolite.conf</code>
file. So, given that we had <em>hundreds</em> of repositories to migrate:, we
developed some automation to "<a href="https://xkcd.com/1205/">save time</a>". We already automate
similar ad-hoc tasks with <a href="https://gitlab.torproject.org/tpo/tpa/team/-/wikis/howto/fabric/">Fabric</a>, so we used that framework here
as well. (Our normal configuration management tool is <a href="https://gitlab.torproject.org/tpo/tpa/team/-/wikis/howto/puppet">Puppet</a>,
which is a poor fit here.)</p>

<p>So a relatively <a href="https://gitlab.torproject.org/tpo/tpa/fabric-tasks/-/blob/85121b4a8a293cebb0d9dfd68ebf26e2cc95ed76/fabric_tpa/gitolite.py">large amount of Python code</a> was produced to
basically do the following:</p>

<ol>
<li>check if all on-disk repositories are listed in <code>gitolite.conf</code>
(and vice versa) and either add missing repositories or delete
them from disk if garbage</li>
<li>for each repository in <code>gitolite.conf</code>, if its category is marked
<code>Migrated to GitLab</code>, skip, otherwise;</li>
<li>find a matching GitLab project by name, prompt the user for
multiple matches</li>
<li>if a match is found, redirect if the repository is non-empty

<ul>
<li>we have GitLab projects that <em>look</em> like the real thing, but are
only present to host migrated Trac issues</li>
<li>in such cases we cloned the Gitolite project locally and pushed
to the existing repository instead</li>
</ul>
</li>
<li>otherwise, a new repository is created in the <code>legacy/gitolite</code>
namespace, using the "import" mechanism in GitLab to automatically
import the repository from Gitolite, creating redirections and
updating <code>gitolite.conf</code> to document the change</li>
</ol>


<p>User repositories (those under the <code>user/</code> directory in Gitolite) were
handled specially. First, the existing redirection map was checked to
see if a similarly named project was migrated (so that,
e.g. <code>user/dgoulet/tor</code> is properly treated as a fork of
<code>tpo/core/tor</code>). Then the parent project was forked in GitLab and the
Gitolite project force-pushed to the fork. This allows us to show the
fork relationship in GitLab and, more importantly, benefit from the
"pool" feature in GitLab which deduplicates disk usage between forks.</p>

<p>Sometimes, we found no such relationships. Then we simply imported
multiple repositories with similar names in the <code>legacy/gitolite</code>
namespace, sometimes creating forks between user repositories, on a
first-come-first-served basis from the <code>gitolite.conf</code> order.</p>

<p>The code used in this migration is now available publicly. We
encourage other groups planning to migrate from Gitolite/GitWeb to
GitLab to use (and contribute to) our <a href="https://gitlab.torproject.org/tpo/tpa/fabric-tasks/">fabric-tasks</a> repository,
even though it does have its fair share of hard-coded assertions.</p>

<p>The main entry point is the <code>gitolite.mass-repos-migration</code> task. A
typical migration job looked like:</p>

<pre><code>anarcat@angela:fabric-tasks$ fab -H cupani.torproject.org gitolite.mass-repos-migration 
[...]
INFO: skipping project project/help/infra in category Migrated to GitLab
INFO: skipping project project/help/wiki in category Migrated to GitLab
INFO: skipping project project/jenkins/jobs in category Migrated to GitLab
INFO: skipping project project/jenkins/tools in category Migrated to GitLab
INFO: searching for projects matching fastlane
INFO: Successfully connected to https://gitlab.torproject.org
import gitolite project project/tor-browser/fastlane into gitlab legacy/gitolite/project/tor-browser/fastlane with desc 'Tor Browser app store and deployment configuration for Fastlane'? [Y/n] 
INFO: importing gitolite project project/tor-browser/fastlane into gitlab legacy/gitolite/project/tor-browser/fastlane with desc 'Tor Browser app store and deployment configuration for Fastlane'
INFO: building a new connect to cupani
INFO: defaulting name to fastlane
INFO: importing project into GitLab
INFO: Successfully connected to https://gitlab.torproject.org
INFO: loading group legacy/gitolite/project/tor-browser
INFO: archiving project
INFO: creating repository fastlane (fastlane) in namespace legacy/gitolite/project/tor-browser from https://git.torproject.org/project/tor-browser/fastlane into https://gitlab.torproject.org/legacy/gitolite/project/tor-browser/fastlane
INFO: migrating Gitolite repository project/tor-browser/fastlane to GitLab project legacy/gitolite/project/tor-browser/fastlane
INFO: uploading 399 bytes to /srv/git.torproject.org/repositories/project/tor-browser/fastlane.git/hooks/pre-receive
INFO: making /srv/git.torproject.org/repositories/project/tor-browser/fastlane.git/hooks/pre-receive executable
INFO: adding entry to rewrite_map /home/anarcat/src/tor/tor-puppet/modules/profile/files/git/gitolite2gitlab.txt
INFO: modifying gitolite.conf to add: "config gitweb.category = Migrated to GitLab"
INFO: rewriting gitolite config /home/anarcat/src/tor/gitolite-admin/conf/gitolite.conf to change project project/tor-browser/fastlane to category Migrated to GitLab
INFO: skipping project project/bridges/bridgedb-admin in category Migrated to GitLab
[...]
</code></pre>

<p>In the above, you can see migrated repositories skipped then the
<a href="https://gitlab.torproject.org/legacy/gitolite/project/tor-browser/fastlane">fastlane project</a> being archived into GitLab. Another example with
a later version of the script, processing only user repositories and
showing the interactive prompt and a force-push into a fork:</p>

<pre><code>$ fab -H cupani.torproject.org  gitolite.mass-repos-migration --include 'user/.*' --exclude '.*tor-?browser.*'
INFO: skipping project user/aagbsn/bridgedb in category Migrated to GitLab
[...]
INFO: skipping project user/phw/atlas in category Migrated to GitLab
INFO: processing project user/phw/obfsproxy (Philipp's obfsproxy repository) in category Users' development repositories (Attic)
INFO: Successfully connected to https://gitlab.torproject.org
INFO: user repository detected, trying to find fork phw/obfsproxy
WARNING: no existing fork found, entering user fork subroutine
INFO: found 6 GitLab projects matching 'obfsproxy' (https://gitweb.torproject.org/user/phw/obfsproxy.git)
0 legacy/gitolite/debian/obfsproxy
1 legacy/gitolite/debian/obfsproxy-legacy
2 legacy/gitolite/user/asn/obfsproxy
3 legacy/gitolite/user/ioerror/obfsproxy
4 tpo/anti-censorship/pluggable-transports/obfsproxy
5 tpo/anti-censorship/pluggable-transports/obfsproxy-legacy
select parent to fork from, or enter to abort: ^G4
INFO: repository is not empty: in-pack: 2104, packs: 1, size-pack: 414
fork project tpo/anti-censorship/pluggable-transports/obfsproxy into legacy/gitolite/user/phw/obfsproxy^G [Y/n] 
INFO: loading project tpo/anti-censorship/pluggable-transports/obfsproxy
INFO: forking project user/phw/obfsproxy into namespace legacy/gitolite/user/phw
INFO: waiting for fork to complete...
INFO: fork status: started, sleeping...
INFO: fork finished
INFO: cloning and force pushing from user/phw/obfsproxy to legacy/gitolite/user/phw/obfsproxy
INFO: deleting branch protection: &lt;class 'gitlab.v4.objects.branches.ProjectProtectedBranch'&gt; =&gt; {'id': 2723, 'name': 'master', 'push_access_levels': [{'id': 2864, 'access_level': 40, 'access_level_description': 'Maintainers', 'deploy_key_id': None}], 'merge_access_levels': [{'id': 2753, 'access_level': 40, 'access_level_description': 'Maintainers'}], 'allow_force_push': False}
INFO: cloning repository git-rw.torproject.org:/srv/git.torproject.org/repositories/user/phw/obfsproxy.git in /tmp/tmp6orvjggy/user/phw/obfsproxy
Cloning into bare repository '/tmp/tmp6orvjggy/user/phw/obfsproxy'...
INFO: pushing to GitLab: https://gitlab.torproject.org/legacy/gitolite/user/phw/obfsproxy
remote: 
remote: To create a merge request for bug_10887, visit:        
remote:   https://gitlab.torproject.org/legacy/gitolite/user/phw/obfsproxy/-/merge_requests/new?merge_request%5Bsource_branch%5D=bug_10887        
remote: 
[...]
To ssh://gitlab.torproject.org/legacy/gitolite/user/phw/obfsproxy
 + 2bf9d09...a8e54d5 master -&gt; master (forced update)
 * [new branch]      bug_10887 -&gt; bug_10887
[...]
INFO: migrating repo
INFO: migrating Gitolite repository https://gitweb.torproject.org/user/phw/obfsproxy.git to GitLab project https://gitlab.torproject.org/legacy/gitolite/user/phw/obfsproxy
INFO: adding entry to rewrite_map /home/anarcat/src/tor/tor-puppet/modules/profile/files/git/gitolite2gitlab.txt
INFO: modifying gitolite.conf to add: "config gitweb.category = Migrated to GitLab"
INFO: rewriting gitolite config /home/anarcat/src/tor/gitolite-admin/conf/gitolite.conf to change project user/phw/obfsproxy to category Migrated to GitLab
INFO: processing project user/phw/scramblesuit (Philipp's ScrambleSuit repository) in category Users' development repositories (Attic)
INFO: user repository detected, trying to find fork phw/scramblesuit
WARNING: no existing fork found, entering user fork subroutine
WARNING: no matching gitlab project found for user/phw/scramblesuit
INFO: user fork subroutine failed, resuming normal procedure
INFO: searching for projects matching scramblesuit
import gitolite project user/phw/scramblesuit into gitlab legacy/gitolite/user/phw/scramblesuit with desc 'Philipp's ScrambleSuit repository'?^G [Y/n] 
INFO: checking if remote repo https://git.torproject.org/user/phw/scramblesuit exists
INFO: importing gitolite project user/phw/scramblesuit into gitlab legacy/gitolite/user/phw/scramblesuit with desc 'Philipp's ScrambleSuit repository'
INFO: importing project into GitLab
INFO: Successfully connected to https://gitlab.torproject.org
INFO: loading group legacy/gitolite/user/phw
INFO: creating repository scramblesuit (scramblesuit) in namespace legacy/gitolite/user/phw from https://git.torproject.org/user/phw/scramblesuit into https://gitlab.torproject.org/legacy/gitolite/user/phw/scramblesuit
INFO: archiving project
INFO: migrating Gitolite repository https://gitweb.torproject.org/user/phw/scramblesuit.git to GitLab project https://gitlab.torproject.org/legacy/gitolite/user/phw/scramblesuit
INFO: adding entry to rewrite_map /home/anarcat/src/tor/tor-puppet/modules/profile/files/git/gitolite2gitlab.txt
INFO: modifying gitolite.conf to add: "config gitweb.category = Migrated to GitLab"
INFO: rewriting gitolite config /home/anarcat/src/tor/gitolite-admin/conf/gitolite.conf to change project user/phw/scramblesuit to category Migrated to GitLab
[...]
</code></pre>

<p>Acute eyes will notice the <a href="https://anarc.at/blog/2022-11-08-modern-bell-urgency/">bell used as a notification mechanism</a>
as well in this transcript.</p>

<p>A lot of the code is now useless for us, but some, like "commit and
push" or <a href="https://gitlab.torproject.org/tpo/tpa/fabric-tasks/-/blob/85121b4a8a293cebb0d9dfd68ebf26e2cc95ed76/fabric_tpa/git.py#L120-153"><code>is-repo-empty</code></a> live on in the <a href="https://gitlab.torproject.org/tpo/tpa/fabric-tasks/-/blob/85121b4a8a293cebb0d9dfd68ebf26e2cc95ed76/fabric_tpa/git.py">git module</a> and, of
course, the <a href="https://gitlab.torproject.org/tpo/tpa/fabric-tasks/-/blob/85121b4a8a293cebb0d9dfd68ebf26e2cc95ed76/fabric_tpa/gitlab.py">gitlab module</a> has grown some legs along the
way. We've also found fun bugs, like a <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=642504">file descriptor exhaustion in
bash</a>, among other oddities. The <a href="https://gitlab.torproject.org/groups/tpo/tpa/-/milestones/11#tab-issues">retirement milestone</a> and
<a href="https://gitlab.torproject.org/tpo/tpa/team/-/issues/41215">issue 41215</a> has a detailed log of the migration, for those
curious.</p>

<p>This was a challenging project, but it feels nice to have this behind
us. This gets rid of 2 of the 4 remaining machines running Debian
"old-old-stable", which moves a bit further ahead in our late
<a href="https://gitlab.torproject.org/groups/tpo/tpa/-/milestones/5#tab-issues">bullseye upgrades milestone</a>.</p>

<p>Full transparency: we tested GPT-3.5, GPT-4, and other large language
models to see if they could answer the question "write a set of
rewrite rules to redirect GitWeb to GitLab". This has become a
standard LLM test for your faithful writer to figure out how good a
LLM is at technical responses. None of them gave an accurate,
complete, and functional response, for the record.</p>

<p>The actual rewrite rules as of this writing follow, for humans that
actually like working answers provided by expert humans instead of
artificial intelligence which currently seem to be, glorified,
mansplaining interns.</p>

<h2 id="gittorprojectorg-rewrite-rules">git.torproject.org rewrite rules</h2>

<p>Those rules are relatively simple in that they rewrite a single URL to
its equivalent GitLab counterpart in a 1:1 fashion. It relies on the
<a href="https://archive.torproject.org/websites/gitolite2gitlab.txt">rewrite map</a> mentioned above, of course.</p>

<pre><code>RewriteEngine on
# this RewriteMap connects the gitweb projects to their GitLab
# equivalent
RewriteMap gitolite2gitlab "txt:/etc/apache2/gitolite2gitlab.txt"
# if this becomes a performance bottleneck, convert to a DBM map with:
#
#  $ httxt2dbm -i mapfile.txt -o mapfile.map
#
# and:
#
# RewriteMap mapname "dbm:/etc/apache/mapfile.map"
#
# according to reports lavamind found online, we hit such a
# performance bottleneck only around millions of entries, which is not our case

# those two rules can go away once all the projects are
# migrated to GitLab
#
# this matches the request URI so we can check the RewriteMap
# for a match next
#
# WARNING: this won't match URLs without .git in them, which
# *do* work now. one possibility would be to match the request
# URI (without query string!) with:
#
# /git/(.*)(.git)?/(((branches|hooks|info|objects/).*)|git-.*|upload-pack|receive-pack|HEAD|config|description)?.
#
# I haven't been able to figure out the actual structure of
# those URLs, so it's really hard to figure out the boundaries
# of the project name here. I stopped after pouring around the
# http-backend.c code in git
# itself. https://www.git-scm.com/docs/http-protocol is also
# kind of incomplete and unsatisfying.
RewriteCond %{REQUEST_URI} ^/(git/)?(.*).git/.*$
# this makes the RewriteRule match only if there's a match in
# the rewrite map
RewriteCond ${gitolite2gitlab:%2|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(git/)?(.*).git/(.*)$ https://gitlab.torproject.org/${gitolite2gitlab:$2}.git/$3 [R=302,L]

# Fallback everything else to GitLab
RewriteRule (.*) https://gitlab.torproject.org [R=302,L]
</code></pre>

<h2 id="gitwebtorprojectorg-rewrite-rules">gitweb.torproject.org rewrite rules</h2>

<p>Those are the vastly more complicated GitWeb to GitLab rewrite
rules.</p>

<p>Note that we say "GitWeb" but we were actually <em>not</em> running
<a href="https://git-scm.com/docs/gitweb">GitWeb</a> but <a href="https://git.zx2c4.com/cgit/">cgit</a>, as the former didn't actually scale for us.</p>

<pre><code>RewriteEngine on
# this RewriteMap connects the gitweb projects to their GitLab
# equivalent
RewriteMap gitolite2gitlab "txt:/etc/apache2/gitolite2gitlab.txt"

# special rule to process targets of the old spec.tpo site and
# bring them to the right redirect on the new spec.tpo site. that should turn, for example:
#
# https://gitweb.torproject.org/torspec.git/tree/address-spec.txt
#
# into:
#
# https://spec.torproject.org/address-spec
RewriteRule ^/torspec.git/tree/(.*).txt$ https://spec.torproject.org/$1 [R=302]

# list of endpoints taken from cgit's cmd.c

# those two RewriteCond are necessary because we don't move
# all repositories at once. once the migration is completed,
# they can be removed.
#
# and yes, they are copied all over the place below
#
# create a match for the project name to check if the project
# has been moved to GitLab
RewriteCond %{REQUEST_URI} ^/(.*).git(/.*)?$
# this makes the RewriteRule match only if there's a match in
# the rewrite map
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
# main project page, like summary below
RewriteRule ^/(.*).git/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/ [R=302,L]

# summary
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/summary/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/ [R=302,L]

# about
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/about/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/ [R=302,L]

# commit
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond "%{QUERY_STRING}" "(.*(?:^|&amp;))id=([^&amp;]*)(&amp;.*)?$"
RewriteRule ^/(.*).git/commit/? https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commit/%2 [R=302,L,QSD]
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/commit/? https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commits/HEAD [R=302,L]

# diff, incomplete because can diff arbitrary refs and files in cgit but not in GitLab, hard to parse
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond %{QUERY_STRING} id=([^&amp;]*)
RewriteRule ^/(.*).git/diff/? https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commit/%1 [R=302,L,QSD]

# patch
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond %{QUERY_STRING} id=([^&amp;]*)
RewriteRule ^/(.*).git/patch/? https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commit/%1.patch [R=302,L,QSD]

# rawdiff, incomplete because can show only one file diff, which GitLab cannot
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond %{QUERY_STRING} id=([^&amp;]*)
RewriteRule ^/(.*).git/rawdiff/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commit/%1.diff [R=302,L,QSD]

# log
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond %{QUERY_STRING} h=([^&amp;]*)
RewriteRule ^/(.*).git/log/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commits/%1 [R=302,L,QSD]
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/log/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commits/HEAD [R=302,L]
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/log(/?.*)$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commits/HEAD$2 [R=302,L]

# atom
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond %{QUERY_STRING} h=([^&amp;]*)
RewriteRule ^/(.*).git/atom/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commits/%1 [R=302,L,QSD]
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/atom/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/commits/HEAD [R=302,L,QSD]

# refs, incomplete because two pages in GitLab, defaulting to "tags"
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/refs/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/tags [R=302,L]
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond %{QUERY_STRING} h=([^&amp;]*)
RewriteRule ^/(.*).git/tag/? https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/tags/%1 [R=302,L,QSD]

# tree
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond %{QUERY_STRING} id=([^&amp;]*)
RewriteRule ^/(.*).git/tree(/?.*)$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/tree/%1$2 [R=302,L,QSD]
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/tree(/?.*)$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/tree/HEAD$2 [R=302,L]

# /-/tree has no good default in GitLab, revert to HEAD which is a good
# approximation (we can't assume "master" here anymore)
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/tree/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/tree/HEAD [R=302,L]

# plain
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteCond %{QUERY_STRING} h=([^&amp;]*)
RewriteRule ^/(.*).git/plain(/?.*)$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/raw/%1$2 [R=302,L,QSD]
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/plain(/?.*)$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/raw/HEAD$2 [R=302,L]

# blame: disabled
#RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
#RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
#RewriteCond %{QUERY_STRING} h=([^&amp;]*)
#RewriteRule ^/(.*).git/blame(/?.*)$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/blame/%1$2 [R=302,L,QSD]
# same default as tree above
#RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
#RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
#RewriteRule ^/(.*).git/blame(/?.*)$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/blame/HEAD/$2 [R=302,L]

# stats
RewriteCond %{REQUEST_URI} ^/(.*).git/.*$
RewriteCond ${gitolite2gitlab:%1|NOT_FOUND} !NOT_FOUND
RewriteRule ^/(.*).git/stats/?$ https://gitlab.torproject.org/${gitolite2gitlab:$1}/-/graphs/HEAD [R=302,L]

# still TODO:
# repolist: once migration is complete
#
# cannot be done:
# atom: needs a feed token, user must be logged in
# blob: no direct equivalent
# info: not working on main cgit website?
# ls_cache: not working, irrelevant?
# objects: undocumented?
# snapshot: pattern too hard to match on cgit's side

# special case, we keep a copy of the main index on the archive
RewriteRule ^/?$ https://archive.torproject.org/websites/gitweb.torproject.org.html [R=302,L]
# Fallback: everything else to GitLab
RewriteRule .* https://gitlab.torproject.org [R=302,L]
</code></pre>

<p>The reference copy of those is available in our (currently private)
Puppet git repository.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on May 01, 2024 02:55 PM UTC by
            <a href="https://anarc.at/tag/python-planet/index.rss" class="link link-hover text-primary"
              >Anarcat</a
            >
          </div>
          <a
            href="https://anarc.at/blog/2024-05-01-gitolite-gitlab-migration/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://getnikola.com/blog/nikola-v831-is-out.html" class="hover:underline"
              >Nikola v8.3.1 is out!</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>On behalf of the Nikola team, I am pleased to announce the immediate
availability of Nikola v8.3.1. This release fixes some small bugs,
including some introduced by the new Nikola Plugin Manager.</p>
<p>The minimum Python version supported is now 3.8, and we have adopted
a formal policy to define the Python versions supported by Nikola.</p>
<section id="what-is-nikola">
<h2>What is Nikola?</h2>
<p>Nikola is a static site and blog generator, written in Python.
It can use Mako and Jinja2 templates, and input in many popular markup
formats, such as reStructuredText and Markdown — and can even turn
Jupyter Notebooks into blog posts! It also supports image galleries,
and is multilingual. Nikola is flexible, and page builds are extremely
fast, courtesy of doit (which is rebuilding only what has been changed).</p>
<p>Find out more at the website: <a class="reference external" href="https://getnikola.com/">https://getnikola.com/</a></p>
</section>
<section id="downloads">
<h2>Downloads</h2>
<p>Install using <code class="docutils literal">pip install Nikola</code>.</p>
</section>
<section id="changes">
<h2>Changes</h2>
<section id="features">
<h3>Features</h3>
<ul class="simple">
<li><p>Support passing <code class="docutils literal"><span class="pre">--poll</span></code> to <code class="docutils literal">nikola auto</code> to better deal with symlink farms.</p></li>
</ul>
</section>
<section id="bugfixes">
<h3>Bugfixes</h3>
<ul class="simple">
<li><p>Remove insecure HTTP fallback from <code class="docutils literal">nikola plugin</code></p></li>
<li><p>Fix the <code class="docutils literal">nikola plugin</code> command not working (Issue #3736, #3737)</p></li>
<li><p>Fix <code class="docutils literal">nikola new_post <span class="pre">--available-formats</span></code> crashing with TypeError
(Issue #3750)</p></li>
<li><p>Fix the new plugin manager not loading plugins if the plugin folder is a symlink (Issue #3741)</p></li>
<li><p>Fix the <code class="docutils literal">nikola plugin</code> command not working (Issue #3736)</p></li>
<li><p>Remove no longer used leftovers of annotations support (Issue #3764)</p></li>
</ul>
</section>
<section id="other">
<h3>Other</h3>
<ul class="simple">
<li><p>Nikola now requires Python 3.8 or newer.</p></li>
<li><p>Nikola has adopted a policy for Python version support,
promising support for versions supported by the Python core team,
Ubuntu LTS, or Debian stable, and taking into consideration
Debian oldstable and PyPy.</p></li>
<li><p>Remove polyfill from <code class="docutils literal">polyfill.io</code>.</p></li>
</ul>
</section>
</section>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 29, 2024 12:11 PM UTC by
            <a href="http://feeds.feedburner.com/getnikola/QBjz" class="link link-hover text-primary"
              >Nikola</a
            >
          </div>
          <a
            href="https://getnikola.com/blog/nikola-v831-is-out.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="http://edcrewe.blogspot.com/2024/04/software-engineering-hiring-and-firing.html" class="hover:underline"
              >Software Engineering Hiring and Firing</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p><span style="font-family: helvetica;"></span></p><div class="separator" style="clear: both; text-align: center;"><div class="separator" style="clear: both; text-align: center;"><a href="https://blogger.googleusercontent.com/img/a/AVvXsEikCt9EJC8KAzfwBjL8Uws8KufNICJKjLI0LcrcKA9u6V0O7BkIK9JqexdIBe_Vxz1JPABOPMrU8gPpPvxApyODg4g4loVz1UkxQnuF1zO-txQ7ku4i-1mhWoQrsqH4m_K69b5mhsPicaamTPUl3Iue0HZjyGZOgziRPFsrcvNH1BU9ViMsIfALQXaWH-tX" style="margin-left: 1em; margin-right: 1em;"><span style="font-size: medium;"><img src="https://blogger.googleusercontent.com/img/a/AVvXsEikCt9EJC8KAzfwBjL8Uws8KufNICJKjLI0LcrcKA9u6V0O7BkIK9JqexdIBe_Vxz1JPABOPMrU8gPpPvxApyODg4g4loVz1UkxQnuF1zO-txQ7ku4i-1mhWoQrsqH4m_K69b5mhsPicaamTPUl3Iue0HZjyGZOgziRPFsrcvNH1BU9ViMsIfALQXaWH-tX=s16000" /></span></a></div><span style="font-size: medium;"><br /><br /></span></div><p><span style="font-family: helvetica; font-size: medium;">The jump in interest rates to the highest level in over 20 years that hit in summer 2023 for the US, UK and many other countries is still impacting the Software industry. Rates may be due to drop soon, but currently it has choked off investment, upped borrowing costs and lead to many software companies making engineers redundant to please the markets.&nbsp;</span></p><p><span style="font-family: helvetica; font-size: medium;">For the UK the estimate is around 8% of software industry jobs made redundant. Although strangely, the overall trend in vacancies for software engineers continues to march upwards, the initial surge after the pandemic dipped last summer but has now recovered.<br />But if you work in the industry you are bound to have colleagues and friends who have been made redundant, if you are lucky enough to have not been impacted personally.</span></p><p><span style="font-family: helvetica; font-size: medium;">Given recent history, I thought it may be worth reflecting on my personal experience of the whole hiring and firing process, in the tech industry. It is a UK centric view, but the companies I have worked for in the last 8 years are US software companies.</span></p><p><span style="font-family: helvetica; font-size: medium;">I have been fired, hired and conducted technical interviews to hire others. Giving me a few different perspectives.&nbsp;</span></p><h3 style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">This post is NOT about getting your first Software job</span></h3><p><span style="font-family: helvetica; font-size: medium;">I first got a coding job in the public sector and it was as a self taught web developer in the 1990s, before web development was a thing you could get a degree in. So I initially got a&nbsp; job in IT support, volunteered to act up (ie no pay increase) and built some websites that were needed, then became a full time web developer through a portfolio of work, ie sites.&nbsp;</span></p><p><span style="font-family: helvetica; font-size: medium;">Today junior developers may have to prove themselves suitable by artificial measures. I skipped these, so I do not have any professional certifications, or any to recommend. I also don't know how to ace coding algorithm or personality profile assessments.</span></p><div><span style="font-family: helvetica; font-size: medium;">Once you are 5-10 years in to a software career - none of those approaches are used for hiring decisions.&nbsp;</span></div><p><span style="font-family: helvetica; font-size: medium;">Only large companies are likely to subject you to them, and that is really out of fairness on the juniors who have to go through them, and to screen out dodgy applicants. Screening just needs to be passed, it will not have any input into whether you get the job. Hence Acing the coding interview as promoted by sites such as <a href="https://leetcode.com">LeetCode</a> is not even a thing, only passing coding exercise systems in order to start, or switch to, a career as a developer. I would recommend starting an open source project instead, to demonstrate you can actually code.</span></p><p><span style="font-family: helvetica; font-size: medium;">The majority of small to medium software companies and of job vacancies require&nbsp;experience and in effect have no vacancies for the most junior software grades with less than 3 years under their belt. So they tend not to use any of these filtering methods. They just want to see proof that you are already a developer, and usually base that on face to face interviews and examples of your code you provide them. So much like how I was originally hired back in the 1990s.</span></p><p><span style="font-family: helvetica; font-size: medium;">I have only been subject to a LeetCode style test once, which was for a generic job application, ie hiring for numbers of SREs of various seniority, for a FANNG.<br /></span></p><p><span style="font-family: helvetica; font-size: medium;"><br /></span></p><h1 style="text-align: left;"><span style="background-color: #fff2cc;"><span style="color: #cc0000; font-family: helvetica; font-size: x-large;">&nbsp;F&nbsp;</span><span style="font-family: helvetica; font-size: x-large;">I R E D&nbsp;</span></span></h1><div style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">When you get that unexpected one to one Zoom call with you manager appear in your calendar these days, it is unlikely to be great news 😓</span></div><div style="text-align: left;"><span style="font-family: helvetica; font-size: medium;"><br />In the majority of cases the firing process, or to be more polite, redundancy, is all about balancing the finances of the whole company or institution. As such it is very unlikely to be about you.</span></div><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">Of course people are also fired as individuals for various reasons, one of which is actually not being any good at their job, failing to get along with their manager, being a bad culture fit, jobs turning out not to be what was advertised, or expressing political views. Since unlike where I once worked, in the UK Education sector, where 50% of staff are union members, US software companies will have less than 1% membership, so don't tend to respond well to dissent.</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">Mostly this happens via failing probation, at around 15%&nbsp; then maybe another 5% annually for disciplinary / performance improvement failure.<br /><br />If you want to try getting individually fired then go the <a href="https://overemployed.com/">overemployed</a> route. Get two or three jobs at once and test how long it takes before the company notices you giving 110% is now only 40% and fire you. The rule of thumb is the larger the company, the longer it takes!</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">But this post's focus isn't about individual firing, its about organizational hiring and firing. <br /><b><br /><span>Firing Reasons</span></b></span></p><p style="text-align: left;"></p><ol style="text-align: left;"><li><span style="font-family: helvetica; font-size: medium;">A company may be doing badly in a slow long term way, so it has to chop as part of a restructure and downsize to attempt to fix that.</span></li><li><span style="font-family: helvetica; font-size: medium;">Alternatively the company could be doing really well. So it gets the attention of a big investment company and is bought up and merged with its rival. To fix overlap and justify the merger&nbsp;- both companies lose 20% of staff.</span></li><li><span style="font-family: helvetica; font-size: medium;">Maybe it needs to pivot towards a new area (currently likely to be AI) and so chop 20% of its staff so it can hire 15% experienced, and pricey, AI developers.</span></li><li><span style="font-family: helvetica; font-size: medium;">Or it may just have had a one off external impacting event that hit it financially. So to balance the earnings for that year and keep its share price good, it chops a bunch of staff. It will rehire next year, when it suits the balance sheet. This is the example in which I was made redundant along with 5% of staff, it was a big company, so that was a few thousand people globally.</span></li><li><span style="font-family: helvetica; font-size: medium;">Finally it may be an industry wide phenomenon as it is with the current redundancies in the software industry. A world clamp down on easy cheap loans means investment company driven industries such as tech. are no longer awash with spare cash. Cut backs look good right now, and keep the share price high.<br />Hence redundancies that are nothing to do with the industry itself or its future prospects.</span></li></ol><p style="text-align: left;"></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">That is mirrored in who is fired. Companies do not keep a log book of gold stars and black marks against each employee. They do not use organizational triggered rounds of redundancies to select individuals to fire. They certainly have not got the capability to accurately determine all the best employees and only fire the worst ones. You will be fired based on what part of the organization you are in, how much it is valued in the current strategy and how much you cost vs others who could do your job. If you are currently between teams / or in a new team or role which has yet to establish itself, when the music stops - like musical chairs, bad luck you are out.</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">The only personal element may be if a whole team is seen as under performing or difficult to manage it might be axed. No matter that it contains a star performer. Decisions may also be geographic. Lets axe the Greek office, save by withdrawing engineering from a country, which is again how I was made redundant, the rest of my team was in Greece. <br />Alternatively it may be, fire under 20 staff from each country, to avoid more burdensome regulation for bulk layoffs.</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">The organization could create an insecure / downturn atmosphere to encourage staff to leave. Because its a lot cheaper for people to leave than the company paying out redundancy settlements.<br /></span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;"><b>Redundancy keeps the average employees 😐</b></span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">As a result in response to significant redundancies an organisation will tend to lose more of the best employees - since they are the most able to move, the most likely to get a big pay rise if they move and the least likely to want to stick around if they see negative organisational change.&nbsp; The software industry has very high staff turnover at almost 20%. Out weighing any nominal idea of removing less efficient staff.&nbsp;</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">If a company handles things well it may only lose a representative productivity range of staff from best to worst. But a bulk redundancy process is likely to lead to the biggest loss in the top talent, get rid of slightly more of the bottom dwellers and so result in maximising the mediocre!<br /><br />In summary the answer to <b>'Why me?'</b> in group redundancies is&nbsp;<b>"because you were there"</b>&nbsp;... and you didn't have a personal friendship with the CEO 😉. Of course that is why new CEOs are often brought in to restructure - the first step of which is to take an axe to the current C-suite.&nbsp;</span></p><p style="text-align: left;"><span style="font-size: medium;"><span style="font-family: helvetica;">Some of the best software engineers I have worked with have been made redundant at some point in their career. Group redundancies are not about you or how well you do your job. But taking it personally and&nbsp;</span><span style="font-family: helvetica;">challenging the messenger, with why me?, as demonstrated by <a href="https://eu.usatoday.com/story/life/health-wellness/2024/02/02/tiktok-videos-laid-off-workplace-trauma-viral/72439137007/">recent viral videos</a>, is an understandable emotional response to rejection, and the misguided belief that work aims to be some form of meritocracy, in the same way college might.</span></span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;"><b>LIFO and FIFO</b></span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">LIFO rather than FIFO is the norm in Firing. New hires are less likely to have established themselves as essential to the company, and have less personal connections within it. More importantly many countries redundancy legislation doesn't kick in until over 2 years of employment and the longer you have been employed the more the company will have to pay to terminate you.<br /><br />Which means a new hire who has uprooted for their new tech job, will be the most likely to find themselves losing that job when bulk redundancies hit.<br />But FIFO has its place, next would be older engineers. Some companies don't even hire hands on engineers much over the age of 40, anyway. But staff near retirement have at most only a few years left to contribute and may cost more for the same grade. So encouraging early retirement can be part of the bulk redundancy process.</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;"><b>Prejudicial</b> <b>Firing</b></span></p><p style="text-align: left;"><span style="font-size: medium;"><span style="font-family: helvetica;">Whilst redundancy is all about costs and not about your personal performance. That is not to say companies who pass the redundancy choices down to junior managers may not end up with firing disproportionate numbers of workers who are not from the same background as their manager, ie white USA males, ideally younger than the manager. But prejudice is not personal either. That is pretty much what defines it as&nbsp;</span><span style="font-family: helvetica;">prejudice, a pre-judgement of people based on physical characteristics rather than their ability at the job. Also people are least likely to fire staff that they have the most in common with, resulting in prejudicial firing.&nbsp;<br />Unfortunately it seems many companies with a good diversity policy for hiring, may not have <a href="https://www.axios.com/2023/07/06/tech-layoffs-2023-female-workers">adequate ones for firing</a>. Again resulting in losing more of the higher performing staff.</span></span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">I have heard of a case where someone got a new manager, who on joining was told to cut from his team, so he fired everyone outside the USA. The worker was so keen to stay at their current employer they went over the head of their manager to senior management and asked for their redundancy to be repealed. Since they had been at the company many years and personally knew senior management, this worked. <br />Alternatively a more purely cost based restructure may hire all developers from cheaper countries and fire most of them in the US. As happened with <a href="https://techcrunch.com/2024/04/29/google-lays-off-staff-from-flutter-dart-python-weeks-before-its-developer-conference/">Google's Python team recently</a>.</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;"><b>Fight for your job?</b></span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">The company may set up a pool process for bulk redundancies if numbers are high enough per country, where you can fight for a place on the lifeboat of remaining positions.&nbsp;<br /><br />In both cases I would recommend that you don't waste time on a company that doesn't value you. If you do stay you risk, dealing with the bulk redundancy aftermath. Which will be present unless the redundancies were for a pivot (3) or one off event (4). <br />An increased workload, pay freezes, no bonus, needing to over work to justify being kept on, plus a negative work atmosphere.<br /><br />In a case where I stayed after the department I was in was axed, I had to reapply for a new job which was moved to a different division. The work was less worthwhile and at the time, the employment of in-house software developers as a whole, was questioned as being unnecessary for the organisation. I outstayed my welcome for 18 months of legacy commercial software support, before getting the message and quitting. <br /><br />Lesson learnt, if you must ask to to stay in your company, via senior management, a pool or reapplication. Make sure you look around and apply for other jobs outside of it at the same time.<br /></span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">You also miss out on a minimum of a couple of months tax free pay as a settlement.</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">On the other hand, if the redundancy round is for a more minor pivot, and you are happy in the role, it may be well worth staying around to see how things pan out.</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;">Of course you may get no choice in the matter, in which case, get straight into <b><span style="color: #6aa84f;">GET HIRED</span></b> mode, and start the job search. If you can manage it fast enough, you will benefit financially from the whole process. Although if the reason is (5) a sector wide reduction, then it will be take longer and be harder to obtain the usual 20% pay increase that a new position can offer.</span></p><p style="text-align: left;"><span style="font-family: helvetica; font-size: medium;"><br /></span></p><p></p><h2 style="text-align: left;"><span style="background-color: #fff2cc;"><span style="color: #6aa84f; font-family: helvetica; font-size: x-large;">&nbsp;H&nbsp;</span><span style="font-family: helvetica; font-size: x-large;">I R E D&nbsp;</span></span></h2><div><span style="font-family: helvetica; font-size: medium;"><b>Why change jobs (aside from being fired!)</b></span></div><div><span style="font-family: helvetica; font-size: medium;"><br /></span></div><div><ul style="text-align: left;"><li><span style="font-family: helvetica; font-size: medium;">It is a lot easier to get a pay rise or promotion by changing companies, than being promoted internally. To fast track your career to a principal or architect top IC role. Or just get a pay rise.</span></li><li><span style="font-family: helvetica; font-size: medium;">Changing jobs gives you much wider experience, of different technology, approaches and cultures. Making you a better engineer.</span></li><li><span style="font-family: helvetica; font-size: medium;">If you have been in your current job over 10 years without significant internal promotions or changes of role then it is detrimental to your CV, indicating you are stuck in a rut and unable to handle change, eg. new technology.</span></li><li><span style="font-family: helvetica; font-size: medium;">You want to shift sectors.<br />I changed from public sector web developer, to commercial cloud engineer with one move.</span></li><li><span style="font-family: helvetica; font-size: medium;">You want to get into new technology that is not used in your current role.<br />I changed from a Python, Ruby config management automation engineer to a Kubernetes Golang engineer with another.</span></li><li><span style="font-family: helvetica; font-size: medium;">You want to change your role in tech, or leave it entirely. For example get out of sales as a solution architect and back into a more technical role as an&nbsp;SRE.</span></li></ul></div><div><span style="font-family: helvetica; font-size: medium;">On that basis many software engineers change jobs every 2 or 3 years for part of their careers. Its expected, the average engineer in a FAANG stays less than 3 years.</span></div><div><span style="font-family: helvetica; font-size: medium;"><br />Of course you probably need to be in a job for at least 2 years to fully master it.<br />If your CV has loads of similar positions where you barely make it past the probation period, its marking you out as a failure at those roles == Fail hiring at the first step, the HR CV check.</span></div><div><span style="font-family: helvetica; font-size: medium;"><br /></span></div><div><span style="font-family: helvetica; font-size: medium;"><b>Upskilling</b></span></div><div><span style="font-family: helvetica; font-size: medium;"><br /></span></div><div><span style="font-family: helvetica; font-size: medium;">The other problem is that changing jobs to change roles, even if its just to use a new language or framework can be blocked by roles requiring experience in that area on the CV to get interviewed for the job in the first place. For software engineering that is less of an issue. Since tech changes faster than any other sector. <br />You just need to prove you have a range of experience and software languages and are willing to learn, early in a technology boom. To catch the cloud engineer bus, I got a job in it in 2016. The US cloud sector was $8 billion back then. It is $600 billion now. Similarly to get on board with Golang and Kubernetes in 2019. In the first few years of a tech boom most companies will initially have to cross train engineers without direct experience. The corollary of that is that in the current downturn attempting to pivot to an established technology, which k8s has become, is going to be much harder.<br /></span></div><div><span style="font-family: helvetica; font-size: medium;"><br /></span></div><div><span style="font-family: helvetica; font-size: medium;"><b>Market rates</b></span></div><div><span style="font-family: helvetica; font-size: medium;"><br /></span></div><div><span style="font-family: helvetica; font-size: medium;">Clearly ML ops and AI data science are current booming areas. The demand so far outstrips current supply that for switching to a more junior Python AI role in them may pay as well as a senior Django web developer for example. <br /><br />So around £60k for a junior role, but in 3-4 years it should jump to at least £100k for a senior AI engineer. Of course for US salaries add 30%, plus usually free medical, life insurance etc. The lower tax rates cancels out the higher cost of living in the US ... so its UK salary +30% in real terms*. Researching the going rate for the particular role, technical skills and sector you are applying for is a necessary part of the hiring process. In order that you don't let recruitment bargain you down too low.<br /><br />* </span><span style="font-family: helvetica;">Note that geographic software pay differences are why you often come across engineers of other nationalities emigrating to, and working in the higher paying countries, USA, Canada and Australia. I have worked with many people from the UK and Europe who live in the USA, and Indians who live there or Europe, for example.<br />Of course as a cheap foreign worker myself, I too stick with US companies partly because they pay rather more than UK ones, even if a lot lower than what I would get if I moved there 😉<br /><br /><span style="font-size: medium;">Now is the time when such a switch will be easier to accomplish without having to work nights doing courses, certifications and personal projects. The usual means of demonstrating your ability without any work experience.</span></span></div><div><span style="font-family: helvetica;"><span style="font-size: medium;"><br /></span></span></div><div><span style="font-family: helvetica;"><span style="font-size: medium;">The caveat here is that moving jobs in a down turn, as we are arguably experiencing currently, can depress the market salary rates and if you are already at the top of those when made redundant, can mean you have to take a pay cut for a year or two rather than face the cost of long term unemployment.</span></span></div><div><span style="font-family: helvetica; font-size: medium;"><br /></span></div><div><span><span style="font-family: helvetica; font-size: medium;"><b>The hiring process for an experienced software engineer role</b></span></span></div><span id="docs-internal-guid-3d70bd13-7fff-f539-8303-cc086d22a419"><span style="font-family: helvetica; font-size: medium;"><div style="line-height: 1.38; margin-bottom: 6pt; margin-top: 18pt;"><span><span style="font-weight: 400; vertical-align: baseline;">Interview to Offer should take a month.<br /></span></span><span><span style="font-weight: 400; vertical-align: baseline;"> <br /></span></span><span><span style="font-weight: 400; vertical-align: baseline;">If not then the recruitment is likely for a group of roles in an expansion process and from screening and CV, you are not one of the top candidates. You may waiting on the backlog of potential interviewees for a couple of extra months before it properly kicks off. <br /></span></span><span><span style="font-weight: 400; vertical-align: baseline;">Or you are told the post is no longer available, sorry! <br /></span></span><span><span style="font-weight: 400; vertical-align: baseline;">Even if you would eventually get a post it may stretch your redundancy settlement. Therefore I would not bother pursuing any application process that is looking to be stretching on past 6 weeks.</span></span><span><span style="font-weight: 400; vertical-align: baseline;"><br /></span></span><span><span style="font-weight: 400; vertical-align: baseline;">Start date will be 5 weeks from contract (partly to cater for notice, referee and compliance checks etc)</span></span></div><br /><p dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="background-color: #d9ead3; vertical-align: baseline;">That makes it 2 months minimum from applying for a role to starting.</span></p><p dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="vertical-align: baseline;"><br /></span></p><span style="vertical-align: baseline;">The process will consist of a technical assessment  task and at least 3 interviews, screening, manager and technical. </span><span style="vertical-align: baseline;"><br /></span><span style="vertical-align: baseline;">With another for introduction to team mates / office etc. which is unlikely to have any effect on the hiring decision unless you and your potential new manager take an instant personal dislike to each other.</span></span></span><div><span><span style="font-family: helvetica; font-size: medium;"><br /></span></span></div><div><span><span style="font-family: helvetica;"><span style="font-size: medium;">The HR screening interview, just checks you are a genuine candidate for the job.</span></span></span></div><div><span><span style="font-family: helvetica;"><span style="font-size: medium;">The Manager interview similarly is more about checking you will fit in with the company and team, plus that you have basic personal communication skills.</span></span></span></div><div><span><span style="font-family: helvetica;"><span style="font-size: medium;"><br /></span></span></span></div><div><span><span style="font-family: helvetica;"><span style="font-size: medium;"><b>The Technical Interview is what matters</b></span></span></span></div><div><span><span style="font-family: helvetica; font-size: medium;"><br /></span></span><div><span><span style="font-family: helvetica; font-size: medium;">Passing the technical interview is what really decides whether you will get a job offer.
Sometimes the tech interview may be split into two, one more task and questionnaire based and the other more discussion. Often the initial task part will be given as WFH.<br /></span></span><p></p><p><span style="font-family: helvetica; font-size: medium;">The technical interview will consist of technical questions to explore whether you have the knowledge and experience required, plus some thing to confirm you can write code and discuss that code, for a developer or SRE role.&nbsp;For the former it would likely be application code whilst for the latter automation code. <br />For a more purely system administration / IT support role it will involve specifying your processes for resolving issues.</span></p><p><span style="font-family: helvetica; font-size: medium;">If you are unlucky and it is an in person interview, you may have to whiteboard pseudo code live in response to a changing task described to you on the spot. Although I have only had that once. More common, especially for hybrid / remote roles, is the take away task. To be completed in a 'few hours' at most.</span></p><p><span style="font-family: helvetica; font-size: medium;">It is possible that either of the above could be replaced by another source for your code. Talking through one of your open source packages, if you have any. Or talking through one or two longer automated coding exercise assessed tasks. I have never come across either of these though.</span></p><p><span style="font-family: helvetica; font-size: medium;">The main point is that the core of any technical interview for a developer related role will involve talking through code you have written, as a kicking off point to check your understanding of the code, how it could be improved, how you would tackle scaling, or a new exemplar functional requirement. Its faults and features.</span></p><p><span style="font-family: helvetica; font-size: medium;">You will be asked to talk through past code or technical work in a more generic manner in response to standard questions along the lines of examples of your past work that show how you fit the job.&nbsp;</span></p><p><b><span style="font-family: helvetica; font-size: medium;">Preparing for the Technical Interview</span></b></p><p><span style="font-family: helvetica; font-size: medium;">It doesn't take much to work out that a 20% pay rise is worth, a day's worth of work a week.<br />Assuming you stay in your new job for 2 or 3 years - that is equivalent to 6 months pay.<br />On that basis even doing <b>a week of work to apply</b> to, and prepare for a&nbsp;single job is still very well worth it, if you get the job.</span></p><p><span style="font-family: helvetica; font-size: medium;">Adopting a scatter gun approach, ie applying with a generic CV and covering letter to 10 or more jobs, is a waste of time in my view. If you need a new job, then it should be one you are genuinely interested in and research. That means probably you should only have a maximum of 3 tailored applications on the go at once. Even when I was made redundant (and about to get married) I think I limited myself to 4 job applications in total, with one primary one that thankfully I did end up getting.</span></p><p><span style="font-family: helvetica; font-size: medium;">There are many sites that can advise how best to do that, based on the framework that your hiring will be decided upon I have outlined above. I think preparing some <a href="https://thehiredguns.com/car-technique-secret-interviewing-weapon/">Challenge Action Result</a> stories targeted at the details of the new employer is useful. Plus spending a day or so refining that '2 hours'&nbsp; development task. Researching the company and preparing specific questions and perhaps suggestions for your interviewers.</span></p><p><span style="font-family: helvetica; font-size: medium;"><b>Being a Technical Interviewer</b></span></p><p><span style="font-family: helvetica; font-size: medium;">From the other side of the table, clearly candidates need to show sufficient competency for the post. They may show it, but only within a totally different technical stack. Smaller companies tend to have less capacity and time to get people up to speed with new tech. So will likely fail these candidates even though they are capable of doing the job eventually.<br />The technical interviewers will tend to pair on the assessment - to improve its consistency. Swapping partners for interviews regularly also helps.</span></p><p><span style="font-family: helvetica; font-size: medium;">The assessment process is likely to use some online system such as Jobvite or Greenhouse where each interviewer assesses the candidate. Finally summarising it all with a recommendation for strong pass, pass or fail. Sometimes for a specific post and grade, otherwise the assessment can include a grade recommendation. The manager then rubber stamps that assuming appropriate funding is available. HR's job is to beat the candidate down to the lowest reasonable price, without going so low the candidate walks away. <br /><br />A healthy growing company will tend to have a rolling recruitment process as they expect to be increasing head count in proportion to customers and revenue. On that basis they will likely be aiming to recruit anyone with a good pass, plus maybe most of the passes too.<br /><br />Given that engineering jobs are highly specialised and require relevant experience I have not seen cases of way more interviewees than jobs. Currently, even with all the redundancies, there is still an under supply of engineers. <br />Also the approach for HR will be to set experience and skills pre-requisites for the roles that will keep the numbers down for those who make it to technical interview to around double the number of vacancies. Since it takes out a day of work for each interviewing engineer, to prep, interview and assess.</span></p><p><span style="font-family: helvetica; font-size: medium;"><b>HIRING SUMMARY</b><br /><br />You must pass each of the first 5 or 6 steps to get to the next one and get the job.</span></p><p></p><ol style="text-align: left;"><li><span style="font-family: helvetica; font-size: medium;">HR check written application is a plausible candidate</span></li><li><span style="color: #666666; font-family: helvetica; font-size: medium;">FAANG sized company - automated quiz / Leetcode style challenge - to reduce the numbers - because they get way more speculative applicants.</span></li><li><span style="font-family: helvetica; font-size: medium;">Recruiter chat to check candidate is genuine and available</span></li><li><span style="font-family: helvetica; font-size: medium;">CV skills / experience check vs other applicants to shortlist those worth interviewing</span></li><li><span style="font-family: helvetica; font-size: medium;">Technical task could be takeaway or whiteboard / questionairre interview</span></li><li><span style="font-family: helvetica; font-size: medium;">Technical interview, in person or Zoom with engineers<br /><br /></span></li><li><span style="font-family: helvetica; font-size: medium;">Manager interview / introduction to team mates.&nbsp;</span></li><li><span style="font-family: helvetica; font-size: medium;">Recruiter chat. Negotiate exact salary. Agree start date.</span></li><li><span style="font-family: helvetica; font-size: medium;">Contract is signed, <b><span style="color: #6aa84f;">YOU ARE HIRED</span></b>.</span></li></ol><p></p><p><span style="font-family: helvetica; font-size: medium;"><br /><br /></span></p><p><span style="font-family: helvetica; font-size: medium;"><br /><br /></span></p><p><br /></p></div></div>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 27, 2024 09:41 AM UTC by
            <a href="http://edcrewe.blogspot.com/feeds/posts/default/-/python" class="link link-hover text-primary"
              >Ed Crewe</a
            >
          </div>
          <a
            href="http://edcrewe.blogspot.com/2024/04/software-engineering-hiring-and-firing.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.dataschool.io/machine-learning-data-leakage/" class="hover:underline"
              >How to prevent data leakage in pandas & scikit-learn ☔</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            What is data leakage, why is it problematic, and how can you prevent it when working on a supervised Machine Learning problem in Python?
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 25, 2024 02:51 PM UTC by
            <a href="https://www.dataschool.io/tag/python/rss/" class="link link-hover text-primary"
              >Data School</a
            >
          </div>
          <a
            href="https://www.dataschool.io/machine-learning-data-leakage/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="http://paddy3118.blogspot.com/2024/04/searching-oeis-tables.html" class="hover:underline"
              >Searching OEIS tables</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>&nbsp;

<img alt="a Jamaican showing how to search a table by row in the Jamaican hills. Image 4 of 4" class="mimg" height="400" src="https://th.bing.com/th/id/OIG1.MbwF4SrjKTsGDYT0Oj2X?w=173&amp;h=173&amp;c=6&amp;r=0&amp;o=5&amp;pid=ImgGn" width="400" />

</p><p>&nbsp;A few months ago I<a href="https://paddy3118.blogspot.com/2023/08/the-godeh-series-python-and-oeis.html#:~:text=or%20its%20dual.-,oeis%20entry%3F,-It%20seems%20that" rel="nofollow" target="_blank"> submitted a series to OEIS* </a>that was accepted; yes, but OEIS does not seem to leave my series searchable!</p><p>*OEIS is the Online Encyclopedia of&nbsp; Integer Series. <span style="font-size: x-small;">I guess table is not in the name, but...</span><br /></p><p><b><span style="color: #2b00fe; font-size: x-small;">(best viewed on larger than a portrait phone) </span></b><br /></p><h3 style="text-align: left;">Let me explain.</h3><p>The documentation for OEIS, <a href="https://oeis.org/eishelp2.html#:~:text=tabl%3A%20a%20regular%20triangle%20of%20numbers%20(one%20in%20which%20the%20n-th%20row%20contains%20n%20terms)%20made%20into%20a%20sequence%20by%20reading%20it%20by%20rows%3B%20or%20an%20infinite%20square%20array" rel="nofollow" target="_blank">explains </a>that if you have a 2D triangle or table of values rather than a one dimensional strict series, then one should antidiagonalise the data and submit the series produced.</p><p>They give as an example <a href="https://oeis.org/A003987" target="_blank">A003987 </a>. This gives this table:</p><div><div><span style="color: #ce9178;">Table begins</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;0, &nbsp;1, &nbsp;2, &nbsp;3, &nbsp;4, &nbsp;5, &nbsp;6, &nbsp;7, &nbsp;8, &nbsp;9, 10, 11, 12, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;1, &nbsp;0, &nbsp;3, &nbsp;2, &nbsp;5, &nbsp;4, &nbsp;7, &nbsp;6, &nbsp;9, &nbsp;8, 11, 10, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;2, &nbsp;3, &nbsp;0, &nbsp;1, &nbsp;6, &nbsp;7, &nbsp;4, &nbsp;5, 10, 11, &nbsp;8, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;3, &nbsp;2, &nbsp;1, &nbsp;0, &nbsp;7, &nbsp;6, &nbsp;5, &nbsp;4, 11, 10, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;4, &nbsp;5, &nbsp;6, &nbsp;7, &nbsp;0, &nbsp;1, &nbsp;2, &nbsp;3, 12, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;5, &nbsp;4, &nbsp;7, &nbsp;6, &nbsp;1, &nbsp;0, &nbsp;3, &nbsp;2, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;6, &nbsp;7, &nbsp;4, &nbsp;5, &nbsp;2, &nbsp;3, &nbsp;0, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;7, &nbsp;6, &nbsp;5, &nbsp;4, &nbsp;3, &nbsp;2, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;8, &nbsp;9, 10, 11, 12, ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp;9, &nbsp;8, 11, 10, ...</span></div><div><span style="color: #ce9178;">&nbsp; 10, 11, &nbsp;8, ...</span></div><div><span style="color: #ce9178;">&nbsp; 11, 10, ...</span></div><div><span style="color: #ce9178;">&nbsp; 12, ...</span></div><div><span style="color: #ce9178;">&nbsp; ...</span></div></div><p></p><p>The above gets antidiagonalised to the series beginning:</p><div><div><span style="color: #ce9178;">&nbsp; 0, 1, 1, 2, 0, 2, 3, 3, 3, 3, 4, 2, 0, 2, 4, 5, 5, 1, 1, 5, 5, 6, 4,</span></div><div><span style="color: #ce9178;">&nbsp; 6, 0, 6, 4, 6, 7, 7, 7, 7, 7, 7, 7, 7, 8, 6, 4, 6, 0, 6, 4, 6, 8, 9,</span></div><div><span style="color: #ce9178;">&nbsp; 9, 5, 5, 1, 1, 5, 5, 9, 9, 10, 8, 10, 4, 2, 0, 2, 4, 10, 8, 10, 11,</span></div><div><span style="color: #ce9178;">&nbsp; 11, 11, 11, 3, 3, 3, 3, 11, 11, 11, 11, 12, 10, 8, 10, 12, 2, 0, 2,</span></div><div><span style="color: #ce9178;">&nbsp; 12, 10, 8, 10, 12, 13, 13, 9, 9, 13, 13, 1, 1, 13, 13, 9, 9, 13, 13</span></div></div><p></p><h4 style="text-align: left;">Searching...</h4><p>If we search for a sub-sequence of the antidiagonalised table, <a href="https://oeis.org/search?q=2%2C+3%2C+3%2C+3%2C+3%2C+4%2C+2%2C+0%2C+2%2C+4%2C+5%2C+5&amp;go=Search" target="_blank">we can find the correct entry</a>.</p><p>If, however, we search for a row of the values from the table,&nbsp;<a href="https://oeis.org/search?q=5%2C4%2C7%2C6%2C1%2C0%2C3&amp;go=Search" rel="nofollow" target="_blank"> A003987 is not found</a>!<br />The values chosen: to search for: <b>5,4,7,6,1,0,3 </b><a href="https://oeis.org/A003987#:~:text=2%2C%20%203%2C%2012%2C%20...-,5%2C%204%2C%207%2C%206%2C%201%2C%200%2C%203,-%2C%20%202%2C%20..." rel="nofollow" target="_blank">appear near the end of the table</a> which shows that that <i>row</i> of numbers should be followed by a 2.<b><br /></b>The table shows 13*13 / 2 ~ 85 values. OEIS has a <a href="https://oeis.org/A003987/list" rel="nofollow" target="_blank">list </a>of 104 values, <b><i>so it has the data to search through</i></b>.</p><h3 style="text-align: left;">No intuitive search of OEIS tables<br /></h3><p>It seems to me that the most intuitive way to search a table of values is by row, left to right. There are other ways to search a table, (assuming an origin at top left and the table extends to the right and down):</p><ul style="text-align: left;"><li>By row, L2R. <b>→</b>, R2L <b>←</b></li><li>By Column Top2Bottom, <b>↓</b>, B2T <b>↑</b></li><li>By 45 degree diagonals, <b>↘, ↖, ↙, ↗</b></li></ul><p><b><i>OEIS doesn't seem to do these searches on tabular data.</i></b><br /></p><h3 style="text-align: left;">Regenerating a 2D table from antidiagonalised data.</h3><p>I did play around and created some code to recreate a table as a list of row-lists, in Python, given an OEIS <a href="https://oeis.org/SubmitB.html" rel="nofollow" target="_blank">B-file</a>. The options handling is a work in progress, but the main part was being able to generate the table.</p><div><div><span style="color: #6a9955;"># -*- coding: utf-8 -*-</span></div><div><span style="color: #6a9955;"># %%</span></div><div><span style="color: #ce9178;">"""</span></div><div><span style="color: #ce9178;">adia_to_table.py file</span></div><br /><div><span style="color: #ce9178;">Generate 2D table from OEIS type anti-diagonalised sequence held in file</span></div><br /><br /><div><span style="color: #ce9178;">Created on Thu Apr &nbsp;4 18:16:07 2024</span></div><br /><div><span style="color: #ce9178;">@author: paddy3118</span></div><div><span style="color: #ce9178;">"""</span></div><br /><div><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> itertools </span><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> zip_longest</span></div><div><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> math</span></div><div><span style="color: #6a9955;"># from pprint import pp</span></div><div><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> antidiagonals </span><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> antidiag_triangle_indices</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">read_bfile</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">bfname</span><span style="color: #cccccc;">: </span><span style="color: #4ec9b0;">str</span><span style="color: #cccccc;">) -&gt; tuple[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">|</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">None</span><span style="color: #cccccc;">, &nbsp;</span><span style="color: #6a9955;"># first index</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;list[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]]: &nbsp; </span><span style="color: #6a9955;"># anti-diag values</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"""</span></div><div><span style="color: #ce9178;">Read B-file bfname</span></div><br /><div><span style="color: #ce9178;">## B-File format:</span></div><div><span style="color: #ce9178;">* Ref: https://oeis.org/SubmitB.html</span></div><div><span style="color: #ce9178;">* Blank lines ignored</span></div><div><span style="color: #ce9178;">* Lines beginning &nbsp;with # ignored</span></div><div><span style="color: #ce9178;">* Lines of two, space-separated integers &lt;index&gt; &lt;indexed-value&gt;</span></div><br /><div><span style="color: #ce9178;">It is assumed the index increments by one on subsequent lines.</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; """</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; first_index, values </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">None</span><span style="color: #cccccc;">, []</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">with</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">open</span><span style="color: #cccccc;">(bfname) </span><span style="color: #c586c0;">as</span><span style="color: #cccccc;"> bfile:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> line </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> bfile:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ln </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> line.strip()</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">not</span><span style="color: #cccccc;"> ln </span><span style="color: #569cd6;">or</span><span style="color: #cccccc;"> ln.startswith(</span><span style="color: #ce9178;">'#'</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">continue</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index, value </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">(field) </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> field </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> ln.split()[:</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">]]</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> first_index </span><span style="color: #569cd6;">is</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">None</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; first_index </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> index</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; values.append(value)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> first_index, values</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">antidiag_to_table</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">sequence</span><span style="color: #cccccc;">: list[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]) -&gt; list[list[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"""</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; Convert anti-diagonalised sequence back to infinite 2D table.</span></div><br /><div><span style="color: #ce9178;">&nbsp; &nbsp; Parameters</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; ----------</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; sequence : list[int]</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; Anti-diagonalised values from table.</span></div><br /><div><span style="color: #ce9178;">&nbsp; &nbsp; Returns</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; -------</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; list[list[int]]</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp; &nbsp; Table of rows of ints.</span></div><br /><div><span style="color: #ce9178;">&nbsp; &nbsp; Table rows will fill in from successive sequence values like this:</span></div><br /><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp;1 &nbsp;2 &nbsp;4 &nbsp;7 11 16 ...</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp;3 &nbsp;5 &nbsp;8 12 17</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; &nbsp;6 &nbsp;9 13 18</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; 10 14 19</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; 15 20</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; 21</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; .</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; .</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; .</span></div><div><span style="color: #ce9178;">&nbsp; &nbsp; """</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># 1, 3, 6, 10, 15, 21, ... rows*(rows+1) / 2</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># min columns in triangular table generation. ~= min rows</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; size </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">len</span><span style="color: #cccccc;">(sequence) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;"># = rows*(rows+1)/2</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; rows </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> math.ceil((</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> math.sqrt(</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> size)) </span><span style="color: #d4d4d4;">/</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">) &nbsp;</span><span style="color: #6a9955;"># solve for rows</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># cols = rows &nbsp;# last row may be deleted if last anti-diag is part filled.</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># print(f"{(size, cols) = }")</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># Empty (triangular) table of None's</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; table </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [[</span><span style="color: #569cd6;">None</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;"> (rows </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> i)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> i </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">(rows)]</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; indices </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> antidiag_triangle_indices()</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; col </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;"> &nbsp;</span><span style="color: #6a9955;"># for if sequence is empty</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> val, (row, col) </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">zip</span><span style="color: #cccccc;">(sequence, indices):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; table[row][col] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> val</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># Remove unfilled part of last anti-diag of table</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">while</span><span style="color: #cccccc;"> col </span><span style="color: #d4d4d4;">&gt;</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; row, col </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">next</span><span style="color: #cccccc;">(indices)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; table[row].pop(</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># remove last row if present and empty</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> table </span><span style="color: #569cd6;">and</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">not</span><span style="color: #cccccc;"> table[</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; table.pop(</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> table</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">pp_table</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">table</span><span style="color: #cccccc;">: list[list[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]]) -&gt; </span><span style="color: #569cd6;">None</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Pretty-print table of differring row lengths"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">not</span><span style="color: #cccccc;"> table:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; col_width </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">max</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">max</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">len</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">str</span><span style="color: #cccccc;">(val)) </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> val </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> row) </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> row </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> table)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> row </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> table:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">''</span><span style="color: #cccccc;">.join(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">"</span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">val</span><span style="color: #569cd6;">:{</span><span style="color: #cccccc;">col_width</span><span style="color: #569cd6;">}}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> val </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> row))</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">transpose</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">table</span><span style="color: #cccccc;">: list[list[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]]) -&gt; list[list[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Table of rows to x&lt;&gt;y transposed table of new rows"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; fv </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> math.nan</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; tr </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #4ec9b0;">list</span><span style="color: #cccccc;">(new_row)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> new_row </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> zip_longest(</span><span style="color: #d4d4d4;">*</span><span style="color: #cccccc;">table, </span><span style="color: #9cdcfe;">fillvalue</span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;">fv)]</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># remove fillvalues in triangular transposition</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> row </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> tr:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">try</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; row[row.index(fv):] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> []</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">except</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">ValueError</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">continue</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> tr</span></div><br /><br /><div><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">__name__</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">"__main__"</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"# TEST FILL BY ANTI-DIAGONAL</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> n </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">"</span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">n = </span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">:</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; ans </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> antidiag_to_table(</span><span style="color: #4ec9b0;">list</span><span style="color: #cccccc;">(</span><span style="color: #dcdcaa;">range</span><span style="color: #cccccc;">(</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, n</span><span style="color: #d4d4d4;">+</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">)))</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; pp_table(ans)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">()</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; fname, m </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'b365096.txt'</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">505</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\n\n</span><span style="color: #ce9178;"># Data from </span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">fname</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">, first </span><span style="color: #569cd6;">{</span><span style="color: #cccccc;">m</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> values:</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; ad </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> read_bfile(fname)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; ans </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> antidiag_to_table(ad[</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">][:m])</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; pp_table(ans)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">"</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">## Transposed:</span><span style="color: #d7ba7d;">\n</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; pp_table((tr:=transpose(ans)))</span></div><br /><br /></div><p></p><p><br /></p><p>And antidiagonals.py is this:</p><div><div><span style="color: #6a9955;"># -*- coding: utf-8 -*-</span></div><div><span style="color: #ce9178;">"""</span></div><div><span style="color: #ce9178;">Anti-diagonals:</span></div><br /><div><span style="color: #ce9178;">0,0 0,1 0,2 0,3</span></div><div><span style="color: #ce9178;">1,0 1,1 1,2 1,3</span></div><div><span style="color: #ce9178;">2,0 2,1 2,2 2,3</span></div><div><span style="color: #ce9178;">3,0 3,1 3,2 3,3</span></div><br /><div><span style="color: #ce9178;">Of Square:</span></div><div><span style="color: #ce9178;">0,0 &nbsp;0,1 1,0 &nbsp;0,2 1,1 2,0 &nbsp;0,3 1,2 2,1 3,0 &nbsp; 1,3 2,2 3,1 &nbsp;2,3 3,2 &nbsp;3,3</span></div><br /><div><span style="color: #ce9178;">of Infinite table:</span></div><div><span style="color: #ce9178;">0,0 &nbsp;0,1 1,0 &nbsp;0,2 1,1 2,0 &nbsp;0,3 1,2 2,1 3,0 &nbsp; 0,4 1,3 2,2 3,1 4,0 ...</span></div><br /><br /><div><span style="color: #ce9178;">Created on Mon Aug 21 13:36:31 2023</span></div><br /><div><span style="color: #ce9178;">@author: paddy</span></div><br /><div><span style="color: #ce9178;">"""</span></div><div><span style="color: #6a9955;"># %% Triangles</span></div><br /><div><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> itertools </span><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> islice</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">antidiag_triangle_indices</span><span style="color: #cccccc;">() -&gt; tuple[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; x </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> y </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">while</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">True</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> (x, y)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; x, y </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> (x</span><span style="color: #d4d4d4;">+</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, y</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">) </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> y </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> (</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, x</span><span style="color: #d4d4d4;">+</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">)</span></div><br /><br /><div><span style="color: #4ec9b0;">list</span><span style="color: #cccccc;">(islice(antidiag_triangle_indices(), </span><span style="color: #b5cea8;">15</span><span style="color: #cccccc;">))</span></div><br /><div><span style="color: #6a9955;"># %% Rectangles</span></div><br /><div><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> itertools </span><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> islice</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">antidiag_rectangle_indices</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">sizex</span><span style="color: #cccccc;">: </span><span style="color: #4ec9b0;">int</span><span style="color: #d4d4d4;">=</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">sizey</span><span style="color: #cccccc;">: </span><span style="color: #4ec9b0;">int</span><span style="color: #d4d4d4;">=</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">) -&gt; tuple[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; x </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> y </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">while</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">True</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">yield</span><span style="color: #cccccc;"> (x, y)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> (x, y) </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> (sizex </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, sizey </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">break</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; x, y </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> (x</span><span style="color: #d4d4d4;">+</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, y</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> x </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> sizex </span><span style="color: #569cd6;">or</span><span style="color: #cccccc;"> y </span><span style="color: #d4d4d4;">&lt;</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; u </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> x </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> y </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x, y </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> (</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, u) </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> u </span><span style="color: #d4d4d4;">&lt;</span><span style="color: #cccccc;"> sizey </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;"> (u </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> sizey </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, sizey </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">)</span></div><br /><div><span style="color: #4ec9b0;">list</span><span style="color: #cccccc;">(antidiag_rectangle_indices(</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">))</span></div><br /></div><p></p><p><br /></p><p><b>END.</b><br /></p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 21, 2024 02:30 PM UTC by
            <a href="http://feeds.feedburner.com/GoDeh" class="link link-hover text-primary"
              >Go Deh</a
            >
          </div>
          <a
            href="http://paddy3118.blogspot.com/2024/04/searching-oeis-tables.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.listendata.com/2024/04/4-ways-to-use-chatgpt-api-in-python.html" class="hover:underline"
              >4 Ways to Use ChatGPT API in Python</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>In this tutorial, we will explain how to use ChatGPT API in Python, along with examples.</p>
<div class="db">Steps to Access ChatGPT API</div>
<p>Please follow the steps below to access the ChatGPT API.</p>
<ol>
  <li>Visit the <a href="https://platform.openai.com/" rel="nofollow" target="_blank">OpenAI Platform</a> and sign up using your Google, Microsoft or Apple account.</li>
  <li>After creating your account, the next step is to generate a secret API key to access the API. The API key looks like this -<code>sk-xxxxxxxxxxxxxxxxxxxx</code></li>
  <li>If your phone number has not been associated with any other OpenAI account previously, you may get free credits to test the API. Otherwise you have to add atleast 5 dollars into your account and charges will be based on the usage and the type of model you use. Check out the <a href="https://openai.com/pricing" rel="nofollow" target="_blank">pricing</a> details in the OpenAI website.</li>
  <li>Now you can call the API using the code below.</li>
</ol>
<a href="https://www.listendata.com/2024/04/4-ways-to-use-chatgpt-api-in-python.html#more">To read this article in full, please click here</a><div class="blogger-post-footer">This post appeared first on <a href="https://www.listendata.com/">ListenData</a></div>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 20, 2024 06:17 PM UTC by
            <a href="https://www.listendata.com/feeds/posts/default/-/Python" class="link link-hover text-primary"
              >ListenData</a
            >
          </div>
          <a
            href="https://www.listendata.com/2024/04/4-ways-to-use-chatgpt-api-in-python.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.mattlayman.com/blog/2024/importing-content-building-saas-with-python-and-django-189/" class="hover:underline"
              >Importing Content - Building SaaS with Python and Django #189</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            In this episode, I built the import view that is needed to allow users to add their own journal entries to JourneyInbox. After completing that, I handled the pull requests from dependabot, then I worked on some quality of life to do better handling with beta user trials.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 18, 2024 12:00 AM UTC by
            <a href="https://www.mattlayman.com/categories/python/index.xml" class="link link-hover text-primary"
              >Matt Layman</a
            >
          </div>
          <a
            href="https://www.mattlayman.com/blog/2024/importing-content-building-saas-with-python-and-django-189/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.mattlayman.com/blog/2024/why-django-and-why-not-flask/" class="hover:underline"
              >Why Django and why not Flask?</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            Why would someone pick Django over Flask? That&rsquo;s the question that I got on stream and here is my answer.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 18, 2024 12:00 AM UTC by
            <a href="https://www.mattlayman.com/categories/python/index.xml" class="link link-hover text-primary"
              >Matt Layman</a
            >
          </div>
          <a
            href="https://www.mattlayman.com/blog/2024/why-django-and-why-not-flask/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://nedbatchelder.com/blog/202404/try_it_functionclass_coverage_report.html" class="hover:underline"
              >Try it: function/class coverage report</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>I&#8217;ve added experimental function and class coverage reports to coverage.py.
I&#8217;d like <a href="https://github.com/nedbat/coveragepy/issues/780" rel="external noopener">feedback</a>
about whether they behave the way you want them to.</p><p>I haven&#8217;t made a PyPI release.  [UPDATE April 23: this is now available as of
<a href="https://pypi.org/project/coverage/7.5.0" rel="external noopener">coverage.py 7.5.0</a>, so
you don&#8217;t need to install from GitHub.]  To try the new reports, install
coverage from GitHub. Be sure to include the hash:</p><blockquote class="code"><pre>$ python3 -m pip install git+https://github.com/nedbat/coveragepy@f10c455b7c8fd26352de#egg=coverage==0.0<br /></pre></blockquote><p>Then run coverage and make an HTML report as you usually do.  You should
have two new pages, not linked from the index page (yet).
&#8220;htmlcov/function_index.html&#8221; is the function coverage report, and the classes
are in &#8220;htmlcov/class_index.html&#8221;.</p><p>I had to decide how to categorize nested functions and classes. Inner
functions are not counted as part of their outer functions.  Classes consist of
the executable lines in their methods, but not lines outside of methods, because
those lines run on import.  Each file has an entry in the function report for
all of the lines outside of any function, called &#8220;(no function)&#8221;.  The class
report has &#8220;(no class)&#8221; entries for lines outside of any classes.</p><p>The result should be that every line is part of one function, or the &#8220;(no
function)&#8221; entry, and every line is part of one class, or the &#8220;(no class)&#8221;
entry.  This is what made sense to me, but maybe there&#8217;s a compelling reason to
do it differently.</p><p>The reports have a sortable column for the file name, and a sortable column
for the function or class.  Where functions or classes are nested, the name is a
dotted sequence, but is sorted by only the last component.  Just like the
original file listing page, the new pages can be filtered to focus on areas of
interest.</p><p>You can look at some sample reports:</p><ul>
<li><a href="https://nedbatchelder.com/files/sample_coverage_html_beta">Usual file report</a></li>
<li><a href="https://nedbatchelder.com/files/sample_coverage_html_beta/function_index.html">Function report</a></li>
<li><a href="https://nedbatchelder.com/files/sample_coverage_html_beta/class_index.html">Class report</a></li>
</ul><p>It would be helpful if you could give me
<a href="https://github.com/nedbat/coveragepy/issues/780" rel="external noopener">feedback on the
original issue</a> about some questions:</p><ul>

<li>Is it useful to have &#8220;(no function)&#8221; and &#8220;(no class)&#8221; entries or is it just
distracting pedantry?  With the entries, the total is the same as the file
report, but they don&#8217;t seem useful by themselves.</li>

<li>Does the handling of nested functions and classes make sense?</li>

<li>Should these reports be optional (requested with a switch) or always
produced?</li>

<li>Is it reasonable to produce one page with every function? How large does a
project have to get before that&#8217;s not feasible or useful?</li>

<li>And most importantly: do these reports help you understand how to improve
your code?</li>

</ul><p>This is only in the HTML report for now, but we can do more in the future.
Other <a href="https://github.com/nedbat/coveragepy/issues/780" rel="external noopener">ideas
about improvements</a> are of course welcome.  Thanks!</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 15, 2024 08:02 PM UTC by
            <a href="http://nedbatchelder.com/blog/planetpython.xml" class="link link-hover text-primary"
              >Ned Batchelder</a
            >
          </div>
          <a
            href="https://nedbatchelder.com/blog/202404/try_it_functionclass_coverage_report.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://nuitka.net/posts/nuitka-release-22.html" class="hover:underline"
              >Nuitka Release 2.2</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            This is to inform you about the new stable release of Nuitka. It is the extremely compatible Python compiler,
“download now”.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 12, 2024 09:37 AM UTC by
            <a href="http://nuitka.net/categories/Python.xml" class="link link-hover text-primary"
              >Kay Hayen</a
            >
          </div>
          <a
            href="https://nuitka.net/posts/nuitka-release-22.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.dataschool.io/discretization-for-machine-learning/" class="hover:underline"
              >Should you discretize continuous features for Machine Learning? 🤖</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            Learn how to "discretize" or "bin" your continuous features using Python's scikit-learn, and find out why I usually don't recommend doing so.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on April 10, 2024 03:12 PM UTC by
            <a href="https://www.dataschool.io/tag/python/rss/" class="link link-hover text-primary"
              >Data School</a
            >
          </div>
          <a
            href="https://www.dataschool.io/discretization-for-machine-learning/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
  </div>
  <div class="mt-8"><div class="btn-group my-4"><a href="index4.html" class="btn">«</a><a href="index3.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">3</a><a href="index4.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">4</a><button class="btn btn-active hover:bg-primary hover:shadow-lg hover:shadow-primary/50">5</button><a href="index6.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">6</a><a href="index7.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">7</a><a href="index6.html" class="btn">»</a></div></div>
</div>

      </div>
      <div class="drawer-side">
        <label for="my-drawer-2" class="drawer-overlay"></label>
        
<ul class="menu p-4 w-80 min-h-full bg-base-200 text-base-content">
  <li class="menu-title">Stats</li>
  
    <li><a>Total Entries: 4753</a></li>
    <li><a>Unique Feeds: 245</a></li>
    

  <li class="menu-title mt-4">Top Authors</li>
  <div class="pl-4 max-h-48 overflow-y-auto"><li><a href="https://www.mattlayman.com/categories/python/index.xml">Awesome Python Applications (424)</a></li><li><a href="https://www.mattlayman.com/categories/python/index.xml">Matt Layman (309)</a></li><li><a href="https://www.mattlayman.com/categories/python/index.xml">Kay Hayen (194)</a></li><li><a href="https://www.mattlayman.com/categories/python/index.xml">Juri Pakaste (126)</a></li><li><a href="https://www.mattlayman.com/categories/python/index.xml">"Menno's Musings" (115)</a></li></div>

  <li class="menu-title mt-4">Feeds</li>
  <div class="pl-4 max-h-96 overflow-y-auto">
    <ul>
      
      <li><a href="http://dev.2degreesnetwork.com/feeds/posts/default/-/python">2degrees</a></li>
      
      <li><a href="https://emptysqua.re/blog/category/python/index.xml">A. Jesse Jiryu Davis</a></li>
      
      <li><a href="http://www.artima.com/weblogs/feeds/bloggers/aahz.rss">Aahz</a></li>
      
      <li><a href="https://djangocentral.com/feed/">Abhijeet Pal</a></li>
      
      <li><a href="http://masnun.rocks/tags/python/index.xml">Abu Ashraf Masnun</a></li>
      
      <li><a href="http://techarttiki.blogspot.com/feeds/posts/default/-/python">Adam Pletcher</a></li>
      
      <li><a href="http://agendaless.com/blog/index.atom?category=python">Agendaless Consulting</a></li>
      
      <li><a href="https://www.ahmedbouchefra.com/python/feed.xml">Ahmed Bouchefra</a></li>
      
      <li><a href="http://alstatr.blogspot.com/feeds/posts/default/-/Python">Al-Ahmadgaid Asaad</a></li>
      
      <li><a href="http://alecmunro.blogspot.com/feeds/posts/default/-/python">Alec Munro</a></li>
      
      <li><a href="http://alextechrants.blogspot.com/feeds/posts/default/-/python">Alex Grönholm</a></li>
      
      <li><a href="https://alexmorozov.github.io/feeds/tag-python.atom.xml">Alex Morozov</a></li>
      
      <li><a href="http://www.alexconrad.org/feeds/posts/default/-/python">Alexandre Conrad</a></li>
      
      <li><a href="http://peadrop.com/blog/category/python/feed/">Alexandre Vassalotti</a></li>
      
      <li><a href="http://feeds.feedburner.com/en_lexevorg">Alexey Evseev</a></li>
      
      <li><a href="http://akaptur.github.io/blog/categories/python/atom.xml">Allison Kaptur</a></li>
      
      <li><a href="http://blog.amjith.com/posts.atom?tag=python">Amjith Ramanujam</a></li>
      
      <li><a href="http://blog.amvtek.com/feeds/tags/python.atom.xml">AmvTek</a></li>
      
      <li><a href="https://anarc.at/tag/python-planet/index.rss">Anarcat</a></li>
      
      <li><a href="http://techtonik.rainforce.org/feeds/posts/default/-/python">Anatoly Techtonik</a></li>
      
      <li><a href="http://aroberge.blogspot.com/atom.xml">Andre Roberge</a></li>
      
      <li><a href="http://dalkescientific.com/writings/diary/diary-rss.xml">Andrew Dalke</a></li>
      
      <li><a href="http://mindref.blogspot.com/feeds/posts/default/-/python">Andriy Kornatskyy</a></li>
      
      <li><a href="http://mysql-python.blogspot.com/feeds/posts/default">Andy Dustman</a></li>
      
      <li><a href="http://andy.terrel.us/feeds/python-tag.rss.xml">Andy R. Terrel</a></li>
      
      <li><a href="http://annaraven.blogspot.com/feeds/posts/default/-/python">Anna Martelli Ravenscroft</a></li>
      
      <li><a href="http://codingweasel.blogspot.com/feeds/posts/default/-/python">Anthony Baxter</a></li>
      
      <li><a href="http://kpoxit.blogspot.com/feeds/posts/default/-/python">Anton Belyaev</a></li>
      
      <li><a href="http://bobrochel.blogspot.com/feeds/posts/default/-/python">Anton Bobrov</a></li>
      
      <li><a href="https://anweshadas.in/tag/python/rss/">Anwesha Das</a></li>
      
      <li><a href="http://lucumr.pocoo.org/feed.atom">Armin Ronacher</a></li>
      
      <li><a href="https://rushter.com/blog/feed/pyplanet.xml">Artem Golubin</a></li>
      
      <li><a href="https://medium.com/feed/python4you">Artem Rys</a></li>
      
      <li><a href="http://pyfunc.blogspot.com/feeds/posts/default/-/python">Ashish Vidyarthi</a></li>
      
      <li><a href="http://astrocodeschool.com/feeds/all.rss.xml">Astro Code School</a></li>
      
      <li><a href="https://raw.githubusercontent.com/mahmoud/awesome-python-applications/master/atom.xml">Awesome Python Applications</a></li>
      
      <li><a href="http://baijum.blogspot.com/feeds/posts/default/-/python">Baiju Muthukadan</a></li>
      
      <li><a href="http://gbtami.github.io/feed.python.xml">Bajusz Tamás</a></li>
      
      <li><a href="http://www.bedjango.com/planet/feed/">BeDjango</a></li>
      
      <li><a href="http://codedstructure.blogspot.com/feeds/posts/default/-/python">Ben Bass</a></li>
      
      <li><a href="https://jbencook.com/feed.xml">Ben Cook</a></li>
      
      <li><a href="http://clusterbleep.net/blog/category/python/feed/">Ben Rousch</a></li>
      
      <li><a href="http://pybites.blogspot.com/feeds/posts/default">Benjamin Peterson</a></li>
      
      <li><a href="http://www.benjiyork.com/blog/atom.xml">Benji York</a></li>
      
      <li><a href="http://zebert.blogspot.com/feeds/posts/default/-/python">Bertrand Mathieu</a></li>
      
      <li><a href="https://geeksocket.in/tags/python/index.xml">Bhavin Gandhi</a></li>
      
      <li><a href="http://feeds.feedburner.com/thetaranights">Bhishan Bhandari</a></li>
      
      <li><a href="http://news.open-bio.org/news/category/obf-projects/biopython/feed/atom/">BioPython News</a></li>
      
      <li><a href="http://bitofcheese.blogspot.com/feeds/posts/default">Bit of Cheese</a></li>
      
      <li><a href="http://source.mihelac.org/feeds/categories/django/">Bojan Mihelac</a></li>
      
      <li><a href="http://rhodesmill.org/brandon/category/python/feed">Brandon Rhodes</a></li>
      
      <li><a href="http://python4dads.wordpress.com/feed/">Brendan Scott</a></li>
      
      <li><a href="https://snarky.ca/rss/">Brett Cannon</a></li>
      
      <li><a href="http://pythontest.com/posts/index.xml">Brian Okken</a></li>
      
      <li><a href="http://nicoddemus.github.io/tag/python/atom.xml">Bruno Oliveira</a></li>
      
      <li><a href="https://www.codingthepast.com/feed_python_planet.xml">Bruno Ponne / Coding The Past</a></li>
      
      <li><a href="http://brunorocha.org/tag/pythonplanet.atom">Bruno Rocha</a></li>
      
      <li><a href="http://www.caktusgroup.com/feeds/tags/python/">Caktus Consulting Group</a></li>
      
      <li><a href="http://techblog.ironfroggy.com/feeds/posts/default/-/programming">Calvin Spealman</a></li>
      
      <li><a href="http://carlchenet.com/category/planetpython/feed/">Carl Chenet</a></li>
      
      <li><a href="https://carl.duevel.online/tags/python/index.xml">Carl Düvel</a></li>
      
      <li><a href="http://pyright.blogspot.com/feeds/posts/default?alt=rss">Carl Trachte</a></li>
      
      <li><a href="http://themindcaster.blogspot.com/feeds/posts/default/-/python">Carlos Eduardo de Paula</a></li>
      
      <li><a href="http://eatthedots.blogspot.com/feeds/posts/default">Casey Duncan</a></li>
      
      <li><a href="http://catherinedevlin.blogspot.com/feeds/posts/default/-/python">Catherine Devlin</a></li>
      
      <li><a href="https://chinghwayu.com/category/python/feed/">Ching-Hwa Yu</a></li>
      
      <li><a href="https://www.metachris.com/tags/python/index.xml">Chris Hager</a></li>
      
      <li><a href="http://chris-miles-writes-python.blogspot.com/feeds/posts/default?alt=rss">Chris Miles</a></li>
      
      <li><a href="http://pyinformatics.blogspot.com/feeds/posts/default">Chris Mitchell</a></li>
      
      <li><a href="http://pbpython.com/feeds/all.atom.xml">Chris Moffitt</a></li>
      
      <li><a href="http://ideas.offby1.net/feeds/tag-python.atom.xml">Chris Rose</a></li>
      
      <li><a href="http://feeds.feedburner.com/ChrisWarrickPython">Chris Warrick</a></li>
      
      <li><a href="http://lipyrary.blogspot.com/feeds/posts/default">Christian Heimes</a></li>
      
      <li><a href="https://dev.to/feed/ldrscke.rss">Christian Ledermann</a></li>
      
      <li><a href="http://feeds.feedburner.com/mrtopf-python">Christian Scholz</a></li>
      
      <li><a href="https://cito.github.io/tags/python/index.xml">Christoph Zwerschke</a></li>
      
      <li><a href="https://blog.codegrades.com/feed.xml">CodeGrades</a></li>
      
      <li><a href="http://codesnipers.com/?q=taxonomy/term/16/0/feed">CodeSnipers</a></li>
      
      <li><a href="https://coderslegacy.com/category/python/feed/">CodersLegacy</a></li>
      
      <li><a href="http://allanderek.github.io/categories/python.xml">Coding Diet</a></li>
      
      <li><a href="https://www.gallon.me/tag/python/feed">Corey Gallon</a></li>
      
      <li><a href="http://feeds.feedburner.com/goldblog/python">Corey Goldberg</a></li>
      
      <li><a href="http://feeds.feedburner.com/cormoran-project">Cormoran Project</a></li>
      
      <li><a href="http://feeds2.feedburner.com/portablecommandline">Cross-Platform Command Line Tools</a></li>
      
      <li><a href="http://feeds.feedburner.com/cubicweborg">CubicWeb</a></li>
      
      <li><a href="https://ntguardian.wordpress.com/category/python/feed/">Curtis Miller</a></li>
      
      <li><a href="http://dspillustrations.com/static/dspillustrations.rss.xml">DSPIllustrations.com</a></li>
      
      <li><a href="http://dailytechvideo.com/category/python/feed/">Daily Tech Video (Python)</a></li>
      
      <li><a href="http://dfwpython.blogspot.com/feeds/posts/default">Dallas Fort Worth Pythoneers</a></li>
      
      <li><a href="http://late.am/python.feed.xml">Dan Crosta</a></li>
      
      <li><a href="http://strombrg.blogspot.com/feeds/posts/default/-/Python">Dan Stromberg</a></li>
      
      <li><a href="http://dan.yeaw.me/categories/python.xml">Dan Yeaw</a></li>
      
      <li><a href="http://dbader.org/blog/tags/python/rss">Daniel Bader</a></li>
      
      <li><a href="https://daniel.roygreenfeld.com/feeds/python.atom.xml">Daniel Roy Greenfeld</a></li>
      
      <li><a href="https://www.dataschool.io/tag/python/rss/">Data School</a></li>
      
      <li><a href="https://www.datawars.io/articles/rss.xml">DataWars.io</a></li>
      
      <li><a href="http://dabeaz.blogspot.com/feeds/posts/default">Dave Beazley</a></li>
      
      <li><a href="https://davidamos.dev/tag/python/rss/">David Amos</a></li>
      
      <li><a href="https://davidcaron.dev/feeds/tags/python.atom.xml">David Caron</a></li>
      
      <li><a href="http://www.artima.com/weblogs/feeds/bloggers/goodger.rss">David Goodger</a></li>
      
      <li><a href="http://davidlindelof.com/category/python/feed/">David Lindelof</a></li>
      
      <li><a href="http://www.drmaciver.com/category/python/feed/">David MacIver</a></li>
      
      <li><a href="http://dmalcolm.livejournal.com/data/atom?tag=python">David Malcolm</a></li>
      
      <li><a href="http://www.szotten.com/david/feeds/python.atom.xml">David Szotten</a></li>
      
      <li><a href="http://davidemoro.blogspot.com/feeds/posts/default/-/planetpython">Davide Moro</a></li>
      
      <li><a href="http://feeds2.feedburner.com/Daftpython">Davy Mitchell</a></li>
      
      <li><a href="http://davywybiral.blogspot.com/feeds/posts/default">Davy Wybiral</a></li>
      
      <li><a href="https://declassed.art/en/feed/python.xml">Declassed Art</a></li>
      
      <li><a href="http://makkalot-opensource.blogspot.com/feeds/posts/default/-/python">Denis Kurov</a></li>
      
      <li><a href="http://www.djangoproject.com/rss/weblog/">Django Weblog</a></li>
      
      <li><a href="http://doingmathwithpython.github.io/feeds/all.atom.xml">Doing Math with Python</a></li>
      
      <li><a href="https://feeds.feedburner.com/doughellmann/python">Doug Hellmann</a></li>
      
      <li><a href="http://www.dougalmatthews.com/feeds/python.atom.xml">Dougal Matthews</a></li>
      
      <li><a href="http://oubiwann.blogspot.com/feeds/posts/default/-/python">Duncan McGreggor</a></li>
      
      <li><a href="http://edcrewe.blogspot.com/feeds/posts/default/-/python">Ed Crewe</a></li>
      
      <li><a href="http://edreamleo.blogspot.com/feeds/posts/default/-/python">Edward K. Ream</a></li>
      
      <li><a href="http://eli.thegreenplace.net/feeds/python.atom.xml">Eli Bendersky</a></li>
      
      <li><a href="http://eniramltd.github.io/devblog/rss/categories/python.xml">Eniram Ltd.</a></li>
      
      <li><a href="https://examachine.net/blog/category/python/feed/">Eray Özkural (examachine)</a></li>
      
      <li><a href="http://www.marsja.se/category/python/feed/">Erik Marsja</a></li>
      
      <li><a href="http://etienned.github.io/categories/python.xml">Etienne Desautels</a></li>
      
      <li><a href="http://blog.europython.eu/rss">EuroPython</a></li>
      
      <li><a href="http://www.europython-society.org/rss">EuroPython Society</a></li>
      
      <li><a href="http://evennia.blogspot.com/feeds/posts/default">Evennia</a></li>
      
      <li><a href="https://everydaysuperpowers.dev/feed/python/">Everyday Superpowers</a></li>
      
      <li><a href="http://pydev.blogspot.com/atom.xml">Fabio Zadrozny</a></li>
      
      <li><a href="http://en.ig.ma/notebook/feeds/atom/tag/python.xml">Filip Wasilewski</a></li>
      
      <li><a href="http://blog.filipesaraiva.info/?feed=rss2&tag=planet-python">Filipe Saraiva</a></li>
      
      <li><a href="http://pyinsci.blogspot.com/feeds/posts/default">Flavio Coelho</a></li>
      
      <li><a href="http://blog.flaper87.com/feeds/python.atom.xml">Flavio Percoco</a></li>
      
      <li><a href="http://fwierzbicki.blogspot.com/atom.xml">Frank Wierzbicki</a></li>
      
      <li><a href="http://raspberry-python.blogspot.com/feeds/posts/default/-/english/python">François Dion</a></li>
      
      <li><a href="http://feeding.cloud.geek.nz/tags/python/index.rss">François Marier</a></li>
      
      <li><a href="http://www.fridh.nl/tag/python.atom.xml">Frederik Rietdijk</a></li>
      
      <li><a href="https://www.frompythonimportpodcast.com/feed">From Python Import Podcast</a></li>
      
      <li><a href="https://www.fullstackpython.com/feeds/all.atom.xml">Full Stack Python</a></li>
      
      <li><a href="http://gael-varoquaux.info/feeds/programming.atom.xml">Ga&#235;l Varoquaux</a></li>
      
      <li><a href="http://compiletoi.net/feeds/python.atom.xml">Georges Dubus</a></li>
      
      <li><a href="http://ghaandeeonit.tumblr.com/rss">Ghaandee on IT</a></li>
      
      <li><a href="https://gmpy.dev/feeds/atom.tag.python.xml">Giampaolo Rodola</a></li>
      
      <li><a href="http://giuliofidente.com/feeds/tag/python.atom.xml">Giulio Fidente</a></li>
      
      <li><a href="http://hackermojo.com/mt-static/tagged/python.rdf">Glenn Franxman</a></li>
      
      <li><a href="http://glyph.twistedmatrix.com/feeds/posts/default">Glyph Lefkowitz</a></li>
      
      <li><a href="http://feeds.feedburner.com/GoDeh">Go Deh</a></li>
      
      <li><a href="http://blog.godson.in/feeds/posts/default/-/Python">Godson Gera</a></li>
      
      <li><a href="http://www.curiousvenn.com/?feed=rss2&cat=4">Graeme Cross</a></li>
      
      <li><a href="http://blog.dscpl.com.au/feeds/posts/default">Graham Dumpleton</a></li>
      
      <li><a href="http://defrobnication.blogspot.com/feeds/posts/default/-/python">Grant Baillie</a></li>
      
      <li><a href="http://www.wisdomandwonder.com/tag/python/feed">Grant Rettke</a></li>
      
      <li><a href="http://gc-taylor.com/?format=rss&category=Python">Greg Taylor</a></li>
      
      <li><a href="http://agiletesting.blogspot.com/feeds/posts/default/-/python">Grig Gheorghiu</a></li>
      
      <li><a href="http://blog.fizyk.net.pl/tags/python.xml">Grzegorz Śliwiński</a></li>
      
      <li><a href="http://neopythonic.blogspot.com/feeds/posts/default">Guido van Rossum</a></li>
      
      <li><a href="http://gustavonarea.net/blog/tags/python/feed/">Gustavo Narea</a></li>
      
      <li><a href="http://blog.labix.org/tag/python/feed">Gustavo Niemeyer</a></li>
      
      <li><a href="http://pycloud.blogspot.com/feeds/posts/default/-/python">Gökhan Sever</a></li>
      
      <li><a href="http://python-in-the-lab.blogspot.de//feeds/posts/default/-/Python">Hernan Grecco</a></li>
      
      <li><a href="http://www.hilarymason.com/tag/python/feed/">Hilary Mason</a></li>
      
      <li><a href="http://tetamap.wordpress.com/feed/atom/">Holger Krekel</a></li>
      
      <li><a href="http://www.holger-peters.de/feeds/python.atom.xml">Holger Peters</a></li>
      
      <li><a href="https://blog.holoviz.org/index.xml">HoloViz</a></li>
      
      <li><a href="https://humberto.io/tags/python/index.xml">Humberto Rocha</a></li>
      
      <li><a href="https://hynek.me/feed-python.xml">Hynek Schlawack</a></li>
      
      <li><a href="http://ianozsvald.com/category/python/feed/atom/">Ian Ozsvald</a></li>
      
      <li><a href="http://ilian.i-n-i.org/feed/?tag=python">Ilian Iliev</a></li>
      
      <li><a href="http://importpython.com/blog/feed/">Import Python</a></li>
      
      <li><a href="https://www.inspiredpython.com/feed">Inspired Python</a></li>
      
      <li><a href="https://blog.ionelmc.ro/feeds/python.rss.xml">Ionel Cristian Maries</a></li>
      
      <li><a href="http://ironpython-urls.blogspot.com/feeds/posts/default">IronPython-URLs</a></li>
      
      <li><a href="https://islandtropicaman.com/wp/category/python/feed/">IslandT</a></li>
      
      <li><a href="http://fruch.github.io/feed.python.xml">Israel Fruchter</a></li>
      
      <li><a href="http://codewithoutrules.com/python-atom.xml">Itamar Turner Trauring</a></li>
      
      <li><a href="https://iximiuz.com/feed-python.atom">Ivan Velichko</a></li>
      
      <li><a href="https://pupeno.com/tag/python/feed/">J. Pablo Fernández</a></li>
      
      <li><a href="http://jackdied.blogspot.com/feeds/posts/default">Jack Diederich</a></li>
      
      <li><a href="http://feeds.feedburner.com/StreamHackerPython">Jacob Perkins</a></li>
      
      <li><a href="http://rahmonov.me/feeds/python.atom.xml">Jahongir Rahmonov</a></li>
      
      <li><a href="http://wrongsideofmemphis.wordpress.com/feed/atom/?tag=english+python">Jaime Buelta</a></li>
      
      <li><a href="http://www.datadependence.com/tag/python/feed/">Jamal Moir</a></li>
      
      <li><a href="https://www.b-list.org/feeds/entries/">James Bennett</a></li>
      
      <li><a href="https://janusworx.com/tags/planetpython/index.xml">Janusworx</a></li>
      
      <li><a href="http://blog.jarrodmillman.com/feeds/posts/default/-/python">Jarrod Millman</a></li>
      
      <li><a href="http://jbisbee.blogspot.com/feeds/posts/default/-/python">Jeff Bisbee</a></li>
      
      <li><a href="http://jeffbradberry.com/feeds/python.atom.xml">Jeff Bradberry</a></li>
      
      <li><a href="http://inre.dundeemt.com/category/python/feed/">Jeff Hinrichs</a></li>
      
      <li><a href="http://griddlenoise.blogspot.com/feeds/posts/default/-/python">Jeff Shell</a></li>
      
      <li><a href="http://greenash.net.au/thoughts/topics/python/rss/">Jeremy Epstein</a></li>
      
      <li><a href="http://jeremyhylton.blogspot.com/atom.xml">Jeremy Hylton</a></li>
      
      <li><a href="http://www.blogger.com/feeds/6330681631629046724/posts/default">Jim Fulton</a></li>
      
      <li><a href="http://pyrseas.wordpress.com/tag/python/feed/atom/">Joe Abbate</a></li>
      
      <li><a href="http://feeds.feedburner.com/JoePitz-TechnologyBlogPython">Joe Pitz</a></li>
      
      <li><a href="http://blogs.gnome.org/johan/category/python/feed/atom">Johan Dahlin</a></li>
      
      <li><a href="http://clouddbs.blogspot.com/feeds/posts/default/-/python">John Burns</a></li>
      
      <li><a href="http://www.johndcook.com/blog/category/python/feed/">John Cook</a></li>
      
      <li><a href="http://eigenhombre.com/feed.python.xml">John Jacobsen</a></li>
      
      <li><a href="https://www.nbshare.io/feeds/all.atom.xml">John Ludhi/nbshare.io</a></li>
      
      <li><a href="http://www.indelible.org/feeds/ink/python.xml">Jon Parise</a></li>
      
      <li><a href="http://spyced.blogspot.com/feeds/posts/default/-/python">Jonathan Ellis</a></li>
      
      <li><a href="http://feeds.feedburner.com/JonathansPythonBlog">Jonathan Harrington</a></li>
      
      <li><a href="https://www.tartley.com/categories/python.xml">Jonathan Hartley</a></li>
      
      <li><a href="http://jonathanstreet.com/blog/tag/python/atom/">Jonathan Street</a></li>
      
      <li><a href="http://blog.jorgenschaefer.de/feeds/posts/default/-/Python">Jorgen Schäfer</a></li>
      
      <li><a href="http://pythonmonopoly.wordpress.com/feed/">Juan Manuel Contreras</a></li>
      
      <li><a href="http://beauty-of-imagination.blogspot.fr/feeds/posts/default/-/python">Julien Tayon</a></li>
      
      <li><a href="http://www.iki.fi/juri/blog/index.rss">Juri Pakaste</a></li>
      
      <li><a href="http://feeds.hackercodex.com/feeds/python">Justin Mayer</a></li>
      
      <li><a href="http://lautaportti.wordpress.com/feed/atom/">Kai Lautaportti</a></li>
      
      <li><a href="https://www.afternerd.com/blog/tag/python/feed/">Karim Elghamrawy</a></li>
      
      <li><a href="http://nuitka.net/categories/Python.xml">Kay Hayen</a></li>
      
      <li><a href="http://fiber-space.de/wordpress/category/python/feed">Kay Schluehr</a></li>
      
      <li><a href="http://kbyanc.blogspot.com/feeds/posts/default/-/python">Kelly Yancey</a></li>
      
      <li><a href="https://kodnito.com/python/rss/">Kodnito</a></li>
      
      <li><a href="https://devblog.kogan.com/?category=Django&format=rss">Kogan Dev</a></li>
      
      <li><a href="http://konryd.blogspot.com/feeds/posts/default">Konrad Delong</a></li>
      
      <li><a href="https://koodaamo.wordpress.com/category/python/feed">Koodaamo</a></li>
      
      <li><a href="http://cosmicpercolator.com/category/python/feed/atom/">Kristján Valur Jónsson</a></li>
      
      <li><a href="http://blog.kritigodey.com/tag/python/rss">Kriti Godey</a></li>
      
      <li><a href="http://gofedora.com/archives/category/python/feed/">Kulbir Saini</a></li>
      
      <li><a href="http://farmdev.com/feeds/thoughts/on/3/python/">Kumar McMillan</a></li>
      
      <li><a href="https://vipin711.wordpress.com/category/python/feed/">Kumar Vipin Yadav</a></li>
      
      <li><a href="http://kushaldas.in/categories/python.xml">Kushal Das</a></li>
      
      <li><a href="http://charlesnagy.info/category/it/python/feed/">Károly Nagy</a></li>
      
      <li><a href="https://www.laac.dev/tags/python/index.xml">LAAC Technology</a></li>
      
      <li><a href="http://laurentszyster.be/blog/feed/">Laurent Szyster</a></li>
      
      <li><a href="http://hypatia.ca/tag/python/feed/">Leigh Honeywell</a></li>
      
      <li><a href="http://regebro.wordpress.com/category/python/feed/atom/">Lennart Regebro</a></li>
      
      <li><a href="http://leovt.wordpress.com/category/python/feed/atom/">Leonhard Vogt</a></li>
      
      <li><a href="http://blog.lintel.in/tag/python/feed/">Lintel Technologies</a></li>
      
      <li><a href="https://linuxstans.com/tag/python/feed/">Linux Stans</a></li>
      
      <li><a href="https://www.listendata.com/feeds/posts/default/-/Python">ListenData</a></li>
      
      <li><a href="http://feeds.feedburner.com/logilaborg_en">Logilab</a></li>
      
      <li><a href="http://codingandlinux.blogspot.com/feeds/posts/default/-/python">Luca Botti</a></li>
      
      <li><a href="https://chezsoi.org/shaarli/?do=atom&searchtags=python+FromPelican">Lucas Cimon</a></li>
      
      <li><a href="http://blog.gmludo.eu/feeds/posts/default/-/python">Ludovic Gasc</a></li>
      
      <li><a href="http://lukeplant.me.uk/blog/categories/python/atom/index.xml">Luke Plant</a></li>
      
      <li><a href="http://lostinjit.blogspot.com/feeds/posts/default">Maciej Fijalkowsk</a></li>
      
      <li><a href="https://madewith.mu/feed.xml">Made With Mu</a></li>
      
      <li><a href="http://sedimental.org/tagged/python/atom.xml">Mahmoud Hashemi</a></li>
      
      <li><a href="https://maltheborch.com/rss?tags=python">Malthe Borch</a></li>
      
      <li><a href="https://www.marc-richter.info/category/python/planet-python-articles/feed/">Marc Richter</a></li>
      
      <li><a href="http://www.malemburg.com/rss">Marc-André Lemburg</a></li>
      
      <li><a href="http://www.grulic.org.ar/~mdione/glob/categories/python.xml">Marcos Dione</a></li>
      
      <li><a href="http://mg.pov.lt/blog/index.xml">Marius Gedminas</a></li>
      
      <li><a href="http://shed-skin.blogspot.com/feeds/posts/default">Mark Dufour</a></li>
      
      <li><a href="http://blogs.gnome.org/markmc/category/python/feed/">Mark McLoughlin</a></li>
      
      <li><a href="http://pywinauto.blogspot.com/atom.xml">Mark McMahon</a></li>
      
      <li><a href="http://feeds.feedburner.com/zopatista/python">Martijn Pieters</a></li>
      
      <li><a href="https://www.mfitzp.com/feeds/python.tag.atom.xml">Martin Fitzpatrick</a></li>
      
      <li><a href="https://mathspp.com/blog/pydonts.rss">"Mathspp Pydon'ts"</a></li>
      
      <li><a href="http://mysqlmusings.blogspot.se/feeds/posts/default/-/python">Mats Kindahl</a></li>
      
      <li><a href="https://www.mattlayman.com/categories/python/index.xml">Matt Layman</a></li>
      
      <li><a href="http://matthewrocklin.com/blog/feed.python.xml">Matthew Rocklin</a></li>
      
      <li><a href="http://www.stealthcopter.com/blog/tag/python/feed/">Matthew Rollings</a></li>
      
      <li><a href="http://blog.tplus1.com/index.php/category/python/feed">Matthew Wilson</a></li>
      
      <li><a href="https://www.wrighters.io/category/python/feed/">Matthew Wright</a></li>
      
      <li><a href="http://copypasteprogrammer.blogspot.com/feeds/posts/default/-/python">Mattias Brändström</a></li>
      
      <li><a href="http://mauveweb.co.uk/rss.xml">Mauveweb</a></li>
      
      <li><a href="http://freshfoo.com/blog/index.atom">"Menno's Musings"</a></li>
      
      <li><a href="http://beckerfuffle.com/blog/categories/python/atom.xml">Michael Becker</a></li>
      
      <li><a href="http://mdboom.github.io/feeds/all.atom.xml">Michael Droettboom</a></li>
      
      <li><a href="https://agileabstractions.com/feed.xml">Michael Foord</a></li>
      
      <li><a href="http://mjtokelly.blogspot.com/feeds/posts/default/-/Python">"Michael J.T. O'Kelly"</a></li>
      
      <li><a href="http://micknelson.wordpress.com/category/python/feed/atom/">Michael Nelson</a></li>
      
      <li><a href="http://mousebender.wordpress.com/feed/atom/">Michal Kwiatkowski</a></li>
      
      <li><a href="https://bultrowicz.com/blog/tag/python/atom.xml">Michał Bultrowicz</a></li>
      
      <li><a href="http://www.artima.com/weblogs/feeds/bloggers/micheles.rss">Michele Simionato</a></li>
      
      <li><a href="http://www.firsttimeprogrammer.blogspot.com/feeds/posts/default/-/python?alt=rss">Michy Alice</a></li>
      
      <li><a href="http://blog.vrplumber.com/index.php?/feeds/categories/1-Snaking.rss">Mike C. Fletcher</a></li>
      
      <li><a href="http://www.blog.pythonlibrary.org/feed/">Mike Driscoll</a></li>
      
      <li><a href="http://python-academy.blogspot.com/feeds/posts/default">Mike Müller</a></li>
      
      <li><a href="http://kmike.ru/feeds/tags/planet-python.atom.xml">Mikhail Korobov</a></li>
      
      <li><a href="http://opensourcehacker.com/category/python/feed/">Mikko Ohtamaa</a></li>
      
      <li><a href="https://mirekdlugosz.com/blog/feeds/planet-python.atom.xml">Mirek Długosz</a></li>
      
      <li><a href="http://www.elastician.com/feeds/posts/default">Mitchell Garnaat</a></li>
      
      <li><a href="http://pythonbyexample.blogspot.com/feeds/posts/default/">Mitya Sirenef</a></li>
      
      <li><a href="http://montrealpython.com/feed/">Montreal Python User Group</a></li>
      
      <li><a href="http://blogologue.com/atom.xml?category=1470141490X3">"Morphex's Blogologue"</a></li>
      
      <li><a href="https://orbifold.xyz/feeds/all.atom.xml">Moshe Zadka</a></li>
      
      <li><a href="https://www.moyaproject.com/blog/feed/">Moya Project</a></li>
      
      <li><a href="http://blog.mozilla.com/webdev/category/python-2/feed/">Mozilla Web Development</a></li>
      
      <li><a href="http://muharem.wordpress.com/feed/atom/">Muharem Hrnjadovic</a></li>
      
      <li><a href="http://www.mycli.net/feeds/tag.python.rss.xml">Mycli</a></li>
      
      <li><a href="http://learnpython.wordpress.com/feed/atom/">Naomi Ceder</a></li>
      
      <li><a href="http://www.natan.termitnjak.net/blog/category/python/feed/atom/index.xml">Natan Zabkar</a></li>
      
      <li><a href="http://nedbatchelder.com/blog/planetpython.xml">Ned Batchelder</a></li>
      
      <li><a href="http://python.ca/nas/log/rss-python.xml">Neil Schemenauer</a></li>
      
      <li><a href="http://www.curiousefficiency.org/categories/python.xml">Nick Coghlan</a></li>
      
      <li><a href="http://blog.efford.org/tag/feeds/python.atom.xml">Nick Efford</a></li>
      
      <li><a href="http://nickjanetakis.blogspot.com/feeds/posts/default/-/python">Nick Janetakis</a></li>
      
      <li><a href="http://nicolaiarocci.com/tags/python/index.xml">Nicola Iarocci</a></li>
      
      <li><a href="http://www.nicosphere.net/tag/python-en/feed/">Nicolas Paris</a></li>
      
      <li><a href="http://nigelb.me/python.xml">Nigel Babu</a></li>
      
      <li><a href="http://feeds.feedburner.com/getnikola/QBjz">Nikola</a></li>
      
      <li><a href="https://nikos7am.com/index.xml">Nikolaos Diamantis</a></li>
      
      <li><a href="http://dev.nextthought.com/blog/categories/python.atom">Not Invented Here</a></li>
      
      <li><a href="https://nskm.xyz/tags/python/index.xml">Nsukami Patrick</a></li>
      
      <li><a href="http://www.obeythetestinggoat.com/feeds/all.atom.xml">Obey the Testing Goat</a></li>
      
      <li><a href="https://ofosos.org/tag/python/rss/">Ofosos</a></li>
      
      <li><a href="http://www.omahapython.org/blog/feed">Omaha Python Users Group</a></li>
      
      <li><a href="http://ondrejcertik.blogspot.com/feeds/posts/default/-/python">Ond&#345;ej &#268;ert&iacute;k</a></li>
      
      <li><a href="https://www.paulox.net/feed/python.xml">Paolo Melchiorre</a></li>
      
      <li><a href="http://s3.amazonaws.com/blog.pathwright.com/feeds/tag.Python.atom.xml">Pathwright</a></li>
      
      <li><a href="http://weblog.patrice.ch/tags/Python.atom">Patrice Neff</a></li>
      
      <li><a href="http://pauleveritt.wordpress.com/feed/atom/">Paul Everitt</a></li>
      
      <li><a href="http://www.logarithmic.net/pfh?action=atom;hasname=1;name=gcgmgpghfpgdgpgegf">Paul Harrison</a></li>
      
      <li><a href="http://codebright.wordpress.com/category/python/feed/atom/">Paul Redman</a></li>
      
      <li><a href="http://pedro.valelima.com/blog/feed/tag/python/">Pedro Lima</a></li>
      
      <li><a href="http://www.peterbe.com/oc-Python/rss.xml">Peter Bengtsson</a></li>
      
      <li><a href="http://petereisentraut.blogspot.com/feeds/posts/default/-/Python/">Peter Eisentraut</a></li>
      
      <li><a href="http://neovox.advancedmagic.de/?feed=rss2&cat=6">Peter Fankhänel</a></li>
      
      <li><a href="http://push.cx/tag/python/feed">Peter Harkins</a></li>
      
      <li><a href="http://peter-hoffmann.com/feed/atom-python.xml">Peter Hoffmann</a></li>
      
      <li><a href="http://www.philhassey.com/blog/category/python/feed">Phil Hassey</a></li>
      
      <li><a href="http://dunderboss.blogspot.com/feeds/posts/default/-/python">Philip Jenvey</a></li>
      
      <li><a href="http://philikon.wordpress.com/category/python/feed/atom/">Philipp von Weitershausen</a></li>
      
      <li><a href="http://base-art.net/Articles/rss.xml">Philippe Normand</a></li>
      
      <li><a href="http://feeds.feedburner.com/pje-on-programming">Phillip J. Eby</a></li>
      
      <li><a href="http://polyglot.ninja/category/python/feed/">Polyglot.Ninja()</a></li>
      
      <li><a href="https://blog.ironboundsoftware.com/category/python/feed.xml">Possbility and Probability</a></li>
      
      <li><a href="http://feeds.feedburner.com/btbytes_python">Pradeep Gowda</a></li>
      
      <li><a href="http://www.flicker-technical.blogspot.fr/feeds/posts/default/-/Python">Pranav Pandey</a></li>
      
      <li><a href="http://feeds.feedburner.com/shutupandship_python">Praveen Gollakota</a></li>
      
      <li><a href="https://www.programiz.com/python-programming/rss.xml">Programiz</a></li>
      
      <li><a href="https://programmingideaswithjake.wordpress.com/category/python/feed/rdf/">Programming Ideas With Jake</a></li>
      
      <li><a href="http://feeds.feedburner.com/Pycharm">PyCharm</a></li>
      
      <li><a href="https://pycoders.com/feed/planetpython">PyCoder’s Weekly</a></li>
      
      <li><a href="http://feeds.feedburner.com/PyCon">PyCon</a></li>
      
      <li><a href="https://www.pygame.org/news/feed/atom">pygame</a></li>
      
      <li><a href="https://www.pypy.org/rss.xml">PyPy</a></li>
      
      <li><a href="http://pytennessee.tumblr.com/rss">PyTennessee</a></li>
      
      <li><a href="http://python4kids.wordpress.com/feed/atom/">Python 4 Kids</a></li>
      
      <li><a href="http://www.awaretek.com/python/index.xml">Python 411 Podcast</a></li>
      
      <li><a href="http://python-advocacy.blogspot.com/atom.xml">Python Advocacy</a></li>
      
      <li><a href="http://blog.pythonanywhere.com/feed/">Python Anywhere</a></li>
      
      <li><a href="https://pythonbytes.fm/episodes/rss">Python Bytes</a></li>
      
      <li><a href="https://www.python-celery.com/feed.xml">Python Celery - Weekly Celery Tutorials and How-tos</a></li>
      
      <li><a href="https://www.pythoncircle.com/feed/">Python Circle</a></li>
      
      <li><a href="http://pythondata.com/feed/">Python Data</a></li>
      
      <li><a href="http://pythondoeswhat.blogspot.com/feeds/posts/default">Python Does What?!</a></li>
      
      <li><a href="https://blogs.msdn.microsoft.com/pythonengineering/feed/">Python Engineering at Microsoft</a></li>
      
      <li><a href="https://www.pythonguis.com/feeds/all.atom.xml">Python GUIs</a></li>
      
      <li><a href="http://feeds.feedburner.com/PythonInsider">Python Insider</a></li>
      
      <li><a href="https://www.pythonmorsels.com/topics/feed/">Python Morsels</a></li>
      
      <li><a href="https://pythonpeople.fm/rss">Python People</a></li>
      
      <li><a href="http://www.pyptug.org/feeds/posts/default/">Python Piedmont Triad User Group</a></li>
      
      <li><a href="https://www.pythonpool.com/feed/">Python Pool</a></li>
      
      <li><a href="http://pyfound.blogspot.com/atom.xml">Python Software Foundation</a></li>
      
      <li><a href="https://sweetness.hmmz.org/feeds/python.rss.xml">Python Sweetness</a></li>
      
      <li><a href="http://python-groups.blogspot.com/feeds/posts/default">Python User Groups</a></li>
      
      <li><a href="https://www.pythonforbeginners.com/feed/">Python for Beginners</a></li>
      
      <li><a href="http://python-karan.blogspot.in//feeds/posts/default">Python on Karan</a></li>
      
      <li><a href="http://developerblog.myo.com/tag/python/rss/">Python with Myo</a></li>
      
      <li><a href="http://pythonxynews.blogspot.com/feeds/posts/default">Python(x,y) News</a></li>
      
      <li><a href="http://pythonclub.com.br/feeds/all.atom.xml">PythonClub - A Brazilian collaborative blog about Python</a></li>
      
      <li><a href="http://pythondebugging.com/category/python/feed.xml">PythonDebugging.com</a></li>
      
      <li><a href="https://coady.github.io/index.xml">Pythonicity</a></li>
      
      <li><a href="http://pythonology.blogspot.com/atom.xml">Pythonology</a></li>
      
      <li><a href="https://pythonspeed.com/atom.xml">Python⇒Speed</a></li>
      
      <li><a href="http://ptspts.blogspot.com/feeds/posts/default/-/planet-python">Péter Szabó</a></li>
      
      <li><a href="http://blog.zsoldosp.eu/category/python/feed/">Péter Zsoldos</a></li>
      
      <li><a href="https://labs.quansight.org/rss.xml">Quansight Labs Blog</a></li>
      
      <li><a href="http://www.bitdance.com/blog/rss.xml">R David Murray</a></li>
      
      <li><a href="https://blog.rmotr.com/feed/tagged/python">RMOTR</a></li>
      
      <li><a href="http://threebean.org/blog/category/python/feed/atom/index.xml">Ralph Bean</a></li>
      
      <li><a href="https://blog.ram.rachum.com/tagged/planetpython/rss">Ram Rachum</a></li>
      
      <li><a href="http://blog.randell.ph/tag/python/feed/atom/">Randell Benavidez</a></li>
      
      <li><a href="http://randlet.com/blog/python/rss.xml">Randle Taylor</a></li>
      
      <li><a href="http://randyzwitch.com/tag/python/feed/">Randy Zwitch</a></li>
      
      <li><a href="http://rhettinger.wordpress.com/feed/atom/">Raymond Hettinger</a></li>
      
      <li><a href="http://blog.readthedocs.com/archive/tag/python/atom.xml">Read the Docs</a></li>
      
      <li><a href="https://realpython.com/atom.xml">Real Python</a></li>
      
      <li><a href="http://renesd.blogspot.com/feeds/posts/default/-/python">Rene Dudfield</a></li>
      
      <li><a href="http://posted-stuff.blogspot.com/feeds/posts/default/-/python">Richard Tew</a></li>
      
      <li><a href="http://blog.the-moon.net/feeds/posts/default/-/python">Richard Wall</a></li>
      
      <li><a href="http://rickardlindberg.me/tags/python/rss.xml">Rickard Lindberg</a></li>
      
      <li><a href="https://cmlzagk.github.io/feeds/python.atom.xml">Rishi Maker</a></li>
      
      <li><a href="http://www.robg3d.com/?tag=python&feed=atom">Rob Galanakis</a></li>
      
      <li><a href="http://rbtcollins.wordpress.com/tag/python/feed/atom/">Robert Collins</a></li>
      
      <li><a href="http://rz.scale-it.pl/rss-python.html">Robert Zaremba</a></li>
      
      <li><a href="http://www.theatreofnoise.com/feeds/posts/default/-/dev">Robin Parmar</a></li>
      
      <li><a href="http://blog.rtwilson.com/category/programming-2/python/feed/">Robin Wilson</a></li>
      
      <li><a href="http://linil.wordpress.com/feed/atom/">Rodrigo Araúj</a></li>
      
      <li><a href="https://www.rosehosting.com/blog/tag/python/feed/">RoseHosting Blog</a></li>
      
      <li><a href="http://ruslanspivak.com/category/python/feed/atom/">Ruslan Spivak</a></li>
      
      <li><a href="http://www.asciiarmor.com/tagged/python/rss">Ryan Cox</a></li>
      
      <li><a href="http://slott-softwarearchitect.blogspot.com/feeds/posts/default/-/python">S. Lott</a></li>
      
      <li><a href="https://pyhelper.wordpress.com/feed/">S. R. Krishnan</a></li>
      
      <li><a href="http://www.sdjournal.com/archives/categories/languages/python/rss.xml">SDJournal</a></li>
      
      <li><a href="http://pythonide.blogspot.com/feeds/posts/default">SPE Weblog</a></li>
      
      <li><a href="http://feeds.feedburner.com/sfpy">Salim Fadhley</a></li>
      
      <li><a href="https://sandipanweb.wordpress.com/category/python/feed/">Sandipan Dey</a></li>
      
      <li><a href="http://sandrotosi.blogspot.com/feeds/posts/default/-/Python">Sandro Tosi</a></li>
      
      <li><a href="http://seanmcgrath.blogspot.com/feeds/posts/default/-/python">Sean McGrath</a></li>
      
      <li><a href="https://k-d-w.org/tags/python/index.xml">Sebastian Pölsterl</a></li>
      
      <li><a href="https://switowski.com/python.feed.xml">Sebastian Witowski</a></li>
      
      <li><a href="http://www.chesnok.com/daily/category/python/feed/">Selena Deckelmann</a></li>
      
      <li><a href="http://feeds.feedburner.com/phoe6pythonfeeds">Senthil Kumaran</a></li>
      
      <li><a href="https://sethmlarson.dev/feed">Seth Michael Larson</a></li>
      
      <li><a href="http://jjinux.blogspot.com/feeds/posts/default/-/python">Shannon -jj Behrens</a></li>
      
      <li><a href="http://simeonfranklin.com/feeds/python/">Simeon Franklin</a></li>
      
      <li><a href="http://feeds.feedburner.com/simeon_visser_python">Simeon Visser</a></li>
      
      <li><a href="http://aboutsimon.com/category/python/feed/atom/">Simon</a></li>
      
      <li><a href="http://www.brunningonline.net/simon/blog/index-P.xml">Simon Brunning</a></li>
      
      <li><a href="http://entitycrisis.blogspot.com/feeds/posts/default/-/Python">Simon Wittber</a></li>
      
      <li><a href="https://simpleisbetterthancomplex.com/feed.xml">Simple is Better Than Complex</a></li>
      
      <li><a href="http://www.softformance.com/feed/?tag=python">SoftFormance</a></li>
      
      <li><a href="https://brmmm3.github.io/feed.xml">Speed Matters</a></li>
      
      <li><a href="http://speno.blogspot.com/atom.xml">"Speno's Pythonic Avocado"</a></li>
      
      <li><a href="http://spikeekips.tumblr.com/tagged/python/rss">Spike ekipS</a></li>
      
      <li><a href="https://www.spyder-ide.org/blog/feed.xml">Spyder IDE</a></li>
      
      <li><a href="http://stackabuse.com/tag/python/rss">Stack Abuse</a></li>
      
      <li><a href="https://smorbieu.gitlab.io/feeds/tag_python.atom.xml">Stanislas Morbieu</a></li>
      
      <li><a href="http://blog.behnel.de/index.php?feed=rss2&cat=22">Stefan Behnel</a></li>
      
      <li><a href="http://stefan.sofa-rockers.org/feeds/python">Stefan Scherfke</a></li>
      
      <li><a href="http://www.jodal.no/atom-python.xml">Stein Magnus Jodal</a></li>
      
      <li><a href="http://pythonconquerstheuniverse.wordpress.com/feed/atom/">Stephen Ferg</a></li>
      
      <li><a href="http://holdenweb.blogspot.com/feeds/posts/default/-/python">Steve Holden</a></li>
      
      <li><a href="http://rh0dium.blogspot.com/feeds/posts/default/-/python">Steven Klass</a></li>
      
      <li><a href="http://TuringFinance.com/category/python/feed/">Stuart Gordon Reid</a></li>
      
      <li><a href="https://wirtel.be/tags/python/index.xml">Stéphane Wirtel</a></li>
      
      <li><a href="https://www.harihareswara.net/rss/python/">Sumana Harihareswara - Cogito, Ergo Sumana</a></li>
      
      <li><a href="https://www.tutlane.com/pythonfeed.xml">Suresh Dasari/Tutlane.com</a></li>
      
      <li><a href="https://ict.swisscom.ch/feed/?post_type=cubetech_post&cubetech_keyword=Python">Swisscom ICT</a></li>
      
      <li><a href="http://www.talkpythontome.com/episodes/rss">Talk Python to Me</a></li>
      
      <li><a href="http://blog.tedmiston.com/tag/python/rss">Taylor Edmiston</a></li>
      
      <li><a href="https://www.techbeamers.com/python-programming-tutorials/feed/">TechBeamers Python</a></li>
      
      <li><a href="https://www.techiediaries.com/tag/django/index.xml">Techiediaries - Django</a></li>
      
      <li><a href="http://terriko.dreamwidth.org/data/rss?tag=python">Terri Oda</a></li>
      
      <li><a href="http://blogs.fluidinfo.com/terry/category/python/feed/atom/">Terry Jones</a></li>
      
      <li><a href="http://testandcode.com/rss">Test and Code</a></li>
      
      <li><a href="https://testdriven.io/blog/topics/django/feed.xml">TestDriven.io</a></li>
      
      <li><a href="http://www.thedatascientist.de/category/python/feed/">The Data Scientist</a></li>
      
      <li><a href="https://www.thedigitalcatonline.com/categories/python/atom.xml">The Digital Cat</a></li>
      
      <li><a href="https://lunarcowboy.com/feeds/python.atom.xml">The Lunar Cowboy</a></li>
      
      <li><a href="https://no-title.victordomingos.com/feeds/python_rss.xml">The No Title® Tech Blog</a></li>
      
      <li><a href="http://blog.dowski.com/category/python/feed">The Occasional Occurrence</a></li>
      
      <li><a href="https://fortintam.com/blog/category/planet-python/feed/">The Open Sourcerer</a></li>
      
      <li><a href="http://blog.parcon.opengroove.org/feeds/posts/default">The Parcon Blog</a></li>
      
      <li><a href="https://thepythoncodingbook.com/feed/">The Python Coding Blog</a></li>
      
      <li><a href="https://threeofwands.com/tag/python/rss/">The Three of Wands</a></li>
      
      <li><a href="http://www.tibonihoo.net/blog/en/tag/python/feed/">Thibauld Nion</a></li>
      
      <li><a href="https://thishosting.rocks/tag/python/feed/">ThisHosting.Rocks</a></li>
      
      <li><a href="http://feeds.wordaligned.org/wordaligned/python">Thomas Guest</a></li>
      
      <li><a href="http://thomas.apestaart.org/log/?feed=rss2&cat=22">Thomas Vander Stichele</a></li>
      
      <li><a href="https://www.tibobeijen.nl/tags/python/index.xml">Tibo Beijen</a></li>
      
      <li><a href="https://reachtim.com/feeds/python.atom.xml">Tim Arnold / reachtim</a></li>
      
      <li><a href="http://timgilbert.wordpress.com/category/python/feed/atom/">Tim Gilbert</a></li>
      
      <li><a href="http://feeds.feedburner.com/duffyd">Tim Knapp</a></li>
      
      <li><a href="http://apipes.blogspot.com/feeds/posts/default/-/python">Tim Lesher</a></li>
      
      <li><a href="http://feeds.feedburner.com/thobe/wardrobe">Tobias Ivarsson</a></li>
      
      <li><a href="http://thewebhaswon.wordpress.com/category/python/atom">Tom Christie</a></li>
      
      <li><a href="http://www.sys-exit.blogspot.com/feeds/posts/default/-/python">Tomasz Ducin</a></li>
      
      <li><a href="http://www.tomaz.me/tags/python.xml">Tomaž Muraus</a></li>
      
      <li><a href="http://tomerfiliba.com/blog/python-atom.xml">Tomer Filiba</a></li>
      
      <li><a href="http://tonybreyal.wordpress.com/category/python/feed/atom/">Tony Breyal</a></li>
      
      <li><a href="http://anonbadger.wordpress.com/tag/python/feed/atom/">Toshio Kuratomi</a></li>
      
      <li><a href="http://technicaldiscovery.blogspot.com/feeds/posts/default/-/python">Travis Oliphant</a></li>
      
      <li><a href="https://treyhunner.com/python.xml">Trey Hunner</a></li>
      
      <li><a href="http://www.tryton.org/rss.xml">Tryton News</a></li>
      
      <li><a href="http://www.turnkeylinux.org/taxonomy/term/103/0/feed">Turnkey Linux</a></li>
      
      <li><a href="https://typethepipe.com/categories/python/index.xml">TypeThePipe</a></li>
      
      <li><a href="http://vsbabu.org/mt/index.rdf">V.S. Babu</a></li>
      
      <li><a href="http://prayogshala.wordpress.com/category/scripting/python/feed/atom/">Varun Nischal</a></li>
      
      <li><a href="http://jugad2.blogspot.co.uk/feeds/posts/default/-/python">Vasudev Ram</a></li>
      
      <li><a href="http://pymolurus.blogspot.com/feeds/posts/default">Vinay Sajip</a></li>
      
      <li><a href="http://plumberjack.blogspot.com/feeds/posts/default">Vinay Sajip (Logging)</a></li>
      
      <li><a href="https://vinayak.io/feed/tag/python/rss.xml">Vinayak Mehta</a></li>
      
      <li><a href="http://www.vperic.blogspot.com/feeds/posts/default/-/Twisted">Vladimir Perić</a></li>
      
      <li><a href="http://pieceofpy.com/category/python/feed/atom/index.xml">Wayne Witzel</a></li>
      
      <li><a href="http://www.weeklypython.chat/feed/">Weekly Python Chat</a></li>
      
      <li><a href="http://python-weekly.blogspot.com/feeds/posts/default?alt=rss">Weekly Python StackOverflow Report</a></li>
      
      <li><a href="http://1stvamp.org/tag/python/atom/">Wes Mason</a></li>
      
      <li><a href="http://wescpy.blogspot.com/feeds/posts/default/-/python">Wesley Chun</a></li>
      
      <li><a href="http://bluesock.org/~willkg/blog/tag/python.xml">Will Kahn-Greene</a></li>
      
      <li><a href="http://www.willmcgugan.com/blog/tech/feeds/posts/">Will McGugan</a></li>
      
      <li><a href="http://willpython.blogspot.com/feeds/posts/default">Will Pierce</a></li>
      
      <li><a href="http://blog.minchin.ca/feeds/label.python.atom.xml">William Minchin</a></li>
      
      <li><a href="http://foolish-assertions.blogspot.com/feeds/posts/default/-/python">William Reade</a></li>
      
      <li><a href="http://william-os4y.livejournal.com/data/atom">"William's Journal"</a></li>
      
      <li><a href="http://wingware.com/blog/rss&noheader=1">Wing Tips</a></li>
      
      <li><a href="http://wingware.com/news/rss&noheader=1">Wingware</a></li>
      
      <li><a href="https://wyattbaldwin.com/categories/planet-python/rss.xml">Wyatt Baldwin</a></li>
      
      <li><a href="http://tech.blog.aknin.name/tag/python/feed/atom/">Yaniv Aknin</a></li>
      
      <li><a href="http://www.ylarrivee.com/tag/python/feed/">Yann Larrivée</a></li>
      
      <li><a href="http://uberpython.wordpress.com/tag/python/feed/atom/">Yuval Greenfield</a></li>
      
      <li><a href="http://za.github.io/feed.python.xml">Zaki Akhmad</a></li>
      
      <li><a href="https://zato.io/blog/rss.xml">Zato Blog</a></li>
      
      <li><a href="https://zerotomastery.io/rss/python-rss.xml">Zero to Mastery</a></li>
      
      <li><a href="https://zerowithdot.com/feed.xml">Zero-with-Dot (Oleg Żero)</a></li>
      
      <li><a href="https://medium.com/feed/@ZeroDB_">ZeroDB</a></li>
      
      <li><a href="http://blog.bottlepy.org/feeds/all.atom.xml">bottlepy-dev</a></li>
      
      <li><a href="http://feeds.feedburner.com/codeboje_python">codeboje</a></li>
      
      <li><a href="https://death.andgravity.com/_feed/index/_tags/python.xml">death and gravity</a></li>
      
      <li><a href="http://www.egenix.com/company/news/rss2">eGenix.com</a></li>
      
      <li><a href="http://hypothesis.works/articles/python/feed/">hypothesis.works articles</a></li>
      
      <li><a href="http://scummos.blogspot.com/feeds/posts/default/-/kdev-python">kdev-python</a></li>
      
      <li><a href="https://meejah.ca/planetpython.xml">meejah.ca</a></li>
      
      <li><a href="http://nl-project.blogspot.com/feeds/posts/default/-/python">nl-project</a></li>
      
      <li><a href="http://pgcli.com/feeds/tag.python.atom.xml">pgcli</a></li>
      
      <li><a href="https://py.checkio.org/blog/special-rss/">py.CheckIO</a></li>
      
      <li><a href="http://www.pythonwise.blogspot.com/feeds/posts/default/-/python">pythonwise</a></li>
      
      <li><a href="http://blog.qutebrowser.org/feeds/tag-pyplanet.rss.xml">qutebrowser development blog</a></li>
      
      <li><a href="http://recollection.saaj.me/tag/python.xml">saaj/recollection</a></li>
      
      <li><a href="https://blog.scikit-learn.org/feed.xml">scikit-learn</a></li>
      
      <li><a href="https://testmon.org/index.xml">testmon</a></li>
      
      <li><a href="http://tryexceptpass.org/index.xml">tryexceptpass</a></li>
      
      <li><a href="http://wokslog.wordpress.com/tag/python/feed/atom/">Éric Araujo</a></li>
      
      <li><a href="https://lukasz.langa.pl/python/atom.xml">Łukasz Langa</a></li>
      
      <li><a href="https://www.pythonshow.com/feed">The Python Show</a></li>
      
      <li><a href="https://stefaniemolin.com/feeds/Python-atom.xml">Stefanie Molin</a></li>
      
      <li><a href="https://bugfactory.io/articles-on-python/feed.xml">Christoph Schiessl</a></li>
      
    </ul>
  </div>
</ul>

      </div>
    </div>
  </body>
</html>