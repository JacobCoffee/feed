<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Planet Python - Page 9</title>
    <link href="styles.css" rel="stylesheet" />
  </head>
  <body class="h-full">
    <div class="drawer lg:drawer-open h-full">
      <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />
      <div class="drawer-content flex flex-col h-full">
        <div class="navbar bg-base-100 lg:hidden">
          <div class="flex-none">
            <label
              for="my-drawer-2"
              class="btn btn-square btn-ghost drawer-button"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                class="inline-block w-5 h-5 stroke-current"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path>
              </svg>
            </label>
          </div>
          <div class="flex-1">
            <a class="btn btn-ghost normal-case text-xl">Planet Python</a>
          </div>
        </div>
        
<div
  class="h-full overflow-y-auto p-4 bg-gradient-to-br from-base-200 to-base-300"
>
  <h1 class="text-4xl font-bold mb-6 text-center text-primary">
    Planet Python - Page 9
  </h1>
  <div class="mt-8"><div class="btn-group my-4"><a href="index8.html" class="btn">«</a><a href="index7.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">7</a><a href="index8.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">8</a><button class="btn btn-active hover:bg-primary hover:shadow-lg hover:shadow-primary/50">9</button><a href="index10.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">10</a><a href="index10.html" class="btn">»</a></div></div>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.b-list.org/weblog/2024/nov/18/djangover/" class="hover:underline"
              >Introducing DjangoVer</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>Version numbering is hard, and there are lots of popular schemes out there for how to do it. Today I want to talk about a system I’ve settled on for my own Django-related packages, and which I’m calling “DjangoVer”, because it ties the version number of a Django-related package to the latest Django version that package&nbsp;supports.</p>
<p>But one quick note to start with: this is not really “introducing” the idea of DjangoVer, because I know I’ve used the name a few times already in other places. I’m also not the person who invented this, and I don’t know for certain who <em>did</em> — I’ve seen several packages which appear to follow some form of DjangoVer and took inspiration from them in defining my own take on&nbsp;it.</p>
<h3>Django’s version scheme: an&nbsp;overview</h3>
<p>The basic idea of DjangoVer is that the version number of a Django-related package should tell you which version of Django you can use it with.  Which probably doesn’t help much if you don’t know how Django releases are numbered, so let’s start there. In&nbsp;brief:</p>
<ul>
<li>Django issues a “feature release” — one which introduces new features — roughly once every eight months. The current feature release series of Django is&nbsp;5.1.</li>
<li>Django issues “bugfix releases” — which fix bugs in one or more feature releases — roughly once each month. As I write this, the latest bugfix release for the 5.1 feature release series is 5.1.3 (along with Django 5.0.9 for the 5.0 feature release series, and Django 4.2.16 for the 4.2 feature release&nbsp;series).</li>
<li>The version number scheme is <code>MAJOR.FEATURE.BUGFIX</code>, where <code>MAJOR</code>, <code>FEATURE</code>, and <code>BUGFIX</code> are&nbsp;integers.</li>
<li>The <code>FEATURE</code> component starts at <code>0</code>, then increments to <code>1</code>, then to <code>2</code>, then <code>MAJOR</code> is incremented and <code>FEATURE</code> goes back to <code>0</code>. <code>BUGFIX</code> starts at <code>0</code> with each new feature release, and increments for the bugfix releases for that feature&nbsp;release.</li>
<li>Every feature release whose <code>FEATURE</code> component is <code>2</code> is a long-term support (“<span class="caps">LTS</span>”)&nbsp;release.</li>
</ul>
<p>This has been in effect since Django 2.0 was released, and the feature releases have been: 2.0, 2.1, 2.2 (<span class="caps">LTS</span>); 3.0, 3.1, 3.2 (<span class="caps">LTS</span>); 4.0, 4.1, 4.2 (<span class="caps">LTS</span>); 5.0, 5.1. Django 5.2 (<span class="caps">LTS</span>) is expected in April 2025, and then eight months later (if nothing is changed) will come Django&nbsp;6.0.</p>
<p>I’ll talk more about SemVer in a bit, but it’s worth being crystal clear that Django does <em>not</em> follow Semantic Versioning, and the <code>MAJOR</code> number is <em>not</em> a signal about <span class="caps">API</span> compatibility. Instead, <span class="caps">API</span> compatibility runs <span class="caps">LTS</span>-to-<span class="caps">LTS</span>, with a simple principle: if your code runs on a Django <span class="caps">LTS</span> release and <a href="https://www.b-list.org/weblog/2023/dec/19/show-python-deprecation-warnings/">raises no deprecation warnings</a>, it will run unmodified on the next <span class="caps">LTS</span> release. So, for example, if you have an application that runs without deprecation warnings on Django 4.2 <span class="caps">LTS</span>, it will run unmodified on Django 5.2 <span class="caps">LTS</span> (though at that point it might begin raising new deprecation warnings, and you’d need to clear them before it would be safe to upgrade any&nbsp;further).</p>
<h3>DjangoVer,&nbsp;defined</h3>
<p>In DjangoVer, a Django-related package has a version number of the form <code>DJANGO_MAJOR.DJANGO_FEATURE.PACKAGE_VERSION</code>, where <code>DJANGO_MAJOR</code> and <code>DJANGO_FEATURE</code> indicate the most recent feature release series of Django supported by the package, and <code>PACKAGE_VERSION</code> begins at zero and increments by one with each release of the package supporting that feature release of&nbsp;Django.</p>
<p>Since the version number only indicates the newest Django feature release supported, a package using DjangoVer should also use Python package classifiers to indicate the full range of its Django support (such as <code>Framework :: Django :: 5.1</code> to indicate support for Django 5.1 — <a href="https://pypi.org/search/?q=&amp;o=&amp;c=Framework+%3A%3A+Django&amp;c=Framework+%3A%3A+Django+%3A%3A+5.1">see examples on PyPI</a>).</p>
<p>But while Django takes care to maintain compatibility from one <span class="caps">LTS</span> to the next, I do <em>not</em> think DjangoVer packages need to do that; they can use the simpler approach of issuing deprecation warnings for two releases, and then making the breaking change. One of the stated reasons for Django’s <span class="caps">LTS</span>-to-<span class="caps">LTS</span> compatibility policy is to help third-party packages have an easier time supporting Django releases that people are actually likely to use; otherwise, Django itself generally just follows the “deprecate for two releases, then remove it” pattern. No matter what compatibility policy is chosen, however, it should be documented clearly, since DjangoVer explicitly does not attempt to provide any information about <span class="caps">API</span> stability/compatibility in the version&nbsp;number.</p>
<p>That’s a bit wordy, so let’s try an&nbsp;example:</p>
<ul>
<li>If you started a new Django-related package today, you’d (hopefully) support the most recent Django feature release, which is 5.1. So the DjangoVer version of your package should be <code>5.1.0</code>.</li>
<li>As long as Django 5.1 is the newest Django feature release you support, you’d increment the third digit of the version number. As you add features or fix bugs you’d release <code>5.1.1</code>, <code>5.1.2</code>,&nbsp;etc.</li>
<li>When Django 5.2 comes out next year, you’d (hopefully) add support for it. When you do, you’d set your package’s version number to <code>5.2.0</code>. This would be followed by <code>5.2.1</code>, <code>5.2.2</code>, etc., and then eight months later by <code>6.0.0</code> to support Django&nbsp;6.0.</li>
<li>If version <code>5.1.0</code> of your package supports Django 5.1, 5.0, and 4.2 (the feature releases receiving upstream support from Django at the time of the 5.1 release), it should indicate that by including the <code>Framework :: Django</code>, <code>Framework :: Django :: 4.2</code>, <code>Framework :: Django :: 5.0</code>, and <code>Framework :: Django :: 5.1</code> classifiers in its package&nbsp;metadata.</li>
</ul>
<h3>Why another version&nbsp;system?</h3>
<p>Some of you probably didn’t even read this far before rushing to instantly post the <span class="caps">XKCD</span> “Standards” comic as a reply. Thank you in advance for letting the rest of us know we don’t need to bother listening to or engaging with you. For everyone else: here’s why I think in this case adding yet another “standard” is actually a good&nbsp;idea.</p>
<p>The elephant in the room here is <a href="https://semver.org">Semantic Versioning</a> (“SemVer”). <a href="https://hynek.me/articles/semver-will-not-save-you/">Others</a> have <a href="https://sedimental.org/designing_a_version.html#semantic-versioning">written</a> about some of the problems with SemVer, but I’ll add my own two cents here: “compatibility” is far too complex and nebulous a concept to be usefully encoded in a simple value like a version number. And if you want my really cynical take, the actual point of SemVer in practice is to protect developers of software from users, by providing endless loopholes and ways to say “sure, this change broke your code, but that doesn’t count as a breaking change”. It’ll turn out that the developer had a different interpretation of the documentation than you did, or that the <span class="caps">API</span> contract was “underspecified” and now has been “clarified”, or they’ll just throw their hands up, yell “Hyrum’s Law” and say they can’t possibly be expected to preserve <em>that</em>&nbsp;behavior.</p>
<p>A lot of this is rooted in the belief that changes, and especially breaking changes, are inherently bad and shameful, and that if you introduce them you’re a bad developer who should be ashamed. Which is, frankly, bullshit. Useful software almost always evolves and changes over time, and it’s unrealistic to expect it not to. I wrote about this a few years back <a href="https://www.b-list.org/weblog/2020/may/05/python/">in the context of the Python 2/3 transition</a>:</p>
<blockquote>
<p>Though there is one thing I think gets overlooked a lot: usually, the anti-Python-3 argument is presented as the desire of a particular company, or project, or person, to stand still and buck the trend of the world to be&nbsp;ever-changing.</p>
<p>But really they’re asking for the inverse of that. Rather than being a fixed point in a constantly-changing world, what they really seem to want is to be the only ones still moving in a world that has become static around them. If only the Python team would stop fiddling with the language! If only the maintainers of popular frameworks would stop evolving their APIs! Then we could finally stop worrying about our dependencies and get on with our real work! Of course, it’s logically impossible for each one of those entities to be the sole mover in a static world, but pointing that out doesn’t always go&nbsp;well.</p>
</blockquote>
<p>But that’s a rant for another day and another full post all its own. For now it’s enough to just say I don’t believe SemVer can ever deliver on what it promises. So where does that leave&nbsp;us?</p>
<p>Well, if the version number can’t tell you whether it’s safe to upgrade from one version to another, perhaps it can still tell you something useful. And for me, when I’m evaluating a piece of third-party software for possible use, one of the most important things I want to know is: <em>is someone actually maintaining this?</em> There are lots of potential signals to look for, but some version schemes — like <a href="https://calver.org">CalVer</a> — can encode this into the version number. Want to know if the software’s maintained? With CalVer you can guess a package’s maintenance status, with pretty good accuracy, from a glance at the version&nbsp;number.</p>
<p>Over the course of this year I’ve been transitioning all my personal non-Django packages to CalVer for precisely this reason. Compatibility, again, is something I think can’t possibly be encoded into a version number, but “someone’s keeping an eye on this” <em>can</em> be. Even if I’m not adding features to something, Python itself does a new version every year and I’ll push a new release to explicitly mark compatibility (as I did recently for the release of Python 3.13). That’ll bump the version number and let anyone who takes a quick glance at it know I’m still there and paying attention to the&nbsp;package.</p>
<p>For packages meant to be used with Django, though, the version number can usefully encode another piece of information: not just “is someone maintaining this”, but “can I use this with my Django installation”. And that is what DjangoVer is about: telling you at a glance the maintenance and Django compatibility status of a&nbsp;package.</p>
<h3>DjangoVer in&nbsp;practice</h3>
<p>All of my own personal <a href="https://www.b-list.org/projects/">Django-related packages</a> are now using DjangoVer, and say so in their documentation. If I start any new Django-related projects they’ll do the same&nbsp;thing.</p>
<p>A quick scroll through PyPI turns up other packages doing something that looks similar; <a href="https://pypi.org/project/django-cockroachdb/">django-cockroachdb</a> and <a href="https://pypi.org/project/django-snowflake/">django-snowflake</a>, for example, versioned their Django 5.1 packages as “5.1”, and explicitly say in their READMEs to install a package version corresponding to the Django version you use (they also have a maintainer in common, who I suspect of having been an early inventor of what I&#8217;m now calling&nbsp;&#8220;DjangoVer&#8221;).</p>
<p>If you maintain a Django-related package, I’d encourage you to at least think about adopting some form of DjangoVer, too. I won’t say it’s the best, period, because something better could always come along, but in terms of information that can be usefully encoded into the version number, I think DjangoVer is the best option I’ve seen for Django-related&nbsp;packages.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 18, 2024 08:04 AM UTC by
            <a href="https://www.b-list.org/feeds/entries/" class="link link-hover text-primary"
              >James Bennett</a
            >
          </div>
          <a
            href="https://www.b-list.org/weblog/2024/nov/18/djangover/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://pythonbytes.fm/episodes/show/410/entering-the-django-core" class="hover:underline"
              >#410 Entering the Django core</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            Topics include Thoughts on Django’s Core, futurepool, Don't return named tuples in new APIs, and Ziglang: Migrating from AWS to Self-Hosting.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 18, 2024 08:00 AM UTC by
            <a href="https://pythonbytes.fm/episodes/rss" class="link link-hover text-primary"
              >Python Bytes</a
            >
          </div>
          <a
            href="https://pythonbytes.fm/episodes/show/410/entering-the-django-core"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="http://lucumr.pocoo.org/2024/11/18/threads-beat-async-await" class="hover:underline"
              >Playground Wisdom: Threads Beat Async/Await</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>It's been a few years since I wrote about my challenges with
<cite>async</cite>/<cite>await</cite>-based systems and how they just seem to not <a class="reference external" href="http://lucumr.pocoo.org/2020/1/1/async-pressure/">support back
pressure well</a>.  A few years later, I do not
think that this problem has subsided much, but my thinking and
understanding have perhaps evolved a bit.  I'm now convinced that
<cite>async</cite>/<cite>await</cite> is, in fact, a bad abstraction for most languages, and we
should be aiming for something better instead and that I believe to be
thread.</p>
<p>In this post, I'm also going to rehash many arguments from very clever
people that came before me.  Nothing here is new, I just hope to bring it
to a new group of readers.  In particular, you should really consider
these who highly influential pieces:</p>
<ul class="simple">
<li>Bob Nystrom's <a class="reference external" href="https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/">What Color is Your Function</a>
post, which makes a very strong case that having two types of functions,
which are only compatible in one direction, causes problems.</li>
<li>Ron Pressler's <a class="reference external" href="https://www.youtube.com/watch?v=449j7oKQVkc">Please stop polluting our imperative languages with pure
concepts</a> which I think
is probably the single most important talk on that topic.</li>
<li>Nathaniel J. Smith's <a class="reference external" href="https://vorpus.org/blog/notes-on-structured-concurrency-or-go-statement-considered-harmful/">Notes on structured concurrency, or: Go statement
considered harmful</a>
which does a really good job laying out the motivation for structured
concurrency.</li>
</ul>
<div class="section" id="your-child-loves-actor-frameworks">
<h2>Your Child Loves Actor Frameworks</h2>
<p>As programmers, we are so used to how things work that we make some
implicit assumptions that really cloud our ability to think freely.  Let
me present you with a piece of code that demonstrates this:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">move_mouse</span><span class="p">():</span>
    <span class="k">while</span> <span class="n">mouse</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">mouse</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">move_cat</span><span class="p">():</span>
    <span class="k">while</span> <span class="n">cat</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">cat</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">10</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="n">move_mouse</span><span class="p">()</span>
<span class="n">move_cat</span><span class="p">()</span>
</pre></div>
<p>Read that code and then answer this question: do the mouse and cat move at
the same time, or one after another?  I guarantee you that 10 out of 10
programmers will correctly state that they move one after another.  It
makes sense because we know Python and the concept of threads, scheduling
and whatnot.  But if you speak to a group of children familiar with
<a class="reference external" href="https://en.wikipedia.org/wiki/Scratch_(programming_language)">Scratch</a>,
they are likely to conclude that mouse and cat move simultaneously.</p>
<p>The reason is that if you are exposed to programming via Scratch you are
exposed to a primitive form of actor programming.  The cat and the mouse
are both actors.  In fact, the UI makes this pretty damn clear, just that
the actors are called “sprites”.  You attach logic to a sprite on the
screen and all these pieces of logic run <em>at the same time</em>.
Mind-blowing.  You can even send messages from sprite to sprite.</p>
<p>The reason I want you to think about this for a moment is that I think
this is rather profound.  Scratch is a very, very simple system and it's
intended to teaching programming to young kids.  Yet the model it promotes
is an actor system!  If you were to foray into programming via a
traditional book on Python, C# or some other language, it's quite likely
that you will only learn about threads at the very end.  Not just that, it
will likely make it sound really complex and scary.  Worse, you will
probably only learn about actor patterns in some advanced book that will
bombard you with all the complexities of large scale applications.</p>
<p>There is something else though you should keep in mind: Scratch will not
talk about threads, it will not talk about monads, it will not talk about
<cite>async</cite>/<cite>await</cite>, it will not talk about schedulers.  As far as you are
concerned as a programmer, it's an imperative (though colorful and visual)
language with some basic “syntax” support for message passing.
Concurrency comes natural.  A child can program it.  It's not something to
be afraid of.</p>
</div>
<div class="section" id="imperative-programming-is-not-inferior">
<h2>Imperative Programming Is Not Inferior</h2>
<p>The second thing I want you to take away is that imperative languages are
not inferior to functional ones.</p>
<p>While probably most of us are using imperative programming languages to
solve problems, I think we all have been exposed to the notion that it's
inferior and not particularly pure.  There is this world of functional
programming, with monads and other things.  This world have these nice things
involving composition, logic and maths and fancy looking theorems.  If you
program in that, you're almost transcending to a higher plane and looking
down to the folks who are stitching together if statements, for loops,
make side effects everywhere, and are doing highly inappropriate things
with IO.</p>
<p>Okay, maybe it's not quite as bad, but I don't think I'm completely wrong
with those vibes.  And look, I get it.  I feel happy chaining together
lambdas in Rust and JavaScript.  But we should also be aware that these
constructs are, in many languages, bolted on.  Go, for instance, gets away
without most of this, and that does not make it an inferior language!</p>
<p>So what you should keep in mind here is that there are different
paradigms, and mentally you should try to stop thinking for a moment that
functional programming has all its stuff figured out, and imperative
programming does not.</p>
<p>Instead, I want to talk about how functional languages and imperative
languages are dealing with “waiting”.</p>
<p>The first thing I want to back to is the example from above.  Both of the
functions (for the cat and the mouse) can be seen as separate threads of
execution.  When the code calls <tt class="docutils literal">sleep(10)</tt> there's clearly an
expectation by the programmer that the computer will temporarily pause the
execution and continue later.  I don't want to bore you with monads, so as
my “functional” programming language, I will use JavaScript and promises.
I think that's an abstraction that most readers will be sufficiently
familiar with:</p>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">moveMouseBlocking</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mf">200</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mouse</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="mf">5</span><span class="p">;</span>
    <span class="nx">sleep</span><span class="p">(</span><span class="mf">10</span><span class="p">);</span>  <span class="c1">// a blocking sleep</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">moveMouseAsync</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="ow">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">iterate</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mf">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">mouse</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="mf">5</span><span class="p">;</span>
        <span class="nx">sleep</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">iterate</span><span class="p">);</span>  <span class="c1">// non blocking sleep</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">resolve</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">iterate</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></div>
<p>You can immediately see a challenge here: it's very hard to translate the
blocking example into a non blocking example because all the sudden we
need to find a way to express our loop (or really any control flow).  We
need to manually decompose it into a form of recursive function calling
and we need the help of a scheduler and executor here to do the waiting.</p>
<p>This style obviously eventually became annoying enough to deal with that
<cite>async</cite>/<cite>await</cite> was introduced to mostly restore the sanity of the old
code.  So it now can look more like this:</p>
<div class="highlight"><pre><span></span><span class="k">async</span> <span class="kd">function</span> <span class="nx">moveMouseAsync</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mf">200</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mouse</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="mf">5</span><span class="p">;</span>
    <span class="k">await</span> <span class="nx">sleep</span><span class="p">(</span><span class="mf">10</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Behind the scenes though, nothing has really changed, and in particular,
when you call that function, you just get an object that encompasses the
“composition of the computation”.  That object is a promise which will
eventually hold the resulting value.  In fact, in some languages like C#, the
compiler will really just transpile this into chained function calls.
With the promise in hand, you can await the result, or register a callback
with <cite>then</cite> which gets invoked if this thing ever runs to completion.</p>
<p>For a programmer, I think <cite>async</cite>/<cite>await</cite> is clearly understood as some
sort of neat abstraction&nbsp;—&nbsp;an abstraction over promises and callbacks.
However strictly speaking, it's just worse than where we started out,
because in terms of expressiveness, we have lost an important affordance:
we cannot freely suspend.</p>
<p>In the original blocking code, when we invoked <cite>sleep</cite> we suspended for 10
milliseconds implicitly; we cannot do the same with the async call.  Here
we have to “<cite>await</cite>” the sleep operation.  This is the crucial aspect of
why we're having these “colored functions”.  Only an async function can
call another async function, as you cannot <cite>await</cite> in a sync function.</p>
</div>
<div class="section" id="halting-problems">
<h2>Halting Problems</h2>
<p>The above example shows another problem that <cite>async</cite>/<cite>await</cite> causes:
what if we never resolve?  A normal function call eventually
returns, the stack unwinds, and we're ready to receive the result.  In an
async world, someone has to call <cite>resolve</cite> at the very end.  What if that
is never called?  Now in theory, that does not seem all that different from
someone calling <cite>sleep()</cite> with a large number to suspend for a very long time,
or waiting on a pipe that never gets data sent into.  But it is different!
In one case, we keep the call stack and everything that relates to it
alive; in another case, we just have a promise and are waiting for
independent garbage collection with everything already unwound.</p>
<p>Contract wise, there is absolutely nothing that says one has to call
<cite>resolve</cite>.  As we know from theory <a class="reference external" href="https://en.wikipedia.org/wiki/Halting_problem">the halting problem is undecidable</a> so it's going to be
actually impossible to know if someone will call resolve or not.</p>
<p>That sounds pedantic, but it's very important because promises/futures and
<cite>async</cite>/<cite>await</cite> are making something strictly worse than not having them.
Let's consider a JavaScript promise to be the most canonical example of
what this looks like.  A promise is created by an anonymous function, that
is invoked to eventually call <cite>resolve</cite>.  Take this example:</p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">neverSettle</span> <span class="o">=</span> <span class="ow">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// this function ends, but we never called resolve</span>
<span class="p">});</span>
</pre></div>
<p>Let me clarify first that this is not a JavaScript specific problem, but
it's nice to show it this way.  This is a completely legal thing!  It's a
promise, that never resolves.  That is not a bug!  The anonymous function
in the promise itself will return, the stack will unwind, and we are left
with a “pending” promise that will eventually get garbage collected.  That
is a bit of a problem because since it will never resolve, you can also
never await it.</p>
<p>Think of the following example, which demonstrates this problem a bit.  In
practice you might want to reduce how many things can work at once, so
let's imagine a system that can handle up to 10 things that run
concurrently.  So we might want to use a semaphore to give out 10 tokens
so up to 10 things can run at once; otherwise, it applies back pressure.
So the code looks like this:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">semaphore</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">Semaphore</span><span class="p">(</span><span class="mf">10</span><span class="p">);</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">execute</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">semaphore</span><span class="p">.</span><span class="nx">acquire</span><span class="p">();</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">f</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">semaphore</span><span class="p">.</span><span class="nx">release</span><span class="p">(</span><span class="nx">token</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>But now we have a problem.  What if the function passed to the <cite>execute</cite>
function returns <cite>neverSettle</cite>?  Well, clearly we will never release the
semaphore token.  This is strictly worse compared to blocking functions!
The closest equivalent would be a stupid function that calls a very
long running <cite>sleep</cite>.  But it's different!  In one case, we keep the call
stack and everything that relates to it alive; in the other case case we
just have a promise that will eventually get garbage collected, and we will
never see it again.  In the promise case, we have effectively decided that
the stack is not useful.</p>
<p>There are ways to fix this, like making promise finalization available so
we can get informed if a promise gets garbage collected etc.  However I
want to point out that as per contract, what this promise is doing is
completely acceptable and we have just caused a new problem, one that we
did not have before.</p>
<p>And if you think Python does not have that problem, it does too.  Just
<tt class="docutils literal">await Future()</tt> and you will be waiting until the heat death of the
universe (or really when you shut down your interpreter).</p>
<p>The promise that sits there unresolved has no call stack.  But that
problem also comes back in other ways, even if you use it correctly.  The
decomposed functions calling functions via the scheduler flow means that
now you need extra affordances to stitch these async calls together into
full call stacks.  This all creates extra problems that did not exist
before.  Call stacks are really, really important.  They help with
debugging and are also crucial for profiling.</p>
</div>
<div class="section" id="blocking-is-an-abstraction">
<h2>Blocking is an Abstraction</h2>
<p>Okay, so we know there is at least some challenge with the promise model.
What other abstractions are there?  I will make the argument that a
function being able to “suspend” a thread of execution is a bloody great
capability and abstraction.  Think of it for a moment: no matter where I
am, I can say I need to wait for something and continue later where I left
off.  This is particularly crucial to apply back-pressure if you decide to
need it later.  The biggest footgun in Python asyncio remains that <cite>write</cite>
is non blocking.  That function will stay problematic forever and you need
to follow up with <tt class="docutils literal">await s.drain()</tt> to avoid buffer bloat.</p>
<p>In particular it's an important abstraction because in the real world we
have constantly faced with things in fact not being async all the time, and
some of the things we think might not block, will in fact block.  Just
like Python did not think that <cite>write</cite> should be able to block when it was
designed.  I want to give you a colorful example of this.  Why is the
following code blocking, and what is?</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">decode_object</span><span class="p">(</span><span class="n">idx</span><span class="p">):</span>
    <span class="n">header</span> <span class="o">=</span> <span class="n">indexes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
    <span class="n">object_buf</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="n">header</span><span class="o">.</span><span class="n">start</span><span class="p">:</span><span class="n">header</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">header</span><span class="o">.</span><span class="n">size</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">brotli</span><span class="o">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">object_buf</span><span class="p">)</span>
</pre></div>
<p>It's a bit of a trick question, but not really.  The reason it's blocking
is <a class="reference external" href="https://huonw.github.io/blog/2024/08/async-hazard-mmap/">because memory access can be blocking</a>!  You might
not think of it this way, but there are many reasons why just touching a
memory region can take time.  The most obvious one is memory-mapped files.
If you're touching a page that hasn't been loaded yet, the operating
system will have to shovel it into memory before returning back to you.
There is no “await touching this memory” expression, because if there were,
we would have to <cite>await</cite> <em>everywhere</em>.  That might sound petty but
blocking memory reads were at the source of a series of incidents at
Sentry <a class="footnote-reference" href="http://lucumr.pocoo.org/feed.atom#footnote-1" id="footnote-reference-1">[1]</a>.</p>
<p>The trade-off that <cite>async</cite>/<cite>await</cite> makes today is that the idea is that
not everything needs to block or needs to suspend.  The reality, however,
has shown me that many more things really want to suspend, and if a random
memory access is a case for suspending, then is the abstraction worth
anything?</p>
<p>So maybe to allow any function call block and suspend really was the right
abstraction to begin with.</p>
<p>But then we need to talk about spawning threads next, because a single
thread is not worth much. The one affordance that <cite>async</cite>/<cite>await</cite> system
gives you that you don't have otherwise, is actually telling two things to
run concurrently.  You get that by starting the async operation and
deferring the awaiting to later.  This is where I will have to concede
that <cite>async</cite>/<cite>await</cite> has something going for it.  It moves the reality of
concurrent execution right into the language.  The reason concurrency
comes so natural to a Scratch programmer is that it's right there, so
<cite>async</cite>/<cite>await</cite> solves a very similar purpose here.</p>
<p>In a traditional imperative language based on threads, the act of spawning
a thread is usually hidden behind a (often convoluted) standard library
function.  More annoyingly threads very much feel bolted on and completely
inadequate to even to the most basic of operations.  Because not only do
we want to spawn threads, we want to join on them, we want to send values
across thread boundaries (including errors!).  We want to wait for either
a task to be done, or a keyboard input, messages being passed etc.</p>
</div>
<div class="section" id="classic-threading">
<h2>Classic Threading</h2>
<p>So lets focus on threads for a second.  As said before, what we are
looking for is the ability for any function to yield / suspend.  That's
what threads allow us to do!</p>
<p>When I am talking about “threads” here, I'm not necessarily referring to a
specific kind of implementation of threads.  Think of the example of
promises from above for a moment: we had the concept of “sleeping”, but we
did not really say how that is implemented.  There is clearly some
underlying scheduler that can enable that, but how that takes places is
outside the scope of the language.  Threads can be like that.  They could
be real OS threads, they could be virtual and be implemented with fibers
or coroutines.  At the end of the day, we don't necessarily have to care
about it as developer if the language gets it right.</p>
<p>The reason this matters is that when I talk about “suspending” or
“continuing somewhere else,” immediately the thought of coroutines and
fibers come to mind.  That's because many languages that support them give
you those capabilities.  But it's good to step back for a second and just
think about general affordances that we want, and not how they are
implemented.</p>
<p>We need a way to say: run this concurrently, but don't wait for it to
return, we want to wait later (or never!).  Basically, the equivalent in
some languages to call an async function, but to not await.  In other
words: to schedule a function call.  And that is, in essence, just what
spawning a thread is.  If we think about Scratch: one of the reasons
concurrency comes natural there is because it's really well integrated,
and a core affordance of the language.  There is a real programming
language that works very much the same: go with its goroutines.  There is
syntax for it!</p>
<p>So now we can spawn, and that thing runs.  But now we have more problems
to solve: synchronization, waiting, message passing and all that jazz are
not solved.  Even Scratch has answers to that!  So clearly there is
something else missing to make this work.  And what even does that spawn
call return?</p>
</div>
<div class="section" id="a-detour-what-is-async-even">
<h2>A Detour: What is Async Even</h2>
<p>There is an irony in <cite>async</cite>/<cite>await</cite> and that irony is that it exists in
multiple languages, it looks completely the same on the surface, but works
completely different under the hood.  Not only that, the origin stories of
<cite>async</cite>/<cite>await</cite> in different languages are not even the same.</p>
<p>I mentioned earlier that code that can arbitrary block is an abstraction
of sorts.  That abstraction for many applications really only makes sense
is if the CPU time while you're blocking can be used in other useful ways.
On the one hand, because the computer would be pretty bored if it was only
doing things in sequence, on the other hand, because we might need things
to run in parallel.  At times as programmers we need to do two things to
make progress simultaneously before we can continue.  Enter creating
more threads.  But if threads are so great, why all that talking about
coroutines and promises that underpins so much of <cite>async</cite>/<cite>await</cite> in
different languages?</p>
<p>I think this is the point where the story actually becomes confusing
quickly.  For instance JavaScript has entirely different challenges than
Python, C# or Rust.  Yet somehow all those languages ended up with a form
of <cite>async</cite>/<cite>await</cite>.</p>
<p>Let's start with JavaScript.  JavaScript is a single threaded language
where a function scope cannot yield.  There is no affordance in the
language to do that and threads do not exist.  So before <cite>async</cite>/<cite>await</cite>,
the best you could do is different forms of callback hell.  The first
iteration of improving that experience was adding promises.
<cite>async</cite>/<cite>await</cite> only became sugar for that afterward.  The reason that
JavaScript did not have much choice here is that promises was the only
thing that could be accomplished without language changes, and
<cite>async</cite>/<cite>await</cite> is something that can be implemented as a transpilation
step.  So really; there are no threads in JavaScript.  But here is an
interesting thing that happens: JavaScript on the language level has the
concept of concurrency.  If you call <cite>setTimeout</cite>, you tell the runtime to
schedule a function to be called later.  This is crucial!  In particular
it also means that a promise created, will be scheduled automatically.
Even if you forget about it, it will run!</p>
<p>Python on the other hand had a completely different origin story.  In the
days before <cite>async</cite>/<cite>await</cite>, Python already had threads — real,
operating system level threads.  What it did not have however was the
ability for multiple of those threads to run in parallel.  The reason for
this obviously the GIL (Global Interpreter Lock).  However that “just” makes
things not to scale to more than one core, so let's ignore that for a
second.  Because it had threads, it also rather early had people
experiment with implementing virtual threads in Python.  Back in the day
(and to some extend today) the cost of an OS level thread was pretty high,
so virtual threads were seen as a fast way to spawn more of these
concurrent things.  There were two ways in which Python got virtual
threads.  One was the Stackless Python project, which was an alternative
implementation of Python (many patches for cpython rather) that
implemented what's called a “stackless VM” (basically a VM that does not
maintain a C stack).  In short, what that enabled is implementing something
that stackless called “tasklets” which were functions that could be
suspended and resumed.  Stackless did not have a bright future because the
stackless nature meant that you could not have interleaving Python -&gt; C -&gt;
Python calls and suspend with them on the stack.</p>
<p>There was a second attempt in Python called “greenlet”.  The way greenlet
worked was implementing coroutines in a custom extension module.  It is
pretty gnarly in its implementation, but it does allow for cooperative
multi tasking.  However, like stackless, that did not win out.  Instead,
what actually happened is that the generator system that Python had for
years was gradually upgraded into a coroutine system with syntax support,
and the async system was built on top of that.</p>
<p>One of the consequences of this is that it requires syntax support to
suspend from a coroutine.  This meant that you cannot implement a function
like <cite>sleep</cite> that, when called, yields to a scheduler.  You <em>need</em> to
<cite>await</cite> it (or in earlier times you could use <cite>yield from</cite>).  So we ended
up with <cite>async</cite>/<cite>await</cite> because of how coroutines work in Python under the
hood.  The motivation for this was that it was seen as a positive thing
that you know when something suspends.</p>
<p>One interesting consequence of the Python coroutine model is that at
least on the coroutine model it can transcend OS level threads.  I could
make a coroutine on one thread, ship it off to another, and continue it
there.  In practice, that does not work because once hooked up with the IO
system, it cannot travel to another event loop on another thread any more.
But you can already see that fundamentally it does something quite
different to JavaScript.  It can travel between threads at least in
theory; there are threads; there is syntax to yield.  A coroutine in
Python will also start out with not running, unlike in JavaScript where
it's effectively always scheduled.  This is also in parts because the
scheduler in python can be swapped out, and there are competing and
incompatible implementations.</p>
<p>Lastly let's talk about C#.  Here the origin story is once again entirely
different.  C# has real threads.  Not only does it have real threads, it
also has per-object locks and absolutely no problems with dealing with
multiple threads running in parallel.  But that does not mean that it does
not have other issues.  The reality is that threads alone are just not
enough.  You need to synchronize and talk between threads quite often and
sometimes you just need to wait.  For instance you need to wait for user
input.  You still want to do something, while you're stuck there
processing that input.  So over time .NET introduced “tasks” which are an
abstraction over async operations.  They are part of the .NET threading
system and the way you interact with them is that you write your code in
there, you can suspend from tasks with syntax.  .NET will run the task on
the current thread, and if you do some blocking you stay blocked.  This is
in that sense, quite different from JavaScript where while no new “thread”
is created, you pend the execution in the scheduler.  The reason it works
this way in .NET is that some of the motivation of this system was to
allow UI triggered code to access the main UI thread without blocking it.
But the consequence again is, that if you block for real, you just screwed
something up.  That however is also why at least at one point what C# did
was just to splice functions into chained closures whenever it hit an
<cite>await</cite>.  It just decomposes one logical piece of code into many separate
functions.</p>
<p>I really don't want to go into Rust, but Rust's async system is probably
the weirdest of them all because it's polling-based.  In short: unless you
actively “wait” for a task to complete, it will not make progress.  So the
purpose of a scheduler there is to make sure that a task actually can make
progress.  Why did rust end up with <cite>async</cite>/<cite>await</cite>?  Primarily because
they wanted something that works without a runtime and a scheduler and the
limitations of the borrow checker and memory model.</p>
<p>Of all those languages, I think the argument for <cite>async</cite>/<cite>await</cite> is the
strongest for Rust and JavaScript.  Rust because it's a systems language
and they wanted a design that works with a limited runtime.  JavaScript to
me also makes sense because the language does not have real threads, so
the only alternative to <cite>async</cite>/<cite>await</cite> is callbacks.  But for C# the
argument seems much weaker.  Even the problem of having to force code to
run on the UI thread could be just used by having a scheduling policy for
virtual threads.  The worst offender here in my mind is Python.
<cite>async</cite>/<cite>await</cite> has ended up with a really complex system where the
language now has coroutines and real threads, different synchronization
primitives for each and async tasks that end up being pinned to one OS
thread.  The language even has different futures in the standard library
for threads and async tasks!</p>
<p>The reason I wanted you to understand all this is that all these different
languages share the same syntax, yet what you can do with it is completely
different.  What they all have in common is that async functions can only
be called by async functions (or the scheduler).</p>
</div>
<div class="section" id="what-async-isn-t">
<h2>What Async Isn't</h2>
<p>Over the years I heard a lot of arguments about why for instance Python
ended up with <cite>async</cite>/<cite>await</cite> and some of the arguments presented don't
hold up to scrutiny from my perspective.  One argument that I have heard
repeatedly is that if you control when you suspend, you don't need to deal
with locking or synchronization.  While there is some truth to that (you
don't randomly suspend), you still end up with having to lock.  There is
still concurrency so you need to still protect all your stuff.  In Python
in particular this is particularly frustrating because not only do you
have colored functions, you also have colored locks.  There are locks for
threads and there are locks for async code, and they are different.</p>
<p>There is a very good reason why I showed the example above of the
semaphore: semaphores are real in async programming.  They are very often
needed to protect a system from taking on too much work.  In fact, one of
the core challenges that many <cite>async</cite>/<cite>await</cite>-based programs suffer from
is bloating buffers because there is an inability to exert back pressure
(I once again point you to my <a class="reference external" href="http://lucumr.pocoo.org/2020/1/1/async-pressure/">post on that</a>).  Why can they not?  Because unless an API
is <cite>async</cite>, it is forced to buffer or fail.  What it cannot do, is block.</p>
<p>Async also does not magically solve the issues with GIL in Python.  It
does not magically make real threads appear in JavaScript, it does not
solve issues when random code starts blocking (and remember, even memory
access can block).  Or you very slowly calculate a large Fibonacci
number.</p>
</div>
<div class="section" id="threads-are-the-answer-not-coroutines">
<h2>Threads are the Answer, Not Coroutines</h2>
<p>I already alluded to this above a few times, but when we think about being
able to “suspend” from an arbitrary point in time, we often immediately
think of coroutines as a programmers.  For good reasons: coroutines are
amazing, they are fun, and every programming language should have them!</p>
<p>Coroutines are an important building block, and if any future language
designer is looking at this post: you should put them in.</p>
<p>But coroutines should be very lightweight, and they can be abused in ways
that make it very hard to follow what's going on.  Lua, for instance, gives
you coroutines, but it does not give you the necessary structure to do
something with them easily.  You will end up building your own scheduler,
your own threading system, etc.</p>
<p>So what we really want is where we started out with: threads!  Good old
threads!</p>
<p>The irony in all of this is, that the language that I think actually go
this right is modern Java.  <a class="reference external" href="https://openjdk.org/projects/loom/">Project Loom</a>
in Java has coroutines and all the bells and whistles under the hood, but
what it exposes to the developer is good old threads.  There are virtual
threads, which are mounted on carrier OS threads, and these virtual
threads can travel from thread to thread.  If you end up issuing a
blocking call on a virtual thread, it yields to the scheduler.</p>
<p>Now I happen to think that threads alone are not good enough!  Threads
require synchronization, they require communication primitives etc.
Scratch has message passing!  So there is more that needs to be built to
make them work well.</p>
<p>I want to follow up on an another blog post about what is needed to make
threads easier to work with.  Because what <cite>async</cite>/<cite>await</cite> clearly
innovated is bringing some of these core capabilities closer to the user
of the language, and often modern <cite>async</cite>/<cite>await</cite> code looks easier to
read than traditional code using threads is.</p>
</div>
<div class="section" id="structured-concurrency-and-channels">
<h2>Structured Concurrency and Channels</h2>
<p>Lastly I do want to say something nice about <cite>async</cite>/<cite>await</cite> and celebrate
the innovations that it has brought up.  I believe that this language
feature singlehandedly drove some crucial innovation about concurrent
programming by making it widely accessible.  In particular it moved many
developers from a basic “single thread per request” model to breaking down
tasks into smaller chunks, even in languages like Python.  For me, the
biggest innovation here goes to <a class="reference external" href="https://trio.readthedocs.io/en/stable/">Trio</a>, which introduced the concept
of structured concurrency via its nursery.  That concept has eventually
found a home even in asyncio with the concept of the <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.TaskGroup">TaskGroup API</a>
and is <a class="reference external" href="https://openjdk.org/jeps/453">finding its way into Java</a>.</p>
<p>I recommend you to read Nathaniel J. Smith's <a class="reference external" href="https://vorpus.org/blog/notes-on-structured-concurrency-or-go-statement-considered-harmful/">Notes on structured
concurrency, or: Go statement considered harmful</a>
for a much better introduction.  However if you are unfamiliar with it,
here is my attempt of explaining it:</p>
<ul class="simple">
<li><strong>There is a clear start and end of work</strong>: every thread or task has a
clear beginning and end, which makes it easier to follow what each
thread is doing.  All threads spawned in the context of a thread, are
known to that thread.  Think of it like creating a small team to work on
a task: they start together, finish together, and then report back.</li>
<li><strong>Threads don't outlive their parent</strong>: if for whatever reason the
parent is done before the children threads, it automatically awaits
before returning.</li>
<li><strong>Error propagate and cause cancellations</strong>: If something goes wrong in
one thread, the error is passed back to the parent.  But more importantly, it
also automatically causes other child threads to cancel.  Cancellations
are a core of the system!</li>
</ul>
<p>I believe that structured concurrrency needs to become a thing in a threaded
world.  Threads must know their parents and children.  Threads also need
fo find convenient ways to ways to pass their success values back.
Lastly context should flow from thread to thread implicity through context
locals.</p>
<p>The second part is that <cite>async</cite>/<cite>await</cite> made it much more apparent that
tasks / threads need to talk with each other.  In particular the concept
of channels and selecting on channels became more prevalent.  This is an
essential building block which I think can be further improved upon.  As
food for thought: if you have structured concurrency, in principle each
thread's return value really can be represented as a buffered channel
attached to the thread, holding up to a single value (successful return
value or error) that you can select on.</p>
<p>Today, although no language has perfected this model, thanks to many years
of experimentation, the solution seems clearer than ever, with structured
concurrency at its core.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>I hope I was able to demonstrate to you that <cite>async</cite>/<cite>await</cite> has been a
mixed bag.  It brought some relief from callback hell, but it also saddled
us with new issues like colored functions, new back-pressure challenges,
and introduced new problems all entirely such as promises that can just
sit around forever without resolving.  It has also taken away a lot of
utility that call stacks brought, in particular for debugging and
profiling.  These aren't minor hiccups; they're real obstacles that get in
the way of the straightforward, intuitive concurrency we should be aiming
for.</p>
<p>If we take a step back, it seems pretty clear to me that we have veered
off course by adopting <cite>async</cite>/<cite>await</cite> in languages that have real
threads.  Innovations like Java's Project Loom feel like the right fit
here.  Virtual threads can yield when they need to, switch contexts when
blocked, and even work with message-passing systems that make concurrency
feel natural.  If we free ourselves from the idea that the functional,
promise system has figured out all the problems we can look at threads
properly again.</p>
<p>However at the same time <cite>async</cite>/<cite>await</cite> has moved concurrent programming
to the forefront and has resulted in real innovation.  Making concurrency
a core feature of the language (via syntax even!) is a good thing.
Maybe the increased adoption and people struggling with it, was what made
structured concurrency a real thing in the Python <cite>async</cite>/<cite>await</cite> world.</p>
<p>Future language design should rethink concurrency once more: Instead of
adopting <cite>async</cite>/<cite>await</cite>, new languages should model themselves more like
Java's Project Loom but with more user friendly primitives.  But like
Scratch, it should give programmers really good APIs that make concurrency
natural.  I don't think actor frameworks are the right fit, but a
combination of structured concurrency, channels, syntax support for
spawning/joining/selecting will go a long way.  Watch this space for a
future blog post about some things I found to work better than others.</p>
<table class="docutils footnote" frame="void" id="footnote-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="http://lucumr.pocoo.org/feed.atom#footnote-reference-1">[1]</a></td><td>Sentry works with large debug information files such as PDB or
DWARF.  These files can be gigabytes in size and we memory map
terabytes of preprocessed files into memory during processing.  Memory
mapped files can block is hardly a surprise, but what we learned in the
process is that thanks to containerization and memory limits, you can easily
navigate yourself into a situation where you spend much more time on
page faults than you expected and the system crawls to a halt.</td></tr>
</tbody>
</table>
</div>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 18, 2024 12:00 AM UTC by
            <a href="http://lucumr.pocoo.org/feed.atom" class="link link-hover text-primary"
              >Armin Ronacher</a
            >
          </div>
          <a
            href="http://lucumr.pocoo.org/2024/11/18/threads-beat-async-await"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="http://paddy3118.blogspot.com/2024/11/theres-easy-way.html" class="hover:underline"
              >There's the easy way...</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>&nbsp;</p><div class="separator" style="clear: both; text-align: center;"><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiFWNOm5UwdccnGYht91syCP6sRsODmlKu7xlUk38f3AomT93sjQoGBix35M0aQg1o78eRHc2BZTtqmTq1gINTopJqLmWd6qj7LxnGYVZ_mWch5MTGPWRFCIM4-k_RyJTWylHePj08UKbNDRD61uj7XxdB_wU87lx-6q5bPQhvkeTNIAEVlIfH6/s224/jamaican_pondering_code.jpg" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="224" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiFWNOm5UwdccnGYht91syCP6sRsODmlKu7xlUk38f3AomT93sjQoGBix35M0aQg1o78eRHc2BZTtqmTq1gINTopJqLmWd6qj7LxnGYVZ_mWch5MTGPWRFCIM4-k_RyJTWylHePj08UKbNDRD61uj7XxdB_wU87lx-6q5bPQhvkeTNIAEVlIfH6/s1600/jamaican_pondering_code.jpg" width="224" /></a></div><p></p><p><span style="font-size: small;"><b><i><span style="color: #2b00fe;">Best seen on a larger than landscape phone </span></i></b></span><br /></p><p>Someone blogged about a particular problem:</p><div><div><span style="color: #ce9178;">From: https://theweeklychallenge.org/blog/perl-weekly-challenge-294/#TASK1</span></div><br /><div><span style="color: #ce9178;">Given an unsorted array of integers, `ints`</span></div><div><span style="color: #ce9178;">Write a script to return the length of the longest consecutive elements sequence.</span></div><div><span style="color: #ce9178;">Return -1 if none found. *The algorithm must run in O(n) time.*</span></div></div><p></p><p>The solution they blogged used a sort which meant it could not be O(n) in time, but the problem looked good so I gave it some thought.</p><p>Sets! sets are O(1) in Python and are good for looking things up.</p><p>What if when looking at the inputted numbers, one at a time, you also looked for other ints in the input that would <b><i>extend </i></b>the int you have to form a longer&nbsp; range?&nbsp; Keep tab of the longest range so far and if you remove ints from the pool as they form ranges, when the pool is empty, you should know the longest range.</p><p>I added the printout of the longest range too.</p><h2 style="text-align: left;">My code</h2><div><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">consec_seq</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;">) -&gt; </span><span style="color: #4ec9b0;">tuple</span><span style="color: #cccccc;">[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Extract longest_seq_length, its_min, its_max"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">pool</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">set</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">longest</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">0</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">while</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">pool</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">start</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">pool</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">pop</span><span style="color: #cccccc;">()</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">ln</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># check down</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">while</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">this</span><span style="color: #d4d4d4;">:=</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">)) </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">pool</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">ln</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">pool</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">remove</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">mn</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># check up</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">start</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">while</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">this</span><span style="color: #d4d4d4;">:=</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">)) </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">pool</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">ln</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+=</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">pool</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">remove</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># check longest</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">ln</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&gt;</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">longest</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">longest</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">ln</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mx</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">longest</span><span style="color: #cccccc;">,</span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #cccccc;">,</span><span style="color: #9cdcfe;">longest_mx</span></div><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">_test</span><span style="color: #cccccc;">():</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;">[(),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">69</span><span style="color: #cccccc;">,),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">20</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">78</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">79</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">100</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">20</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">6</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">7</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">30</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">20</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">12</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">11</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">9</span><span style="color: #cccccc;">), &nbsp;</span><span style="color: #6a9955;"># two runs of five</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">12</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">11</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">9</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">), &nbsp;</span><span style="color: #6a9955;"># two runs of five - reversed</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">,</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">12</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">11</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">9</span><span style="color: #cccccc;">), &nbsp;</span><span style="color: #6a9955;"># runs of 6 and 5</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">12</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">11</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">9</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">7</span><span style="color: #cccccc;">), &nbsp; </span><span style="color: #6a9955;"># runs of 5 and 6</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">"Input </span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;"> = </span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">longest</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">consec_seq</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;">)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">longest</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">" &nbsp;-1"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">" &nbsp;The/A longest sequence has </span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">longest</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> elements </span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">..</span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">longest_mx</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><br /><br /><div><span style="color: #6a9955;"># %%</span></div><div><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">__name__</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'__main__'</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">_test</span><span style="color: #cccccc;">()</span></div><br /></div><p></p><h3 style="text-align: left;">Sample output</h3><div><div><span style="color: #ce9178;">Input ints = ()</span></div><div><span style="color: #ce9178;">&nbsp; -1</span></div><div><span style="color: #ce9178;">Input ints = (69,)</span></div><div><span style="color: #ce9178;">&nbsp; -1</span></div><div><span style="color: #ce9178;">Input ints = (-20, 78, 79, 1, 100)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 2 elements 78..79</span></div><div><span style="color: #ce9178;">Input ints = (10, 4, 20, 1, 3, 2)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 4 elements 1..4</span></div><div><span style="color: #ce9178;">Input ints = (0, 6, 1, 8, 5, 2, 4, 3, 0, 7)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 9 elements 0..8</span></div><div><span style="color: #ce9178;">Input ints = (10, 30, 20)</span></div><div><span style="color: #ce9178;">&nbsp; -1</span></div><div><span style="color: #ce9178;">Input ints = (2, 4, 3, 1, 0, 10, 12, 11, 8, 9)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 5 elements 0..4</span></div><div><span style="color: #ce9178;">Input ints = (10, 12, 11, 8, 9, 2, 4, 3, 1, 0)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 5 elements 0..4</span></div><div><span style="color: #ce9178;">Input ints = (2, 4, 3, 1, 0, -1, 10, 12, 11, 8, 9)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 6 elements -1..4</span></div><div><span style="color: #ce9178;">Input ints = (2, 4, 3, 1, 0, 10, 12, 11, 8, 9, 7)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 6 elements 7..12</span></div></div><h3 style="text-align: left;"></h3><h2 style="text-align: left;">Another Algorithm</h2><p style="text-align: left;">What if, you kept and extended ranges untill you amassed all ranges then chose the longest? I need to keep the hash lookup. dict key lookup should also be O(1).&nbsp; What to look up? <b><i>Look up ints that would extend a range</i></b>!</p><p style="text-align: left;">If you have an existing (integer) range, say 1..3 inclusive of end points then finding 0 would extend the range to 0..3 or finding one more than the range maximum, 4 would extend the original range to 1..4&nbsp;</p><p style="text-align: left;">So if you have ranges then they could be extended by finding rangemin - 1 or rangemax +1. I call then <i>extends</i><br /></p><p style="text-align: left;">If you do find that the next int from the input ints is also an extends value then you need to find the range that it extends, (by lookup), so you can modify that range. - use a dict to map extends to their range and checking if an int is in the extends dict keys should also take O(1) time.</p><p style="text-align: left;">I took that sketch of an algorithm and started to code. It took two evenings to finally get something that worked and I had to work out several details that were trying. The main problem was what about coalescing ranges? if you have ranges 1..2 and 4..5 what happens when you see a 3? the resultant is the single range 1..5. It took particular test cases and extensive debugging to work out that the extends2range mapping should map to potentially more than one range and that you need to combine ranges if two of them are present for any extend value being hit.</p><p style="text-align: left;"><br /></p><p style="text-align: left;">So for 1..2 the extends being looked for are 0 and 3. For 4..5 the extends being looked for are 3, again, and 6. The extends2ranges data structure for just this should look like:</p><div><div><span style="color: #ce9178;">{0: [[1, 2]],</span></div><div><span style="color: #ce9178;">&nbsp;3: [[1, 2], [4, 5]],</span></div><div><span style="color: #ce9178;">&nbsp;6: [[4, 5]]}</span></div></div><p style="text-align: left;"></p><h3 style="text-align: left;">&nbsp;</h3><h3 style="text-align: left;">The Code #2</h3><div><div><span style="color: #c586c0;">from</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">collections</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">import</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">defaultdict</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">combine_ranges</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">min1</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">max1</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">min2</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">max2</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Combine two overlapping ranges return the new range as [min, max], and a set of limits unused in the result"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">assert</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">min1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">max1</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">and</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">min2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">max2</span><span style="color: #cccccc;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #6a9955;"># Well formed</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">and</span><span style="color: #cccccc;"> ( </span><span style="color: #9cdcfe;">min1</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">max2</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">and</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">min2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">max1</span><span style="color: #cccccc;"> )) </span><span style="color: #6a9955;"># and ranges touch or overlap</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">range_limits</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">set</span><span style="color: #cccccc;">([</span><span style="color: #9cdcfe;">min1</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">max1</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">min2</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">max2</span><span style="color: #cccccc;">])</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">new_mnmx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #dcdcaa;">min</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">range_limits</span><span style="color: #cccccc;">), </span><span style="color: #dcdcaa;">max</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">range_limits</span><span style="color: #cccccc;">)]</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">unused_limits</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">range_limits</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">set</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">new_mnmx</span><span style="color: #cccccc;">)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">new_mnmx</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">unused_limits</span></div><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">consec_seq2</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;">) -&gt; </span><span style="color: #4ec9b0;">tuple</span><span style="color: #cccccc;">[</span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">, </span><span style="color: #4ec9b0;">int</span><span style="color: #cccccc;">]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Extract longest_seq_length, its_min, its_max"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">not</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">seen</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">set</span><span style="color: #cccccc;">() &nbsp;</span><span style="color: #6a9955;"># numbers seen so far</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #4ec9b0;">defaultdict</span><span style="color: #cccccc;">(</span><span style="color: #4ec9b0;">list</span><span style="color: #cccccc;">) &nbsp;</span><span style="color: #6a9955;"># map extends to its ranges</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">seen</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">continue</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">seen</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">add</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">not</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># Start new range</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> [</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">] &nbsp; &nbsp;</span><span style="color: #6a9955;"># Range of one int</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># add in the extend points</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">].</span><span style="color: #dcdcaa;">append</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">].</span><span style="color: #dcdcaa;">append</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># Extend an existing range</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">ranges</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">] &nbsp;</span><span style="color: #6a9955;"># The range(s) that could be extended by this</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">len</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">ranges</span><span style="color: #cccccc;">) </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># this joins the two ranges</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">extend_and_join_ranges</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">ranges</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #6a9955;"># extend one range, copied</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">extend_and_join_ranges</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">, [</span><span style="color: #9cdcfe;">ranges</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">], </span><span style="color: #9cdcfe;">ranges</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">].copy()])</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">all_ranges</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">sum</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">.</span><span style="color: #dcdcaa;">values</span><span style="color: #cccccc;">(), </span><span style="color: #9cdcfe;">start</span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;">[])</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">max</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">all_ranges</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">key</span><span style="color: #d4d4d4;">=</span><span style="color: #569cd6;">lambda</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">: </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">])</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">longest_mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">), </span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mx</span></div><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">extend_and_join_ranges</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">ranges</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mnmx2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">ranges</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">mnmx_orig</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mnmx2_orig</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">.copy(), </span><span style="color: #9cdcfe;">mnmx2</span><span style="color: #cccccc;">.copy() </span><span style="color: #6a9955;"># keep copy of originals</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mnmx</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">mn2</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mx2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mnmx2</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mn</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mn</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> &nbsp;</span><span style="color: #6a9955;"># Extend lower limit of the range</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mn2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">mnmx2</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mn2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> &nbsp;</span><span style="color: #6a9955;"># Extend lower limit of the range</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> &nbsp;</span><span style="color: #6a9955;"># Extend upper limit of the range</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mx2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">mnmx2</span><span style="color: #cccccc;">[</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">] </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">mx2</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;"> &nbsp;</span><span style="color: #6a9955;"># Extend lower limit of the range</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">new_mnmx</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">_unused_limits</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">combine_ranges</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mx</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mn2</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mx2</span><span style="color: #cccccc;">)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">remove_merged_from_extends</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mnmx2</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">add_combined_range_to_extends</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">new_mnmx</span><span style="color: #cccccc;">)</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">add_combined_range_to_extends</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">new_mnmx</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Add in the combined of two ranges's extends"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #9cdcfe;">new_mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">new_mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">new_mnmx</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extend</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">new_mn</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">new_mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">extend</span><span style="color: #cccccc;">] &nbsp;</span><span style="color: #6a9955;"># ranges at new limit extension</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">new_mnmx</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">not</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;">.append(</span><span style="color: #9cdcfe;">new_mnmx</span><span style="color: #cccccc;">)</span></div><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">remove_merged_from_extends</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mnmx2</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #ce9178;">"Remove original ranges that were merged from extends"</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">lohi</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mnmx2</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">lo</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">hi</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">lohi</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extend</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">lo</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">-</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">hi</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">+</span><span style="color: #cccccc;"> </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extend</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">extend</span><span style="color: #cccccc;">]</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">r_old</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;"> (</span><span style="color: #9cdcfe;">mnmx</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">mnmx2</span><span style="color: #cccccc;">):</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">r_old</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">in</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;">.remove(</span><span style="color: #9cdcfe;">r_old</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #569cd6;">not</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">r</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">del</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">extend</span><span style="color: #cccccc;">]</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #6a9955;"># remove joining extend, this</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">del</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">extends2ranges</span><span style="color: #cccccc;">[</span><span style="color: #9cdcfe;">this</span><span style="color: #cccccc;">]</span></div><br /><br /><div><span style="color: #569cd6;">def</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">_test</span><span style="color: #cccccc;">():</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #c586c0;">for</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;"> </span><span style="color: #c586c0;">in</span><span style="color: #cccccc;">[</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">69</span><span style="color: #cccccc;">,),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">20</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">78</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">79</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">100</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">20</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">6</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">5</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">7</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">30</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">20</span><span style="color: #cccccc;">),</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">12</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">11</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">9</span><span style="color: #cccccc;">), &nbsp;</span><span style="color: #6a9955;"># two runs of five</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">12</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">11</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">9</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">), &nbsp;</span><span style="color: #6a9955;"># two runs of five - reversed</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">,</span><span style="color: #d4d4d4;">-</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">12</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">11</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">9</span><span style="color: #cccccc;">), &nbsp;</span><span style="color: #6a9955;"># runs of 6 and 5</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">4</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">3</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">1</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">0</span><span style="color: #cccccc;">, </span><span style="color: #b5cea8;">10</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">12</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">11</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">8</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">9</span><span style="color: #cccccc;">,</span><span style="color: #b5cea8;">7</span><span style="color: #cccccc;">), &nbsp; </span><span style="color: #6a9955;"># runs of 5 and 6</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">"Input </span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;"> = </span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">longest</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #cccccc;">, </span><span style="color: #9cdcfe;">longest_mx</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #cccccc;"> </span><span style="color: #dcdcaa;">consec_seq2</span><span style="color: #cccccc;">(</span><span style="color: #9cdcfe;">ints</span><span style="color: #cccccc;">)</span></div><br /><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">longest</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">&lt;</span><span style="color: #b5cea8;">2</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #ce9178;">" &nbsp;-1"</span><span style="color: #cccccc;">)</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">print</span><span style="color: #cccccc;">(</span><span style="color: #569cd6;">f</span><span style="color: #ce9178;">" &nbsp;The/A longest sequence has </span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">longest</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> elements </span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">longest_mn</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">..</span><span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">longest_mx</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">"</span><span style="color: #cccccc;">)</span></div><br /><br /><div><span style="color: #6a9955;"># %%</span></div><div><span style="color: #c586c0;">if</span><span style="color: #cccccc;"> </span><span style="color: #9cdcfe;">__name__</span><span style="color: #cccccc;"> </span><span style="color: #d4d4d4;">==</span><span style="color: #cccccc;"> </span><span style="color: #ce9178;">'__main__'</span><span style="color: #cccccc;">:</span></div><div><span style="color: #cccccc;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">_test</span><span style="color: #cccccc;">()</span></div></div><p style="text-align: left;"></p><p style="text-align: left;"><br /></p><h4 style="text-align: left;">Its Output<br /></h4><div><div><span style="color: #ce9178;">&nbsp;Input ints = ()</span></div><div><span style="color: #ce9178;">&nbsp; -1</span></div><div><span style="color: #ce9178;">Input ints = (69,)</span></div><div><span style="color: #ce9178;">&nbsp; -1</span></div><div><span style="color: #ce9178;">Input ints = (-20, 78, 79, 1, 100)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 2 elements 78..79</span></div><div><span style="color: #ce9178;">Input ints = (4, 1, 3, 2)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 4 elements 1..4</span></div><div><span style="color: #ce9178;">Input ints = (10, 4, 20, 1, 3, 2)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 4 elements 1..4</span></div><div><span style="color: #ce9178;">Input ints = (0, 6, 1, 8, 5, 2, 4, 3, 0, 7)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 9 elements 0..8</span></div><div><span style="color: #ce9178;">Input ints = (10, 30, 20)</span></div><div><span style="color: #ce9178;">&nbsp; -1</span></div><div><span style="color: #ce9178;">Input ints = (2, 4, 3, 1, 0, 10, 12, 11, 8, 9)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 5 elements 0..4</span></div><div><span style="color: #ce9178;">Input ints = (10, 12, 11, 8, 9, 2, 4, 3, 1, 0)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 5 elements 8..12</span></div><div><span style="color: #ce9178;">Input ints = (2, 4, 3, 1, 0, -1, 10, 12, 11, 8, 9)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 6 elements -1..4</span></div><div><span style="color: #ce9178;">Input ints = (2, 4, 3, 1, 0, 10, 12, 11, 8, 9, 7)</span></div><div><span style="color: #ce9178;">&nbsp; The/A longest sequence has 6 elements 7..12</span></div><div><span style="color: #ce9178;"><br /></span></div></div><p style="text-align: left;"></p><h3 style="text-align: left;"><br /></h3><p style="text-align: left;">This second algorithm gives correct results but is harder to develop and explain. It's a testament to my stubbornness as I thought there was a solution there, and debugging was me flexing my skills to keep them honed.</p><p style="text-align: left;"><br /></p><p style="text-align: left;"><b>END.</b></p><p style="text-align: left;"><br /></p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 17, 2024 11:44 PM UTC by
            <a href="http://feeds.feedburner.com/GoDeh" class="link link-hover text-primary"
              >Go Deh</a
            >
          </div>
          <a
            href="http://paddy3118.blogspot.com/2024/11/theres-easy-way.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.paulox.net/2024/11/18/thoughts-on-my-election-as-a-dsf-board-member/" class="hover:underline"
              >Thoughts on my election as a DSF board member</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>My thoughts on my election as a member of the Django Software Foundation (<span class="caps">DSF</span>) board of&nbsp;directors.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 17, 2024 11:00 PM UTC by
            <a href="https://www.paulox.net/feed/python.xml" class="link link-hover text-primary"
              >Paolo Melchiorre</a
            >
          </div>
          <a
            href="https://www.paulox.net/2024/11/18/thoughts-on-my-election-as-a-dsf-board-member/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://testandcode.com/episodes/223-writing-stuff-down" class="hover:underline"
              >223: Writing Stuff Down is a Super Power</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>Taking notes well can help to listen better, remember things, show respect, be more accountable, free up mind space to solve problems.</p><p>This episode discusses</p><ul><li>the benefits of writing things down</li><li>preparing for a meeting</li><li>taking notes in meetings</li><li>reviewing notes for action items, todo items, things to follow up on, etc.</li><li>taking notes to allow for better focus</li><li>writing well structured emails</li><li>writing blog posts and books</li></ul>
<br /><p><strong> Learn pytest</strong></p><ul><li>pytest is the number one test framework for Python.</li><li>Learn the basics super fast with <a href="https://courses.pythontest.com/hello-pytest">Hello, pytest!</a></li><li>Then later you can become a pytest expert with <a href="https://courses.pythontest.com/the-complete-pytest-course">The Complete pytest Course</a></li><li>Both courses are at <a href="https://courses.pythontest.com/">courses.pythontest.com</a></li></ul>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 17, 2024 01:55 AM UTC by
            <a href="http://testandcode.com/rss" class="link link-hover text-primary"
              >Test and Code</a
            >
          </div>
          <a
            href="https://testandcode.com/episodes/223-writing-stuff-down"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://rickardlindberg.me/2024/11/16/i-was-researching.html" class="hover:underline"
              >Unknown title</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>I was researching how to run <a href="https://pypi.org/project/black/">Black</a> (and possibly other formatters) from Vim and found <a href="https://phelipetls.github.io/posts/code-formatting-vim/">Ergonomic mappings for code formatting in Vim</a>. It was very helpful.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 16, 2024 01:08 PM UTC by
            <a href="http://rickardlindberg.me/tags/python/rss.xml" class="link link-hover text-primary"
              >Rickard Lindberg</a
            >
          </div>
          <a
            href="https://rickardlindberg.me/2024/11/16/i-was-researching.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://realpython.com/podcasts/rpp/228/" class="hover:underline"
              >The Real Python Podcast – Episode #228: Maintaining the Foundations of Python & Cautionary Tales</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            How do you build a sustainable open-source project and community? What lessons can be learned from Python's history and the current mess that the WordPress community is going through? This week on the show, we speak with Paul Everitt from JetBrains about navigating open-source funding and the start of the Python Software Foundation.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 15, 2024 12:00 PM UTC by
            <a href="https://realpython.com/atom.xml" class="link link-hover text-primary"
              >Real Python</a
            >
          </div>
          <a
            href="https://realpython.com/podcasts/rpp/228/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://talkpython.fm/episodes/show/485/secure-coding-for-python-with-shehackspurple" class="hover:underline"
              >#485: Secure coding for Python with SheHacksPurple</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            What do developers need to know about AppSec and building secure software? We have Tanya Janca (AKA SheHacksPurple) on the show to tell us all about it. We talk about what developers should expect from threat modeling events as well as concrete tips for security your apps and services.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 15, 2024 08:00 AM UTC by
            <a href="http://www.talkpythontome.com/episodes/rss" class="link link-hover text-primary"
              >Talk Python to Me</a
            >
          </div>
          <a
            href="https://talkpython.fm/episodes/show/485/secure-coding-for-python-with-shehackspurple"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.mattlayman.com/videos/heroku-to-digitalocean-building-saas-206/" class="hover:underline"
              >Heroku To DigitalOcean - Building SaaS #206</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            In this episode, I began a migration of my JourneyInbox app from Heroku to DigitalOcean. The first step to this move, since I&rsquo;m going to use Kamal, is to put the app into a Docker image. We got the whole app into the Docker image, then cleaned up local development and the CI system after making changes that broke those configurations.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 15, 2024 12:00 AM UTC by
            <a href="https://www.mattlayman.com/categories/python/index.xml" class="link link-hover text-primary"
              >Matt Layman</a
            >
          </div>
          <a
            href="https://www.mattlayman.com/videos/heroku-to-digitalocean-building-saas-206/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.pythonmorsels.com/inspecting-python-objects/" class="hover:underline"
              >Inspecting objects in Python</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>I rely on 4 functions for inspecting Python objects: <code>type</code>, <code>help</code>, <code>dir</code>, and <code>vars</code>.</p>


<div>
  
    <img height="270" src="https://i.vimeocdn.com/filter/overlay?src0=https%3A%2F%2Fi.vimeocdn.com%2Fvideo%2F1943500364-204930bdee7bd3cf051489ab105d674fbccdead74df757590b68c03139e8ebc3-d_1920x1080&amp;src1=http%3A%2F%2Ff.vimeocdn.com%2Fp%2Fimages%2Fcrawler_play.png" width="480" />
  
  <p>
  <strong>Table of contents</strong>
  <ol>
  
  <li><a href="https://www.pythonmorsels.com/inspecting-python-objects/#inspecting-an-objects-structure-and-data" target="_blank">Inspecting an object's structure and data</a></li>
  
  <li><a href="https://www.pythonmorsels.com/inspecting-python-objects/#how-to-see-an-objects-class" target="_blank">How to see an object's class</a></li>
  
  <li><a href="https://www.pythonmorsels.com/inspecting-python-objects/#looking-up-documentation-with-help" target="_blank">Looking up documentation with <code>help</code></a></li>
  
  <li><a href="https://www.pythonmorsels.com/inspecting-python-objects/#getting-the-methods-and-attributes-for-an-object" target="_blank">Getting the methods and attributes for an object</a></li>
  
  <li><a href="https://www.pythonmorsels.com/inspecting-python-objects/#inspecting-direct-attributes-of-an-object" target="_blank">Inspecting direct attributes of an object</a></li>
  
  <li><a href="https://www.pythonmorsels.com/inspecting-python-objects/#base-classes-module-paths-and-more" target="_blank">Base classes, module paths, and more</a></li>
  
  <li><a href="https://www.pythonmorsels.com/inspecting-python-objects/#inspect-python-objects-with-type-help-dir-and-vars" target="_blank">Inspect Python objects with <code>type</code>, <code>help</code>, <code>dir</code>, and <code>vars</code></a></li>
  
  </ol>
  </p>
</div>
<div>
  
    <h2>Inspecting an object's structure and data</h2>
    
      
        <p>The scenario is, we're either in the <a href="https://www.pythonmorsels.com/using-the-python-repl/" target="_blank">Python REPL</a> or we've used the built-in <code>breakpoint</code> function to drop into <a href="https://www.pythonmorsels.com/debugging-with-breakpoint/" target="_blank">the Python debugger</a> within our code.
So we're within some sort of interactive Python environment.</p>

      
        <p>For example, we might be running this file, which we've put a <code>breakpoint</code> call in to drop into a Python debugger:</p>

      
        <div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">count_letters</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Counter</span><span class="p">(</span>
        <span class="n">char</span>
        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">text</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"file"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">Path</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">letter_counts</span> <span class="o">=</span> <span class="n">count_letters</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
    <span class="nb">breakpoint</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">letter</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">letter_counts</span><span class="o">.</span><span class="n">most_common</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">letter</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>


      
        <p>And we've used the <a href="https://www.pythonmorsels.com/debugging-with-breakpoint/#running-python-code-in-pdb" target="_blank">PDB <code>interact</code> command</a> to start a Python REPL:</p>

      
        <div class="codehilite"><pre><span></span><code>~ $ python3 letter_counter.py frankenstein.txt
&gt; /home/trey/letter_counter.py<span class="o">(</span><span class="m">18</span><span class="o">)</span>main<span class="o">()</span>
-&gt; breakpoint<span class="o">()</span>
<span class="o">(</span>Pdb<span class="o">)</span> interact
*pdb interact start*
&gt;&gt;&gt;
</code></pre></div>


      
        <p>We have a <code>letter_counts</code> variable that refers to some sort of object.
We want to know what this object is all about.</p>

      
        <p>What questions could we ask of this object?</p>

      
        <p>Well, to start with, we could simply <strong>refer to the object</strong>, and then hit <code>Enter</code>:</p>

      
        <div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">letter_counts</span>
<span class="go">Counter({'e': 46043, 't': 30365, 'a': 26743, 'o': 25225, 'i': 24613, 'n': 24367, 's': 21155, 'r': 20818, 'h': 19725, 'd': 16863, 'l': 12739, 'm': 10604, 'u': 10407, 'c': 9243, 'f': 8731, 'y': 7914, 'w': 7638, 'p': 6121, 'g': 5974, 'b': 5026, 'v': 3833, 'k': 1755, 'x': 677, 'j': 504, 'q': 324, 'z': 243})</span>
</code></pre></div>


      
        <p>We've typed the name of a variable that points to an object, and now we see the <strong>programmer-readable representation</strong> for that object.</p>

      
    
  
    <h2>How to see an object's class</h2>
    
      <p>Often, the string representation tells …</p>
    
  
</div>
<h3><a href="https://www.pythonmorsels.com/inspecting-python-objects/" target="_blank">Read the full article: https://www.pythonmorsels.com/inspecting-python-objects/</a></h3>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 14, 2024 09:49 PM UTC by
            <a href="https://www.pythonmorsels.com/topics/feed/" class="link link-hover text-primary"
              >Python Morsels</a
            >
          </div>
          <a
            href="https://www.pythonmorsels.com/inspecting-python-objects/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://blog.jetbrains.com/pycharm/2024/11/pycharm-2024-3/" class="hover:underline"
              >Inline AI Prompting, Coding Assistance for the dataclass_transform Decorator (PEP 681), and More in PyCharm 2024.3!</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            Code smarter, optimize performance, and stay focused on what matters most with the latest updates in PyCharm 2024.3. From enhanced support for AI Assistant and Jupyter notebooks to new features like no-code data filtering, there’s so much to explore.&#160; Learn about all the updates on our What’s New page, download the latest version from our [&#8230;]
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 14, 2024 01:42 PM UTC by
            <a href="http://feeds.feedburner.com/Pycharm" class="link link-hover text-primary"
              >PyCharm</a
            >
          </div>
          <a
            href="https://blog.jetbrains.com/pycharm/2024/11/pycharm-2024-3/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://realpython.com/quizzes/python-namespaces-scope/" class="hover:underline"
              >Quiz: Namespaces and Scope in Python</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            In this quiz, you'll test your understanding of Python namespaces and variable scope. These concepts are crucial for organizing the symbolic names assigned to objects in a Python program and ensuring they don't interfere with one another.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 14, 2024 12:00 PM UTC by
            <a href="https://realpython.com/atom.xml" class="link link-hover text-primary"
              >Real Python</a
            >
          </div>
          <a
            href="https://realpython.com/quizzes/python-namespaces-scope/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.pypy.org/posts/2024/11/guest-post-final-encoding-in-rpython.html" class="hover:underline"
              >Guest Post: Final Encoding in RPython Interpreters</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <h3 id="introduction">Introduction</h3>
<p>This post started as a quick note summarizing a recent experiment I carried
out upon a small RPython interpreter by rewriting it in an uncommon style. It
is written for folks who have already written some RPython and want to take a
deeper look at interpreter architecture.</p>
<p>Some experiments are about finding solutions to problems. This experiment is
about taking a solution which is already well-understood and applying it in
the context of RPython to find a new approach. As we will see, there is no
real change in functionality or the number of clauses in the interpreter; it's
more like a comparison between endo- and exoskeletons, a different arrangement
of equivalent bones and plates.</p>
<h3 id="overview">Overview</h3>
<p>An RPython interpreter for a programming language generally does three or four
things, in order:</p>
<ol>
<li>Read and parse input programs</li>
<li>Encode concrete syntax as abstract syntax</li>
<li><em>Optionally</em>, optimize or reduce the abstract syntax</li>
<li>Evaluate the abstract syntax: read input data, compute, print output data,
   etc.</li>
</ol>
<p>Today we'll look at abstract syntax. Most programming languages admit a
<a href="https://en.wikipedia.org/wiki/Parse_tree">concrete parse tree</a> which is
readily abstracted to provide an <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">abstract syntax
tree</a> (AST). The AST is
usually encoded with the <em>initial</em> style of encoding. An initial encoding can
be transformed into any other encoding for the same AST, looks like a
hierarchy of classes, and is implemented as a static structure on the heap.</p>
<p>In contrast, there is also a <em>final</em> encoding. A final encoding can be
transformed into by any other encoding, looks like an interface for the
actions of the interpreter, and is implemented as an unwinding structure on
the stack. From the RPython perspective, Python builtin modules like <code>os</code> or
<code>sys</code> are final encodings for features of the operating system; the underlying
implementation is different when translated or untranslated, but the interface
used to access those features does not change.</p>
<p>In RPython, an initial encoding is built from a hierarchy of classes. Each
class represents a type of tree nodes, corresponding to a parser production in
the concrete parse tree. Each class instance therefore represents an
individual tree node. The fields of a class, particularly those filled during
<code>.__init__()</code>, store pre-computed properties of each node; methods can be used
to compute node properties on demand. This seems like an obvious and simple
approach; what other approaches could there be? We need an example.</p>
<h3 id="final-encoding-of-brainfuck">Final Encoding of Brainfuck</h3>
<p>We will consider <a href="https://esolangs.org/wiki/Brainfuck">Brainfuck</a>, a simple
Turing-complete programming language. An example Brainfuck program might be:</p>
<div class="code"><pre class="code literal-block"><span class="k">[</span><span class="nb">-</span><span class="k">]</span>
</pre></div>

<p>This program is built from a loop and a decrement, and sets a cell to zero. In
an initial encoding which follows the <a href="https://esolangs.org/wiki/Algebraic_Brainfuck">algebraic semantics of
Brainfuck</a>, the program could
be expressed by applying class constructors to build a structure on the heap:</p>
<div class="code"><pre class="code literal-block"><span class="n">Loop</span><span class="p">(</span><span class="n">Plus</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

<p>A final encoding is similar, except that class constructors are replaced by
methods, the structure is built on the stack, and we are parameterized over
the choice of class:</p>
<div class="code"><pre class="code literal-block"><span class="k">lambda</span> <span class="bp">cls</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">loop</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

<p>In ordinary Python, transforming between these would be trivial, and mostly is
a matter of passing around the appropriate class. Indeed, initial and final
encodings are equivalent; we'll return to that fact later. However, in RPython,
all of the types must line up, and classes must be determined before
translation. We'll need to monomorphize our final encodings, using some
RPython tricks later on. Before that, let's see what an actual Brainfuck
interface looks like, so that we can cover all of the difficulties with final
encoding.</p>
<p>Before we embark, please keep in mind that local code doesn't know what <code>cls</code>
is. There's no type-safe way to inspect an arbitrary semantic domain. In the
initial-encoded version, we can ask <code>isinstance(bf, Loop)</code> to see whether an
AST node is a loop, but there simply isn't an equivalent for final-encoded
ASTs. So, there is an implicit challenge to think about: how do we evaluate a
program in an arbitrary semantic domain? For bonus points, how do we optimize
a program without inspecting the types of its AST nodes?</p>
<p>What follows is a dissection of
<a href="https://github.com/rpypkgs/rpypkgs/blob/d439d225b79ac82e009a5f1cd1c670f00356464c/bf/bf.py">this</a>
module at the given revision. Readers may find it satisfying to read the
entire interpreter top to bottom first; it is less than 300 lines.</p>
<h4 id="core-functionality">Core Functionality</h4>
<p>Final encoding is given as methods on an interface. These five methods
correspond precisely to the summands of the algebra of Brainfuck.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">BF</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># Other methods elided</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">plus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">loop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bfs</span><span class="p">):</span> <span class="k">pass</span>
</pre></div>

<p>Note that the <code>.loop()</code> method takes another program as an argument.
Initial-encoded ASTs have other initial-encoded ASTs as fields on class
instances; final-encoded ASTs have other final-encoded ASTs as parameters
to interface methods. RPython infers all of the types, so the reader has to
know that <code>i</code> is usually an integer while <code>bfs</code> is a sequence of Brainfuck
operations.</p>
<p>We're using a class to implement this functionality. Later, we'll treat it as
a mixin, rather than a superclass, to avoid typing problems.</p>
<h4 id="monoid">Monoid</h4>
<p>In order to optimize input programs, we'll need to represent the underlying
<a href="https://en.wikipedia.org/wiki/Monoid">monoid</a> of Brainfuck programs. To do
this, we add the signature for a monoid:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">BF</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># Other methods elided</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span> <span class="k">pass</span>
</pre></div>

<p>This is technically a <a href="https://en.wikipedia.org/wiki/Magma_(algebra)">unital
magma</a>, since RPython doesn't
support algebraic laws, but we will enforce the algebraic laws later on during
optimization. We also want to make use of the folklore that <a href="https://en.wikipedia.org/wiki/Free_monoid">free
monoids</a> are lists, allowing
callers to pass a list of actions which we'll reduce with recursion:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">BF</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># Other methods elided</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">joinList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bfs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">bfs</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bfs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bfs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">bfs</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joinList</span><span class="p">(</span><span class="n">bfs</span><span class="p">[:</span><span class="n">i</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">joinList</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="n">i</span><span class="p">:]))</span>
</pre></div>

<p><code>.joinList()</code> is a little bulky to implement, but Wirth's principle applies:
the interpreter is shorter with it than without it.</p>
<h4 id="idioms">Idioms</h4>
<p>Finally, our interface includes a few high-level idioms, like the zero program
shown earlier, which are defined in terms of low-level behaviors. In an
initial encoding, these could be defined as module-level functions; here, we
define them on the mixin class <code>BF</code>.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">BF</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># Other methods elided</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">zero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scalemove</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">move2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scalemove2</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">scalemove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joinList</span><span class="p">([</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="o">-</span><span class="n">i</span><span class="p">)]))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">scalemove2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joinList</span><span class="p">([</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="o">-</span><span class="n">j</span><span class="p">)]))</span>
</pre></div>

<h3 id="interface-oriented-architecture">Interface-oriented Architecture</h3>
<h4 id="applying-interfaces">Applying Interfaces</h4>
<p>Now, we hack at RPython's object model until everything translates. First,
consider the task of pretty-printing. For Brainfuck, we'll simply regurgitate
the input program as a Python string:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">AsStr</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">import_from_mixin</span><span class="p">(</span><span class="n">BF</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="s2">""</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span> <span class="k">return</span> <span class="n">l</span> <span class="o">+</span> <span class="n">r</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">plus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span> <span class="k">return</span> <span class="s1">'+'</span> <span class="o">*</span> <span class="n">i</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">'-'</span> <span class="o">*</span> <span class="o">-</span><span class="n">i</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span> <span class="k">return</span> <span class="s1">'&gt;'</span> <span class="o">*</span> <span class="n">i</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">'&lt;'</span> <span class="o">*</span> <span class="o">-</span><span class="n">i</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">loop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bfs</span><span class="p">):</span> <span class="k">return</span> <span class="s1">'['</span> <span class="o">+</span> <span class="n">bfs</span> <span class="o">+</span> <span class="s1">']'</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="s1">','</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="s1">'.'</span>
</pre></div>

<p>Via <code>rlib.objectmodel.import_from_mixin</code>, no stressing with covariance of
return types is required. Instead, we shift from a Java-esque view of classes
and objects, to an OCaml-ish view of prebuilt classes and constructors.
<code>AsStr</code> is monomorphic, and any caller of it will have to create their own
covariance somehow. For example, here are the first few lines of the parsing
function:</p>
<div class="code"><pre class="code literal-block"><span class="nd">@specialize</span><span class="o">.</span><span class="n">argtype</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
    <span class="n">ops</span> <span class="o">=</span> <span class="p">[</span><span class="n">domain</span><span class="o">.</span><span class="n">unit</span><span class="p">()]</span>
    <span class="c1"># Parser elided to preserve the reader's attention</span>
</pre></div>

<p>By invoking <code>rlib.objectmodel.specialize.argtype</code>, we make copies of the
parsing function, up to one per call site, based on our choice of semantic
domain. <a href="https://okmij.org/ftp/tagless-final/">Oleg</a> calls these "symantics"
but I prefer "domain" in code. Also, note how the parsing stack starts with
the unit of the monoid, which corresponds to the empty input string; the
parser will repeatedly use the monoidal join to build up a parsed expression
without inspecting it. Here's a small taste of that:</p>
<div class="code"><pre class="code literal-block"><span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">char</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s1">'+'</span><span class="p">:</span> <span class="n">ops</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ops</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">domain</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">char</span> <span class="o">==</span> <span class="s1">'-'</span><span class="p">:</span> <span class="n">ops</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ops</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">domain</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="c1"># and so on</span>
</pre></div>

<p>The reader may feel justifiably mystified; what breaks if we don't add these
magic annotations? Well, the translator will throw <code>UnionError</code> because the
low-level types don't match. RPython only wants to make one copy of functions
like <code>parse()</code> in its low-level representation, and each copy of <code>parse()</code>
will be compiled to monomorphic machine code. In this interpreter, in order to
support parsing to an optimized string and also parsing to an evaluator, we
need two copies of <code>parse()</code>. <strong>It is okay to not fully understand this at
first.</strong></p>
<h4 id="composing-interfaces">Composing Interfaces</h4>
<p>Earlier, we noted that an interpreter can optionally optimize input programs
after parsing. To support this, we'll precompose a <a href="https://en.wikipedia.org/wiki/Peephole_optimization">peephole
optimizer</a> onto an
arbitrary domain. We could also postcompose with a parser instead, but that
sounds more difficult. Here are the relevant parts:</p>
<div class="code"><pre class="code literal-block"><span class="k">def</span><span class="w"> </span><span class="nf">makePeephole</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stripDomain</span><span class="p">(</span><span class="n">bfs</span><span class="p">):</span> <span class="k">return</span> <span class="n">domain</span><span class="o">.</span><span class="n">joinList</span><span class="p">([</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">bfs</span><span class="p">])</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">Peephole</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="n">import_from_mixin</span><span class="p">(</span><span class="n">BF</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="p">[]</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span> <span class="k">return</span> <span class="n">l</span> <span class="o">+</span> <span class="n">r</span>
        <span class="c1"># Actual definition elided... for now...</span>
    <span class="k">return</span> <span class="n">Peephole</span><span class="p">,</span> <span class="n">stripDomain</span>
</pre></div>

<p>Don't worry about the actual optimization yet. What's important here is the
pattern of initialization of semantic domains. <code>makePeephole</code> is an
<a href="https://en.wikipedia.org/wiki/Standard_ML">SML</a>-style functor on semantic
domains: given a final encoding of Brainfuck, it produces another final
encoding of Brainfuck which incorporates optimizations. The helper
<code>stripDomain</code> is a finalizer which performs the extraction from the
optimizer's domain to the underlying <code>cls</code> that was passed in at translation
time. For example, let's optimize pretty-printing:</p>
<div class="code"><pre class="code literal-block"><span class="n">AsStr</span><span class="p">,</span> <span class="n">finishStr</span> <span class="o">=</span> <span class="n">makePeephole</span><span class="p">(</span><span class="n">AsStr</span><span class="p">)</span>
</pre></div>

<p>Now, it only takes one line to parse and print an optimized AST without ever
building it on the heap. To be pedantic, fragments of the output string will
be heap-allocated, but the AST's node structure will only ever be
stack-allocated. Further, to be shallow, the parser is written to prevent
malicious input from causing a stack overflow, and this forces it to maintain
a heap-allocated RPython list of intermediate operations inside loops.</p>
<div class="code"><pre class="code literal-block"><span class="nb">print</span> <span class="n">finishStr</span><span class="p">(</span><span class="n">parse</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">AsStr</span><span class="p">()))</span>
</pre></div>

<h3 id="performance">Performance</h3>
<p>But is it fast? Yes. It's faster than the prior version, which was
initial-encoded, and also faster than Andrew Brown's classic version (<a href="https://pypy.org/posts/2011/04/tutorial-writing-interpreter-with-pypy-3785910476193156295.html">part
1</a>,
<a href="https://pypy.org/posts/2011/04/tutorial-part-2-adding-jit-8121732841568309472.html">part
2</a>).
Since Brown's interpreter does not perform much optimization, we will focus on
how final encoding can outperform initial encoding.</p>
<h4 id="jit">JIT</h4>
<p>First, why is it faster than the same interpreter with initial encoding? Well,
it still has initial encoding from the JIT's perspective! There is an <code>Op</code>
class with a hierarchy of subclasses implementing individual behaviors. A
sincere tagless-final student, or those who remember <a href="https://pyvideo.org/pycon-us-2012/stop-writing-classes.html">Stop Writing Classes
(2012, Pycon
US)</a>, will
recognize that the following classes could be plain functions, and should
think of the classes as a concession to RPython's lack of support for lambdas
with closures rather than an initial encoding. We aren't ever going to
directly typecheck any <code>Op</code>, but the JIT will generate typechecking guards
anyway, so we effectively get a fully-promoted AST inlined into each JIT
trace. First, some simple behaviors:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">Op</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="n">_immutable_</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span><span class="w"> </span><span class="nc">_Input</span><span class="p">(</span><span class="n">Op</span><span class="p">):</span>
    <span class="n">_immutable_</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">runOn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tape</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="n">tape</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">position</span>
<span class="n">Input</span> <span class="o">=</span> <span class="n">_Input</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">_Output</span><span class="p">(</span><span class="n">Op</span><span class="p">):</span>
    <span class="n">_immutable_</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">runOn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tape</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="n">tape</span><span class="p">[</span><span class="n">position</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">position</span>
<span class="n">Output</span> <span class="o">=</span> <span class="n">_Output</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Add</span><span class="p">(</span><span class="n">Op</span><span class="p">):</span>
    <span class="n">_immutable_</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_immutable_fields_</span> <span class="o">=</span> <span class="s2">"imm"</span><span class="p">,</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imm</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">imm</span> <span class="o">=</span> <span class="n">imm</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">runOn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tape</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="n">tape</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imm</span>
        <span class="k">return</span> <span class="n">position</span>
</pre></div>

<p>The JIT does technically have less information than before; it no longer knows
that a sequence of immutable operations is immutable enough to be worth
unrolling, but a bit of <code>rlib.jit.unroll_safe</code> fixes that:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="n">Op</span><span class="p">):</span>
    <span class="n">_immutable_</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_immutable_fields_</span> <span class="o">=</span> <span class="s2">"ops[*]"</span><span class="p">,</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ops</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">ops</span> <span class="o">=</span> <span class="n">ops</span>
    <span class="nd">@unroll_safe</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">runOn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tape</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ops</span><span class="p">:</span> <span class="n">position</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">runOn</span><span class="p">(</span><span class="n">tape</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">position</span>
</pre></div>

<p>Finally, the JIT entry point is at the head of each loop, just like with prior
interpreters. Since Brainfuck doesn't support mid-loop jumps, there's no
penalty for only allowing merge points at the head of the loop.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">Loop</span><span class="p">(</span><span class="n">Op</span><span class="p">):</span>
    <span class="n">_immutable_</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_immutable_fields_</span> <span class="o">=</span> <span class="s2">"op"</span><span class="p">,</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span> <span class="o">=</span> <span class="n">op</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">runOn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tape</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span>
        <span class="k">while</span> <span class="n">tape</span><span class="p">[</span><span class="n">position</span><span class="p">]:</span>
            <span class="n">jitdriver</span><span class="o">.</span><span class="n">jit_merge_point</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">tape</span><span class="o">=</span><span class="n">tape</span><span class="p">)</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">runOn</span><span class="p">(</span><span class="n">tape</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">position</span>
</pre></div>

<p>That's the end of the implicit challenge. There's no secret to it; just
evaluate the AST. Here's part of the semantic domain for evaluation, as well
as the "functor" to optimize it. In <code>AsOps.join()</code> are the <em>only</em>
<code>isinstance()</code> calls in the entire interpreter! This is acceptable because
<code>Seq</code> is effectively a type wrapper for an RPython list, so that a list of
operations is also an operation; its list is initial-encoded and available for
inspection.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">AsOps</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">import_from_mixin</span><span class="p">(</span><span class="n">BF</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="n">Shift</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">Seq</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">Seq</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Seq</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">ops</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">ops</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">Seq</span><span class="p">):</span> <span class="k">return</span> <span class="n">Seq</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">ops</span> <span class="o">+</span> <span class="p">[</span><span class="n">r</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">Seq</span><span class="p">):</span> <span class="k">return</span> <span class="n">Seq</span><span class="p">([</span><span class="n">l</span><span class="p">]</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">ops</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Seq</span><span class="p">([</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">])</span>
    <span class="c1"># Other methods elided!</span>

<span class="n">AsOps</span><span class="p">,</span> <span class="n">finishOps</span> <span class="o">=</span> <span class="n">makePeephole</span><span class="p">(</span><span class="n">AsOps</span><span class="p">)</span>
</pre></div>

<p>And finally here is the actual top-level code to evaluate the input program.
As before, once everything is composed, the actual invocation only takes one
line.</p>
<div class="code"><pre class="code literal-block"><span class="n">tape</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="s2">"</span><span class="se">\x00</span><span class="s2">"</span> <span class="o">*</span> <span class="n">cells</span><span class="p">)</span>
<span class="n">finishOps</span><span class="p">(</span><span class="n">parse</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">AsOps</span><span class="p">()))</span><span class="o">.</span><span class="n">runOn</span><span class="p">(</span><span class="n">tape</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

<h4 id="peephole-optimization">Peephole Optimization</h4>
<p>Our peephole optimizer is an <a href="https://en.wikipedia.org/wiki/Abstract_interpretation">abstract
interpreter</a> with one
instruction of lookahead/rewrite buffer. It implements the aforementioned
algebraic laws of the Brainfuck monoid. It also implements idiom recognition
for loops. First, the abstract interpreter. The abstract domain has six
elements:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="nc">AbstractDomain</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="k">pass</span>
<span class="n">meh</span><span class="p">,</span> <span class="n">aLoop</span><span class="p">,</span> <span class="n">aZero</span><span class="p">,</span> <span class="n">theIdentity</span><span class="p">,</span> <span class="n">anAdd</span><span class="p">,</span> <span class="n">aRight</span> <span class="o">=</span> <span class="p">[</span><span class="n">AbstractDomain</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)]</span>
</pre></div>

<p>We'll also tag everything with an integer, so that <code>anAdd</code> or <code>aRight</code> can be
exact annotations. <em>This</em> is the actual <code>Peephole.join()</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">l</span><span class="p">:</span> <span class="k">return</span> <span class="n">r</span>
    <span class="n">rv</span> <span class="o">=</span> <span class="n">l</span><span class="p">[:]</span>
    <span class="n">bfHead</span><span class="p">,</span> <span class="n">adHead</span><span class="p">,</span> <span class="n">immHead</span> <span class="o">=</span> <span class="n">rv</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">bf</span><span class="p">,</span> <span class="n">ad</span><span class="p">,</span> <span class="n">imm</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ad</span> <span class="ow">is</span> <span class="n">theIdentity</span><span class="p">:</span> <span class="k">continue</span>
        <span class="k">elif</span> <span class="n">adHead</span> <span class="ow">is</span> <span class="n">aLoop</span> <span class="ow">and</span> <span class="n">ad</span> <span class="ow">is</span> <span class="n">aLoop</span><span class="p">:</span> <span class="k">continue</span>
        <span class="k">elif</span> <span class="n">adHead</span> <span class="ow">is</span> <span class="n">theIdentity</span><span class="p">:</span>
            <span class="n">bfHead</span><span class="p">,</span> <span class="n">adHead</span><span class="p">,</span> <span class="n">immHead</span> <span class="o">=</span> <span class="n">bf</span><span class="p">,</span> <span class="n">ad</span><span class="p">,</span> <span class="n">imm</span>
        <span class="k">elif</span> <span class="n">adHead</span> <span class="ow">is</span> <span class="n">anAdd</span> <span class="ow">and</span> <span class="n">ad</span> <span class="ow">is</span> <span class="n">aZero</span><span class="p">:</span>
            <span class="n">bfHead</span><span class="p">,</span> <span class="n">adHead</span><span class="p">,</span> <span class="n">immHead</span> <span class="o">=</span> <span class="n">bf</span><span class="p">,</span> <span class="n">ad</span><span class="p">,</span> <span class="n">imm</span>
        <span class="k">elif</span> <span class="n">adHead</span> <span class="ow">is</span> <span class="n">anAdd</span> <span class="ow">and</span> <span class="n">ad</span> <span class="ow">is</span> <span class="n">anAdd</span><span class="p">:</span>
            <span class="n">immHead</span> <span class="o">+=</span> <span class="n">imm</span>
            <span class="k">if</span> <span class="n">immHead</span><span class="p">:</span> <span class="n">bfHead</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">plus</span><span class="p">(</span><span class="n">immHead</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">rv</span><span class="p">:</span> <span class="n">bfHead</span><span class="p">,</span> <span class="n">adHead</span><span class="p">,</span> <span class="n">immHead</span> <span class="o">=</span> <span class="n">rv</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bfHead</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
                <span class="n">adHead</span> <span class="o">=</span> <span class="n">theIdentity</span>
        <span class="k">elif</span> <span class="n">adHead</span> <span class="ow">is</span> <span class="n">aRight</span> <span class="ow">and</span> <span class="n">ad</span> <span class="ow">is</span> <span class="n">aRight</span><span class="p">:</span>
            <span class="n">immHead</span> <span class="o">+=</span> <span class="n">imm</span>
            <span class="k">if</span> <span class="n">immHead</span><span class="p">:</span> <span class="n">bfHead</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">immHead</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">rv</span><span class="p">:</span> <span class="n">bfHead</span><span class="p">,</span> <span class="n">adHead</span><span class="p">,</span> <span class="n">immHead</span> <span class="o">=</span> <span class="n">rv</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bfHead</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
                <span class="n">adHead</span> <span class="o">=</span> <span class="n">theIdentity</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rv</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">bfHead</span><span class="p">,</span> <span class="n">adHead</span><span class="p">,</span> <span class="n">immHead</span><span class="p">))</span>
            <span class="n">bfHead</span><span class="p">,</span> <span class="n">adHead</span><span class="p">,</span> <span class="n">immHead</span> <span class="o">=</span> <span class="n">bf</span><span class="p">,</span> <span class="n">ad</span><span class="p">,</span> <span class="n">imm</span>
    <span class="n">rv</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">bfHead</span><span class="p">,</span> <span class="n">adHead</span><span class="p">,</span> <span class="n">immHead</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">rv</span>
</pre></div>

<p>If this were to get much longer, then <a href="https://pypy.org/posts/2024/10/jit-peephole-dsl.html">implementing a
DSL</a> would be worth it,
but this is a short-enough method to inline. The abstract interpretation is
assumed by induction for the left-hand side of the join, save for the final
instruction, which is loaded into a rewrite register. Each instruction on the
right-hand side is inspected exactly once. The logic for <code>anAdd</code> followed by
<code>anAdd</code> is exactly the same as for <code>aRight</code> followed by <code>aRight</code> because they
both have underlying <a href="https://en.wikipedia.org/wiki/Abelian_group">Abelian
groups</a> given by the integers.
The rewrite register is carefully pushed onto and popped off from the
left-hand side in order to cancel out <code>theIdentity</code>, which itself is merely a
unifier for <code>anAdd</code> or <code>aRight</code> of 0.</p>
<p>Note that we generate a lot of garbage. For example, parsing a string of <em>n</em>
'+' characters will cause the peephole optimizer to allocate <em>n</em> instances of
the underlying <code>domain.plus()</code> action, from <code>domain.plus(1)</code> up to
<code>domain.plus(n)</code>. An older initial-encoded version of this interpreter used
<a href="https://en.wikipedia.org/wiki/Hash_consing">hash consing</a> to avoid ever
building an op more than once, even loops. It appears more efficient to
generate lots of immutable garbage than to repeatedly hash inputs and search
mutable hash tables, at least for optimizing Brainfuck incrementally during
parsing.</p>
<p>Finally, let's look at idiom recognition. RPython lists are initial-coded, so
we can dispatch based on the length of the list, and then inspect the abstract
domains of each action.</p>
<div class="code"><pre class="code literal-block"><span class="k">def</span><span class="w"> </span><span class="nf">isConstAdd</span><span class="p">(</span><span class="n">bf</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span> <span class="k">return</span> <span class="n">bf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">anAdd</span> <span class="ow">and</span> <span class="n">bf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span>

<span class="k">def</span><span class="w"> </span><span class="nf">oppositeShifts</span><span class="p">(</span><span class="n">bf1</span><span class="p">,</span> <span class="n">bf2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">bf1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">bf2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">aRight</span> <span class="ow">and</span> <span class="n">bf1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="n">bf2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">oppositeShifts2</span><span class="p">(</span><span class="n">bf1</span><span class="p">,</span> <span class="n">bf2</span><span class="p">,</span> <span class="n">bf3</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">bf1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">bf2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">bf3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">aRight</span> <span class="ow">and</span>
            <span class="n">bf1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">bf2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">bf3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">loop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bfs</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bfs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">bf</span><span class="p">,</span> <span class="n">ad</span><span class="p">,</span> <span class="n">imm</span> <span class="o">=</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ad</span> <span class="ow">is</span> <span class="n">anAdd</span> <span class="ow">and</span> <span class="n">imm</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[(</span><span class="n">domain</span><span class="o">.</span><span class="n">zero</span><span class="p">(),</span> <span class="n">aZero</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bfs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isConstAdd</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span>
            <span class="n">bfs</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">anAdd</span> <span class="ow">and</span>
            <span class="n">oppositeShifts</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">3</span><span class="p">])):</span>
            <span class="k">return</span> <span class="p">[(</span><span class="n">domain</span><span class="o">.</span><span class="n">scalemove</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]),</span> <span class="n">aLoop</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isConstAdd</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span>
            <span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">anAdd</span> <span class="ow">and</span>
            <span class="n">oppositeShifts</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">2</span><span class="p">])):</span>
            <span class="k">return</span> <span class="p">[(</span><span class="n">domain</span><span class="o">.</span><span class="n">scalemove</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]),</span> <span class="n">aLoop</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bfs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isConstAdd</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span>
            <span class="n">bfs</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">anAdd</span> <span class="ow">and</span>
            <span class="n">oppositeShifts2</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">5</span><span class="p">])):</span>
            <span class="k">return</span> <span class="p">[(</span><span class="n">domain</span><span class="o">.</span><span class="n">scalemove2</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                                       <span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                                       <span class="n">bfs</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">]),</span> <span class="n">aLoop</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isConstAdd</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span>
            <span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">anAdd</span> <span class="ow">and</span>
            <span class="n">oppositeShifts2</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">4</span><span class="p">])):</span>
            <span class="k">return</span> <span class="p">[(</span><span class="n">domain</span><span class="o">.</span><span class="n">scalemove2</span><span class="p">(</span><span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                                       <span class="n">bfs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">bfs</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                                       <span class="n">bfs</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]),</span> <span class="n">aLoop</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="k">return</span> <span class="p">[(</span><span class="n">domain</span><span class="o">.</span><span class="n">loop</span><span class="p">(</span><span class="n">stripDomain</span><span class="p">(</span><span class="n">bfs</span><span class="p">)),</span> <span class="n">aLoop</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
</pre></div>

<p>This ends the bonus question. How do we optimize an unknown semantic domain?
We must maintain an abstract context which describes elements of the domain.
In initial encoding, we ask an AST about itself. In final encoding, we already
know everything relevant about the AST.</p>
<p>The careful reader will see that I didn't really answer that opening question
in the JIT section. Because the JIT still ranges over the same operations as
before, it can't really be slower; but why is it now faster? Because the
optimizer is now slightly better in a few edge cases. It performs the same
optimizations as before, but the rigor of abstract interpretation causes it to
emit slightly better operations to the JIT backend.</p>
<p>Concretely, improving the optimizer can shorten pretty-printed programs. The
<a href="https://bbgauge.info/">Busy Beaver Gauge</a> measures the length of programs
which search for solutions to mathematical problems. After implementing and
debugging the final-encoded interpreter, I found that two of my entries on the
<a href="https://bbgauge.info/brainfuck.html">Busy Beaver Gauge for Brainfuck</a> had
become shorter by about 2%. (Most other entries are already hand-optimized
according to the standard algebra and have no optimization opportunities.)</p>
<h3 id="discussion">Discussion</h3>
<p>Given that initial and final encodings are equivalent, and noting that
RPython's toolchain is written to prefer initial encodings, what did we
actually gain? Did we gain anything?</p>
<p>One obvious downside to final encoding in RPython is interpreter size. The
example interpreter shown here is a rewrite of an initial-encoded interpreter
which can be seen
<a href="https://github.com/rpypkgs/rpypkgs/blob/659c8a26d428a1e04fdff614b28e464a50d4647b/bf/bf.py">here</a>
for comparison. Final encoding adds about 20% more code in this case.</p>
<p>Final encoding is not necessarily more code than initial encoding, though. All
AST encodings in interpreters are subject to the <a href="https://en.wikipedia.org/wiki/Expression_problem">Expression
Problem</a>, which states that
there is generally a quadratic amount of code required to implement multiple
behaviors for an AST with multiple types of nodes; specifically, <em>n</em> behaviors
for <em>m</em> types of nodes require <em>n</em> × <em>m</em> methods. Initial encodings improve the
cost of adding new types of nodes; final encodings improve the cost of adding
new behaviors. Final encoding may tend to win in large codebases for mature
languages, where the language does not change often but new behaviors are added
frequently and maintained for long periods.</p>
<p>Optimizations in final encoding require a bit of planning. The
abstract-interpretation approach is solid but relies upon the monoid and its
algebraic laws. In the worst case, an entire class hierarchy could be required
to encode the abstraction.</p>
<p>It is remarkable to find <strong>a 2% improvement in residual program size</strong> merely
by reimplementing an optimizer as an abstract interpreter respecting the
algebraic laws. This could be the most important lesson for compiler
engineers, if it happens to generalize.</p>
<p>Final encoding was popularized via the tagless-final movement in OCaml and
Scala, including famously in a series of tutorials by <a href="https://okmij.org/ftp/tagless-final/">Kiselyov et
al</a>. A "tag", in this jargon, is a
runtime identifier for an object's type or class; a tagless encoding
effectively doesn't allow <code>isinstance()</code> at all. In the above presentation,
tags could be hacked in, but were not materially relevant to most steps. Tags
were required for the final evaluation step, though, and the tagless-final
insight is that certain type systems can express type-safe evaluation without
those tags. We won't go further in this direction because tags also
communicate valuable information to the JIT.</p>
<h4 id="summarizing-table">Summarizing Table</h4>
<table>
<thead>
<tr>
<th>Initial Encoding</th>
<th>Final Encoding</th>
</tr>
</thead>
<tbody>
<tr>
<td>hierarchy of classes</td>
<td>signature of interfaces</td>
</tr>
<tr>
<td>class constructors</td>
<td>method calls</td>
</tr>
<tr>
<td>built on the heap</td>
<td>built on the stack</td>
</tr>
<tr>
<td>traversals allocate stack</td>
<td>traversals allocate heap</td>
</tr>
<tr>
<td>tags are available with <code>isinstance()</code></td>
<td>tags are only available through hacks</td>
</tr>
<tr>
<td>cost of adding a new AST node: one class</td>
<td>cost of adding a new AST node: one method on every other class</td>
</tr>
<tr>
<td>cost of adding a new behavior: one method on every other class</td>
<td>cost of adding a new behavior: one class</td>
</tr>
</tbody>
</table>
<h3 id="credits">Credits</h3>
<p>Thanks to folks in <code>#pypy</code> on Libera Chat: arigato for the idea, larstiq for
pushing me to write it up, and cfbolz and mattip for reviewing and finding
mistakes. The original IRC discussion leading to this blog post is available
<a href="https://gist.github.com/MostAwesomeDude/fd86ad2d2e38af7aa67b6e548aabe008">here</a>.</p>
<p>This interpreter is part of the <a href="https://github.com/rpypkgs/rpypkgs">rpypkgs</a>
suite, a Nix flake for RPython interpreters. Readers with Nix installed can
run this interpreter directly from the flake:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>nix-prefetch-url<span class="w"> </span>https://github.com/MG-K/pypy-tutorial-ko/raw/refs/heads/master/mandel.b
$<span class="w"> </span>nix<span class="w"> </span>run<span class="w"> </span>github:rpypkgs/rpypkgs#bf<span class="w"> </span>--<span class="w"> </span>/nix/store/ngnphbap9ncvz41d0fkvdh61n7j2bg21-mandel.b
</pre></div>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 14, 2024 08:42 AM UTC by
            <a href="https://www.pypy.org/rss.xml" class="link link-hover text-primary"
              >PyPy</a
            >
          </div>
          <a
            href="https://www.pypy.org/posts/2024/11/guest-post-final-encoding-in-rpython.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://pythonbytes.fm/episodes/show/409/weve-moved-to-hetzner-write-up" class="hover:underline"
              >#409 We've moved to Hetzner write-up</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            Topics include terminal-tree, posting: The API client that lives in your terminal, , and UV does everything or enough that I'm not sure what else it needs to do.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 14, 2024 08:00 AM UTC by
            <a href="https://pythonbytes.fm/episodes/rss" class="link link-hover text-primary"
              >Python Bytes</a
            >
          </div>
          <a
            href="https://pythonbytes.fm/episodes/show/409/weve-moved-to-hetzner-write-up"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://stefan.sofa-rockers.org/2024/11/14/gitlab-trusted-publisher/" class="hover:underline"
              >Publishing to PyPI with a Trusted Publisher from GitLab CI/CD</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>Learn how to securely upload Python packages to PyPI from GitLab <span class="caps">CI</span>/<span class="caps">CD</span>
pipelines using a “Trusted Publisher” (and without <span class="caps">API</span> tokens).
Continuously test the release process with TestPyPI on every push.
Use GitLab (deploy) environments as an additional security&nbsp;measure.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 14, 2024 06:18 AM UTC by
            <a href="http://stefan.sofa-rockers.org/feeds/python" class="link link-hover text-primary"
              >Stefan Scherfke</a
            >
          </div>
          <a
            href="https://stefan.sofa-rockers.org/2024/11/14/gitlab-trusted-publisher/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://blog.jetbrains.com/ai/2024/11/jetbrains-ai-assistant-2024-3/" class="hover:underline"
              >JetBrains AI Assistant 2024.3: Refine Your AI Experience With Model Selection, Enhanced Code Completion, and More</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            JetBrains AI Assistant 2024.3 is here! A highlight of this release is the flexibility to choose your preferred chat model. Select between Google Gemini, OpenAI, or local models to tailor interactions for a more customized experience.&#160; This update also brings advanced code completion for all major programming languages, improved context management, and the ability to [&#8230;]
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 13, 2024 02:13 PM UTC by
            <a href="http://feeds.feedburner.com/Pycharm" class="link link-hover text-primary"
              >PyCharm</a
            >
          </div>
          <a
            href="https://blog.jetbrains.com/ai/2024/11/jetbrains-ai-assistant-2024-3/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.blog.pythonlibrary.org/2024/11/13/ann-the-textual-cogs-package-creating-reusable-dialogs-for-textual/" class="hover:underline"
              >ANN – The textual-cogs Package – Creating Reusable Dialogs for Textual</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>Textual-cogs is a collection of Textual dialogs that you can use in your Textual application. You can see a quick demo of the dialogs below: Dialogs included so far: Generic MessageDialog &#8211; shows messages to the user SaveFileDialog &#8211; gives the user a way to select a location to save a file SingleChoiceDialog &#8211; gives the user a series [&#8230;]</p>
<p>The post <a href="https://www.blog.pythonlibrary.org/2024/11/13/ann-the-textual-cogs-package-creating-reusable-dialogs-for-textual/">ANN &#8211; The textual-cogs Package &#8211; Creating Reusable Dialogs for Textual</a> appeared first on <a href="https://www.blog.pythonlibrary.org">Mouse Vs Python</a>.</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 13, 2024 01:30 PM UTC by
            <a href="http://www.blog.pythonlibrary.org/feed/" class="link link-hover text-primary"
              >Mike Driscoll</a
            >
          </div>
          <a
            href="https://www.blog.pythonlibrary.org/2024/11/13/ann-the-textual-cogs-package-creating-reusable-dialogs-for-textual/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://realpython.com/quizzes/python-input-output/" class="hover:underline"
              >Quiz: Basic Input and Output in Python</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            In this quiz, you'll test your understanding of Python's built-in functions for user interaction, namely input() and print(). These functions allow you to capture user input from the keyboard and display output to the console, respectively.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 13, 2024 12:00 PM UTC by
            <a href="https://realpython.com/atom.xml" class="link link-hover text-primary"
              >Real Python</a
            >
          </div>
          <a
            href="https://realpython.com/quizzes/python-input-output/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://realpython.com/quizzes/python-dictionary-comprehension/" class="hover:underline"
              >Quiz: Python Dictionary Comprehensions: How and When to Use Them</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            In this quiz, you'll test your understanding of Python dictionary comprehensions. Dictionary comprehensions are a concise and quick way to create, transform, and filter dictionaries in Python, and can significantly enhance your code's conciseness and readability.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 13, 2024 12:00 PM UTC by
            <a href="https://realpython.com/atom.xml" class="link link-hover text-primary"
              >Real Python</a
            >
          </div>
          <a
            href="https://realpython.com/quizzes/python-dictionary-comprehension/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://www.egenix.com/company/news/eGenix-PyRun-2.6.0-GA.html" class="hover:underline"
              >eGenix PyRun - One file Python Runtime 2.6.0 GA</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <h2>Introduction</h2>
<p><strong>eGenix PyRun</strong><a class="egenix-tm" href="/company/legal/trademarks.html">™</a>
 is our open source, one file, no installation version of Python, making
 the distribution of a Python interpreter to run Python based scripts 
and applications to Unix based systems simple and efficient.</p>


<p>eGenix PyRun's executable <b>only needs 4-6MB </b><b>on disk</b>, but still supports most Python applications and scripts.
</p>

<p>Compared to a regular Python installation of typically 100MB on disk,
 eGenix PyRun is ideal for applications and scripts that need to be 
distributed to containers, VMs, clusters, client installations, customers or end-users.</p>


<p style="font-weight: bold;">It makes "installing" Python on a Unix based system as simple as copying a single file.</p>

<p>eGenix has been using eGenix PyRun as run-time for the Linux version of <a href="/products/python/mxODBCConnect/">mxODBC Connect Server</a> 
product since 2008 with great success and decided to make it available as a 
stand-alone open-source product.
</p>



We provide the source archive to build your own <a href="https://github.com/eGenix/egenix-pyrun"><b>eGenix PyRun on Github</b></a>,
 as well as a few binary distributions to get you started on Linux 
x86_64. In the future, we will set up automated builds for several other
 platforms.<p>Please see the product page for more details:


</p>
<p>&nbsp;&nbsp;&nbsp; <a href="/products/python/PyRun/" style="font-weight: bold;">&gt;&gt;&gt; eGenix PyRun - One file Python Runtime</a></p>



<h2>News</h2>
<p>This major release of <a href="/products/python/PyRun">eGenix PyRun</a> comes with the following enhancements:</p>
<h3>Enhancements / Changes

</h3>

<ul>
<li>Added support for <b>Python 3.12</b></li>
<li style="margin-top: 0.25em;">Added support for LTO release builds</li>
<li style="margin-top: 0.25em;">Added dev build targets for development; these don't use PGO and thus build faster</li>
</ul>
For a complete list of changes, please see the <b><a href="/products/python/PyRun/changelog.html">eGenix PyRun Changelog</a></b>.



<h2>Downloads</h2>
<p>Please visit the <a href="/products/python/PyRun">eGenix PyRun</a> product page for  downloads, instructions on installation and documentation of the product. <br />
</p>
<h2>Support</h2>

<p>Commercial support for this product is available directly from eGenix.com. <br />
  <br />
 Please see the <a href="/services/support/">support section of our website</a> for details.</p>
<h2>More Information</h2>
<p>For more information on eGenix PyRun, licensing and download instructions, please write to <a href="mailto:sales@egenix.com">sales@egenix.com</a>.</p>
<p>Enjoy !</p>
<p><em> Marc-Andre Lemburg, eGenix.com</em></p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 13, 2024 09:00 AM UTC by
            <a href="http://www.egenix.com/company/news/rss2" class="link link-hover text-primary"
              >eGenix.com</a
            >
          </div>
          <a
            href="https://www.egenix.com/company/news/eGenix-PyRun-2.6.0-GA.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://zato.io/en/blog/web-scraping-api-integrations.html" class="hover:underline"
              >Web scraping as an API service</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <h1 class="insights-header">
  <a class="rounded nav-title" href="https://zato.io/en/blog/web-scraping-api-integrations.html">Web scraping as an API service</a>
</h1>
<div class="article-meta">
  2024-11-13, by Dariusz Suchojad
<img alt="" class="insights-author" src="https://upcdn.io/kW15bqq/raw/root/static/blog/authors/dsuch.webp" width="35" />
</div>

<h3 id="overview">Overview</h3>
<p>In systems-to-systems integrations, there comes an inevitable time when we have to employ some kind of a web scraping tool
to integrate with a particular application. Despite its not being our first choice, it is good to know what to use
at such a time - in this article, I provide a gentle introduction to my favorite tool of this kind,
called <a href="https://playwright.dev/">Playwright</a>, followed by sample Python code that integrates it with an API service.</p>
<p><center>
<img src="https://upcdn.io/kW15bqq/raw/root/static/blog/images/3.2-web-scraping/browsers.png" />
</center></p>
<p>Naturally, in the context of backend integrations, web scraping should be avoided and, generally, it should be considered
the last resort. The basic issue here is that while the UI term contains the "interface" part, it is not really the "Application
Programming" Interface that we would like to have.</p>
<p>It is not that the UI cannot be programmed against. After all, a web browser does just that, it takes a web page and renders
it as expected. Same goes for desktop or mobile applications. Also, anyone integrating with mainframe computers will recognize
that this is basically what <a href="https://en.wikipedia.org/wiki/3270_emulator">3270</a> can be used for too.</p>
<p>Rather, the fundamental issue is that web scraping goes against
the principles of separation of layers and roles across frontend, middleware and backend, which in turn means that authors
of resources (e.g. HTML pages) do not really expect for many people to access them in automated ways.</p>
<p>Perhaps they actually should expect it, and web pages should finally start to resemble genuine knowledge graphs,
easy to access by humans, be it manually or through automation tools, but the reality today is that it is not the case
and, in comparison with backend systems, the whole of the web scraping space is relatively brittle, which is why we shun
this approach in integrations.</p>
<p>Yet, another part of reality, particularly in enterprise integrations, is that people may be sometimes given access to a frontend
application on an internal network and that is it. No API, no REST, no JSON, no POST data, no real data formats,
and one is simply supposed to fill out forms as part of a business process.</p>
<p>Typically, such a situation will result in an integration gap. There will be fully automated parts in the business process
preceding this gap, with multiple systems coordinated towards a specific goal and there will be subsequent steps in the process,
also fully automated.</p>
<p>Or you may be given access only to a specific frontend and only through VPN via a single remote Windows desktop. Getting access
to a REST API may take months or may be never realized because of some high level licensing issues. This is not uncommon in the
real life.</p>
<p>Such a gap can be a jarring and sore point, truly ruining the whole, otherwise fluid, integration process. This creates a tension
and to resolve the tension, we can, should all the attempts to find a real API fail, finally resort to web scraping.</p>
<p>It is mostly in this context that I am looking at Playwright below -  the tool is good and it has many other uses that go beyond
the scope of this text, and it is well worth knowing it, for instance for frontend testing of your backend systems, but, when
we deal with API integrations, we should not overdo with web scraping.</p>
<p>Needless to say, if web scraping is what you do primarily, your perspective will be somewhat different - you will not need
any explanation of why it is needed or when, and you may be only looking for a way to enclose up your web scraping code
in API services. This article will explain that too.</p>
<h2 id="introducing-playwright">Introducing Playwright</h2>
<p>The nice part of Playwright is that we can use it to visually prepare a draft of Python code that will scrape a given resource.
That is, instead of programming it in Python, we go to an address, fill out a form, click buttons and otherwise use everything
as usually and Playwright generates for us code that will be later used in integrations.</p>
<p>That code will require a bit of clean-up work, which I will talk about below, but overall it works very nicely and is certainly useful.
The result is not one of these do-not-touch auto-generated pieces of code that are better left to their own.</p>
<p>While there are
<a href="https://zato.io/en/blog/jira-python-api.html">better ways to integrate with Jira</a>,
I chose that application as an example of Playwright's usage simply because I cannot show you any internal
application in a public blog post.</p>
<p>Below, there are two windows. One is Playwright's emulating a Blackberry device to open a resource. I was clicking around,
I provided an email address and then I clicked the same email field once more. To the right, based on my actions, we can find
the generated Python code, which I consider quite good and readable.</p>
<p>The Playwright Inspector, the tool that gave us the code, will keep recording all of our actions until we click the "Record" button
which then allows us to click the button next to "Record" which is "Copy code to clipboard". We can then save the code
to a separate file and run it on demand, automatically.</p>
<p><center>
<img src="https://upcdn.io/kW15bqq/raw/root/static/blog/images/3.2-web-scraping/playwright-inspector.png" />
</center></p>
<p>But first, we will need to install Playwright.</p>
<h2 id="installing-and-starting-playwright">Installing and starting Playwright</h2>
<p>The tools is written in TypeScript and can be installed using npx, which in turn is part of NodeJS.</p>
<p>Afterwards,
the "playwright install" call is needed as well because that will potentially install runtime dependencies, such as
Chrome libraries.</p>
<p>Finally, we install Playwright using pip as well because we want to access with Python. Note that if you are installing
Playwright under Zato, the "/path/to/pip" will be typically "/opt/zato/code/bin/pip".</p>
<div class="highlight"><pre><span></span><code><a id="line-0-1" name="line-0-1"></a><a href="#line-0-1"><span class="linenos"></span></a>npx<span class="w"> </span>-g<span class="w"> </span>--yes<span class="w"> </span>playwright<span class="w"> </span>install
<a id="line-0-2" name="line-0-2"></a><a href="#line-0-2"><span class="linenos"></span></a>playwright<span class="w"> </span>install
<a id="line-0-3" name="line-0-3"></a><a href="#line-0-3"><span class="linenos"></span></a>/path/to/pip<span class="w"> </span>install<span class="w"> </span>playwright
</code></pre></div>
<p>We can now start it as below. I am using BlackBerry as an example of what Playwright is capable of.
Also, it is usually more convenient to use a mobile version of a site when the main window and Inspector are opened
side by side, but you may prefer to use Chrome, Firefox or anything else.</p>
<div class="highlight"><pre><span></span><code><a id="line-1-1" name="line-1-1"></a><a href="#line-1-1"><span class="linenos"></span></a>playwright<span class="w"> </span>codegen<span class="w"> </span>https://example.atlassian.net/jira<span class="w"> </span>--device<span class="w"> </span><span class="s2">&quot;BlackBerry Z30&quot;</span>
</code></pre></div>
<p>That is practically everything as using Playwright to generate code in our context goes. Open the tool, fill out forms,
copy code to a Python module, done.</p>
<p>What is still needed, though, is cleaning up the resulting code and embedding it in an API integration process.</p>
<h2 id="code-clean-up">Code clean-up</h2>
<p>After you keep using Playwright for a while with longer forms and pages, you will note that the generated code
tends to accumulate parts that repeat.</p>
<p>For instance, in the module below, which I already cleaned up, the same "[placeholder=\"Enter email\"]" reference
to the email field is used twice, even if a programmer developing this could would prefer to introduce
a variable for that.</p>
<p>There is not a good answer to the question of what to do about it. On the one hand, obviously, being programmers we would prefer
not to repeat that kind of details. On the other hand, if we clean up the code too much, this may result in too much
of a maintenance burden because we need to keep it mind that we do not really want to invest to much in web scraping and,
should there be a need to repeat the whole process, we do not want to end up with Playwright's code auto-generated from scratch
once more, without any of our clean-up.</p>
<p>A good compromise position is to at least extract any kind of credentials from the code to environment variables or
a similar place and to remove some of the code comments that Playwright generates. The result
as below is what it should like at the end. Not too much effort without leaving the whole code as it was originally either.</p>
<p>Save the code below as "play1.py" as this is what the API service below will use.</p>
<div class="highlight"><pre><span></span><code><a id="line-2-1" name="line-2-1"></a><a href="#line-2-1"><span class="linenos"></span></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a id="line-2-2" name="line-2-2"></a><a href="#line-2-2"><span class="linenos"></span></a>
<a id="line-2-3" name="line-2-3"></a><a href="#line-2-3"><span class="linenos"></span></a><span class="c1"># stdlib</span>
<a id="line-2-4" name="line-2-4"></a><a href="#line-2-4"><span class="linenos"></span></a><span class="kn">import</span> <span class="nn">os</span>
<a id="line-2-5" name="line-2-5"></a><a href="#line-2-5"><span class="linenos"></span></a>
<a id="line-2-6" name="line-2-6"></a><a href="#line-2-6"><span class="linenos"></span></a><span class="c1"># Playwright</span>
<a id="line-2-7" name="line-2-7"></a><a href="#line-2-7"><span class="linenos"></span></a><span class="kn">from</span> <span class="nn">playwright.sync_api</span> <span class="kn">import</span> <span class="n">Playwright</span><span class="p">,</span> <span class="n">sync_playwright</span>
<a id="line-2-8" name="line-2-8"></a><a href="#line-2-8"><span class="linenos"></span></a>
<a id="line-2-9" name="line-2-9"></a><a href="#line-2-9"><span class="linenos"></span></a><span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
<a id="line-2-10" name="line-2-10"></a><a href="#line-2-10"><span class="linenos"></span></a>    <span class="n">Email</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'APP_EMAIL'</span><span class="p">,</span> <span class="s1">'zato@example.com'</span><span class="p">)</span>
<a id="line-2-11" name="line-2-11"></a><a href="#line-2-11"><span class="linenos"></span></a>    <span class="n">Password</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'APP_PASSWORD'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
<a id="line-2-12" name="line-2-12"></a><a href="#line-2-12"><span class="linenos"></span></a>    <span class="n">Headless</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'APP_HEADLESS'</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<a id="line-2-13" name="line-2-13"></a><a href="#line-2-13"><span class="linenos"></span></a>
<a id="line-2-14" name="line-2-14"></a><a href="#line-2-14"><span class="linenos"></span></a><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">playwright</span><span class="p">:</span> <span class="n">Playwright</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="line-2-15" name="line-2-15"></a><a href="#line-2-15"><span class="linenos"></span></a>
<a id="line-2-16" name="line-2-16"></a><a href="#line-2-16"><span class="linenos"></span></a>    <span class="n">browser</span> <span class="o">=</span> <span class="n">playwright</span><span class="o">.</span><span class="n">chromium</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="n">headless</span><span class="o">=</span><span class="n">Config</span><span class="o">.</span><span class="n">Headless</span><span class="p">)</span> <span class="c1"># type: ignore</span>
<a id="line-2-17" name="line-2-17"></a><a href="#line-2-17"><span class="linenos"></span></a>    <span class="n">context</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">new_context</span><span class="p">()</span>
<a id="line-2-18" name="line-2-18"></a><a href="#line-2-18"><span class="linenos"></span></a>
<a id="line-2-19" name="line-2-19"></a><a href="#line-2-19"><span class="linenos"></span></a>    <span class="c1"># Open new page</span>
<a id="line-2-20" name="line-2-20"></a><a href="#line-2-20"><span class="linenos"></span></a>    <span class="n">page</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">new_page</span><span class="p">()</span>
<a id="line-2-21" name="line-2-21"></a><a href="#line-2-21"><span class="linenos"></span></a>
<a id="line-2-22" name="line-2-22"></a><a href="#line-2-22"><span class="linenos"></span></a>    <span class="c1"># Open project boards</span>
<a id="line-2-23" name="line-2-23"></a><a href="#line-2-23"><span class="linenos"></span></a>    <span class="n">page</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://example.atlassian.net/jira/software/projects/ABC/boards/1&quot;</span><span class="p">)</span>
<a id="line-2-24" name="line-2-24"></a><a href="#line-2-24"><span class="linenos"></span></a>    <span class="n">page</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://id.atlassian.com/login?continue=https%3A</span><span class="si">%2F%2F</span><span class="s2">example.atlassian.net</span><span class="si">%2F</span><span class="s2">login</span><span class="si">%3F</span><span class="s2">redirectCount%3D1</span><span class="si">%26d</span><span class="s2">est-url%3D</span><span class="si">%252F</span><span class="s2">jira</span><span class="si">%252F</span><span class="s2">software</span><span class="si">%252F</span><span class="s2">projects</span><span class="si">%252F</span><span class="s2">ABC</span><span class="si">%252F</span><span class="s2">boards</span><span class="si">%252F</span><span class="s2">1</span><span class="si">%26a</span><span class="s2">pplication%3Djira&amp;application=jira&quot;</span><span class="p">)</span>
<a id="line-2-25" name="line-2-25"></a><a href="#line-2-25"><span class="linenos"></span></a>
<a id="line-2-26" name="line-2-26"></a><a href="#line-2-26"><span class="linenos"></span></a>    <span class="c1"># Fill out the email</span>
<a id="line-2-27" name="line-2-27"></a><a href="#line-2-27"><span class="linenos"></span></a>    <span class="n">page</span><span class="o">.</span><span class="n">locator</span><span class="p">(</span><span class="s2">&quot;[placeholder=</span><span class="se">\&quot;</span><span class="s2">Enter email</span><span class="se">\&quot;</span><span class="s2">]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
<a id="line-2-28" name="line-2-28"></a><a href="#line-2-28"><span class="linenos"></span></a>    <span class="n">page</span><span class="o">.</span><span class="n">locator</span><span class="p">(</span><span class="s2">&quot;[placeholder=</span><span class="se">\&quot;</span><span class="s2">Enter email</span><span class="se">\&quot;</span><span class="s2">]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">Email</span><span class="p">)</span>
<a id="line-2-29" name="line-2-29"></a><a href="#line-2-29"><span class="linenos"></span></a>
<a id="line-2-30" name="line-2-30"></a><a href="#line-2-30"><span class="linenos"></span></a>    <span class="c1"># Click #login-submit</span>
<a id="line-2-31" name="line-2-31"></a><a href="#line-2-31"><span class="linenos"></span></a>    <span class="n">page</span><span class="o">.</span><span class="n">locator</span><span class="p">(</span><span class="s2">&quot;#login-submit&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
<a id="line-2-32" name="line-2-32"></a><a href="#line-2-32"><span class="linenos"></span></a>
<a id="line-2-33" name="line-2-33"></a><a href="#line-2-33"><span class="linenos"></span></a><span class="k">with</span> <span class="n">sync_playwright</span><span class="p">()</span> <span class="k">as</span> <span class="n">playwright</span><span class="p">:</span>
<a id="line-2-34" name="line-2-34"></a><a href="#line-2-34"><span class="linenos"></span></a>    <span class="n">run</span><span class="p">(</span><span class="n">playwright</span><span class="p">)</span>
</code></pre></div>
<h2 id="web-scraping-as-a-standalone-activity">Web scraping as a standalone activity</h2>
<p>We have the generated code so the first thing to do with it is to run it from command line. This will result
in a new Chrome window's accessing Jira - it is Chrome, not Blackberry, because that is the default for Playwright.</p>
<p>The window will close soon enough but this is fine, that code only demonstrates a principle, it is not
a full integration task.</p>
<div class="highlight"><pre><span></span><code><a id="line-3-1" name="line-3-1"></a><a href="#line-3-1"><span class="linenos"></span></a>python<span class="w"> </span>/path/to/play1.py
</code></pre></div>
<p>It is also useful that we can run the same Python module from our IDE, giving us the ability to step through
the code line by line, observing what changes when and why.</p>
<p><center>
<img src="https://upcdn.io/kW15bqq/raw/root/static/blog/images/3.2-web-scraping/vscode-debug.png" />
</center></p>
<h2 id="web-scraping-as-an-api-service">Web scraping as an API service</h2>
<p>Finally, we are ready to invoke the standalone module from an API service, as in the following code that
we are also going to make available as a REST channel.</p>
<p>A couple of notes about the Python service below:</p>
<ul>
<li>We invoke Playwright in a subprocess, as <a href="https://zato.io/en/docs/3.3/dev/examples/shell-commands.html">a shell command</a></li>
<li>We accept input through <a href="https://zato.io/en/docs/3.3/dev/model/index.html">data models</a> although we do not provide
  any output definition because it is not needed here</li>
<li>When we invoke Playwright, we set the APP_HEADLESS to True which will ensure that it does not attempt to actually
  display a Chrome window. After all, we intend for this service to run on Linux servers, in backend,
  and such a thing will be unlikely to work in this kind of an environment.</li>
</ul>
<p>Other than that, this is a straightforward Zato service - it receives input, carries out its work and a reply
is returned to the caller (here, empty).</p>
<div class="highlight"><pre><span></span><code><a id="line-4-1" name="line-4-1"></a><a href="#line-4-1"><span class="linenos"></span></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a id="line-4-2" name="line-4-2"></a><a href="#line-4-2"><span class="linenos"></span></a>
<a id="line-4-3" name="line-4-3"></a><a href="#line-4-3"><span class="linenos"></span></a><span class="c1"># stdlib</span>
<a id="line-4-4" name="line-4-4"></a><a href="#line-4-4"><span class="linenos"></span></a><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<a id="line-4-5" name="line-4-5"></a><a href="#line-4-5"><span class="linenos"></span></a>
<a id="line-4-6" name="line-4-6"></a><a href="#line-4-6"><span class="linenos"></span></a><span class="c1"># Zato</span>
<a id="line-4-7" name="line-4-7"></a><a href="#line-4-7"><span class="linenos"></span></a><span class="kn">from</span> <span class="nn">zato.server.service</span> <span class="kn">import</span> <span class="n">Model</span><span class="p">,</span> <span class="n">Service</span>
<a id="line-4-8" name="line-4-8"></a><a href="#line-4-8"><span class="linenos"></span></a>
<a id="line-4-9" name="line-4-9"></a><a href="#line-4-9"><span class="linenos"></span></a><span class="c1"># ###########################################################################</span>
<a id="line-4-10" name="line-4-10"></a><a href="#line-4-10"><span class="linenos"></span></a>
<a id="line-4-11" name="line-4-11"></a><a href="#line-4-11"><span class="linenos"></span></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="line-4-12" name="line-4-12"></a><a href="#line-4-12"><span class="linenos"></span></a><span class="k">class</span> <span class="nc">WebScrapingDemoRequest</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
<a id="line-4-13" name="line-4-13"></a><a href="#line-4-13"><span class="linenos"></span></a>    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
<a id="line-4-14" name="line-4-14"></a><a href="#line-4-14"><span class="linenos"></span></a>    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span>
<a id="line-4-15" name="line-4-15"></a><a href="#line-4-15"><span class="linenos"></span></a>
<a id="line-4-16" name="line-4-16"></a><a href="#line-4-16"><span class="linenos"></span></a><span class="c1"># ###########################################################################</span>
<a id="line-4-17" name="line-4-17"></a><a href="#line-4-17"><span class="linenos"></span></a>
<a id="line-4-18" name="line-4-18"></a><a href="#line-4-18"><span class="linenos"></span></a><span class="k">class</span> <span class="nc">WebScrapingDemo</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>
<a id="line-4-19" name="line-4-19"></a><a href="#line-4-19"><span class="linenos"></span></a>    <span class="n">name</span> <span class="o">=</span> <span class="s1">'demo.web-scraping'</span>
<a id="line-4-20" name="line-4-20"></a><a href="#line-4-20"><span class="linenos"></span></a>
<a id="line-4-21" name="line-4-21"></a><a href="#line-4-21"><span class="linenos"></span></a>    <span class="k">class</span> <span class="nc">SimpleIO</span><span class="p">:</span>
<a id="line-4-22" name="line-4-22"></a><a href="#line-4-22"><span class="linenos"></span></a>        <span class="nb">input</span>  <span class="o">=</span> <span class="n">WebScrapingDemoRequest</span>
<a id="line-4-23" name="line-4-23"></a><a href="#line-4-23"><span class="linenos"></span></a>
<a id="line-4-24" name="line-4-24"></a><a href="#line-4-24"><span class="linenos"></span></a>    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="line-4-25" name="line-4-25"></a><a href="#line-4-25"><span class="linenos"></span></a>
<a id="line-4-26" name="line-4-26"></a><a href="#line-4-26"><span class="linenos"></span></a>        <span class="c1"># Path to a Python installation that Playwright was installed under</span>
<a id="line-4-27" name="line-4-27"></a><a href="#line-4-27"><span class="linenos"></span></a>        <span class="n">py_path</span> <span class="o">=</span> <span class="s1">'/path/to/python'</span>
<a id="line-4-28" name="line-4-28"></a><a href="#line-4-28"><span class="linenos"></span></a>
<a id="line-4-29" name="line-4-29"></a><a href="#line-4-29"><span class="linenos"></span></a>        <span class="c1"># Path to a Playwright module with code to invoke</span>
<a id="line-4-30" name="line-4-30"></a><a href="#line-4-30"><span class="linenos"></span></a>        <span class="n">playwright_path</span> <span class="o">=</span> <span class="s1">'/path/to/the-playwright-module.py'</span>
<a id="line-4-31" name="line-4-31"></a><a href="#line-4-31"><span class="linenos"></span></a>
<a id="line-4-32" name="line-4-32"></a><a href="#line-4-32"><span class="linenos"></span></a>        <span class="c1"># This is a template script that we will invoke in a subprocess</span>
<a id="line-4-33" name="line-4-33"></a><a href="#line-4-33"><span class="linenos"></span></a>        <span class="n">command_template</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<a id="line-4-34" name="line-4-34"></a><a href="#line-4-34"><span class="linenos"></span></a><span class="s2">        APP_EMAIL=</span><span class="si">{app_email}</span><span class="s2"> APP_PASSWORD=</span><span class="si">{app_password}</span><span class="s2"> APP_HEADLESS=True </span><span class="si">{py_path}</span><span class="s2"> </span><span class="si">{playwright_path}</span>
<a id="line-4-35" name="line-4-35"></a><a href="#line-4-35"><span class="linenos"></span></a><span class="s2">        &quot;&quot;&quot;</span>
<a id="line-4-36" name="line-4-36"></a><a href="#line-4-36"><span class="linenos"></span></a>
<a id="line-4-37" name="line-4-37"></a><a href="#line-4-37"><span class="linenos"></span></a>        <span class="c1"># This is our input data</span>
<a id="line-4-38" name="line-4-38"></a><a href="#line-4-38"><span class="linenos"></span></a>        <span class="nb">input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">input</span> <span class="c1"># type: WebScrapingDemoRequest</span>
<a id="line-4-39" name="line-4-39"></a><a href="#line-4-39"><span class="linenos"></span></a>
<a id="line-4-40" name="line-4-40"></a><a href="#line-4-40"><span class="linenos"></span></a>        <span class="c1"># Extract credentials from the input ..</span>
<a id="line-4-41" name="line-4-41"></a><a href="#line-4-41"><span class="linenos"></span></a>        <span class="n">email</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">email</span>
<a id="line-4-42" name="line-4-42"></a><a href="#line-4-42"><span class="linenos"></span></a>        <span class="n">password</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">password</span>
<a id="line-4-43" name="line-4-43"></a><a href="#line-4-43"><span class="linenos"></span></a>
<a id="line-4-44" name="line-4-44"></a><a href="#line-4-44"><span class="linenos"></span></a>        <span class="c1"># .. build the full command, taking all the config into account ..</span>
<a id="line-4-45" name="line-4-45"></a><a href="#line-4-45"><span class="linenos"></span></a>        <span class="n">command</span> <span class="o">=</span> <span class="n">command_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<a id="line-4-46" name="line-4-46"></a><a href="#line-4-46"><span class="linenos"></span></a>            <span class="n">app_email</span> <span class="o">=</span> <span class="n">email</span><span class="p">,</span>
<a id="line-4-47" name="line-4-47"></a><a href="#line-4-47"><span class="linenos"></span></a>            <span class="n">app_password</span> <span class="o">=</span> <span class="n">password</span><span class="p">,</span>
<a id="line-4-48" name="line-4-48"></a><a href="#line-4-48"><span class="linenos"></span></a>            <span class="n">py_path</span> <span class="o">=</span> <span class="n">py_path</span><span class="p">,</span>
<a id="line-4-49" name="line-4-49"></a><a href="#line-4-49"><span class="linenos"></span></a>            <span class="n">playwright_path</span> <span class="o">=</span> <span class="n">playwright_path</span><span class="p">,</span>
<a id="line-4-50" name="line-4-50"></a><a href="#line-4-50"><span class="linenos"></span></a>        <span class="p">)</span>
<a id="line-4-51" name="line-4-51"></a><a href="#line-4-51"><span class="linenos"></span></a>
<a id="line-4-52" name="line-4-52"></a><a href="#line-4-52"><span class="linenos"></span></a>        <span class="c1"># .. invoke the command in a subprocess  ..</span>
<a id="line-4-53" name="line-4-53"></a><a href="#line-4-53"><span class="linenos"></span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
<a id="line-4-54" name="line-4-54"></a><a href="#line-4-54"><span class="linenos"></span></a>
<a id="line-4-55" name="line-4-55"></a><a href="#line-4-55"><span class="linenos"></span></a>        <span class="c1"># .. if it was not a success, log the details received ..</span>
<a id="line-4-56" name="line-4-56"></a><a href="#line-4-56"><span class="linenos"></span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">is_ok</span><span class="p">:</span>
<a id="line-4-57" name="line-4-57"></a><a href="#line-4-57"><span class="linenos"></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Exit code -&gt; </span><span class="si">%s</span><span class="s1">'</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">)</span>
<a id="line-4-58" name="line-4-58"></a><a href="#line-4-58"><span class="linenos"></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Stderr -&gt; </span><span class="si">%s</span><span class="s1">'</span><span class="p">,</span>    <span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
<a id="line-4-59" name="line-4-59"></a><a href="#line-4-59"><span class="linenos"></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Stdout -&gt; </span><span class="si">%s</span><span class="s1">'</span><span class="p">,</span>    <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<a id="line-4-60" name="line-4-60"></a><a href="#line-4-60"><span class="linenos"></span></a>
<a id="line-4-61" name="line-4-61"></a><a href="#line-4-61"><span class="linenos"></span></a><span class="c1"># ###########################################################################</span>
</code></pre></div>
<p>Now, the REST channel:</p>
<p><center>
<img src="https://upcdn.io/kW15bqq/raw/root/static/blog/images/3.2-web-scraping/rest-menu.png" />
</center></p>
<p><center>
<img src="https://upcdn.io/kW15bqq/raw/root/static/blog/images/3.2-web-scraping/rest-form.png" />
</center></p>
<p>The last thing to do is to invoke the service - I am using curl from the command line below but it could very well
be Postman or a similar option.</p>
<div class="highlight"><pre><span></span><code><a id="line-5-1" name="line-5-1"></a><a href="#line-5-1"><span class="linenos"></span></a>curl<span class="w"> </span>localhost:17010/demo/web-scraping<span class="w"> </span>-d<span class="w"> </span><span class="s1">'{&quot;email&quot;:&quot;hello@example.com&quot;, &quot;password&quot;:&quot;abc&quot;}'</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span>
</code></pre></div>
<p>There will be no Chrome window this time around because we run Playwright in the headless mode. There will be no output
from curl either because we do not return anything from the service but in server logs we will find details such as below.</p>
<p>We can learn from the log that the command took close to 4 seconds to complete,
that the exit code was 0 (indicating success) and that is no stdout or stderr at all.</p>
<div class="highlight"><pre><span></span><code><a id="line-6-1" name="line-6-1"></a><a href="#line-6-1"><span class="linenos"></span></a>INFO<span class="w"> </span>-<span class="w"> </span>Command<span class="w"> </span><span class="sb">`</span>
<a id="line-6-2" name="line-6-2"></a><a href="#line-6-2"><span class="linenos"></span></a><span class="nv">APP_EMAIL</span><span class="o">=</span>hello@example.com<span class="w"> </span><span class="nv">APP_PASSWORD</span><span class="o">=</span>abc<span class="w"> </span><span class="nv">APP_HEADLESS</span><span class="o">=</span>True
<a id="line-6-3" name="line-6-3"></a><a href="#line-6-3"><span class="linenos"></span></a><span class="w">  </span>/path/to/python
<a id="line-6-4" name="line-6-4"></a><a href="#line-6-4"><span class="linenos"></span></a><span class="w">  </span>/path/to/the-playwright-module.py
<a id="line-6-5" name="line-6-5"></a><a href="#line-6-5"><span class="linenos"></span></a><span class="sb">`</span><span class="w"> </span>completed<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">0</span>:00:03.844157,
<a id="line-6-6" name="line-6-6"></a><a href="#line-6-6"><span class="linenos"></span></a><span class="w">  </span>exit_code<span class="w"> </span>-&gt;<span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span>len-out<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>Bytes<span class="o">)</span><span class="p">;</span><span class="w"> </span>len-err<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>Bytes<span class="o">)</span><span class="p">;</span>
<a id="line-6-7" name="line-6-7"></a><a href="#line-6-7"><span class="linenos"></span></a><span class="w">  </span>cid<span class="w"> </span>-&gt;<span class="w"> </span>zcmdc5422816b2c6ff9f10742134
</code></pre></div>
<p>We are now ready to continue to work on it - for instance, you will notice that the password is visible in logs
and this should not be allowed.</p>
<p>But, all such works are extra in comparison with the main theme - we have Playwright, which is a a tool that allows
us to quickly integrate with frontend applications and we can automate it through API services. Just as expected.</p>
<h2 id="more-resources">More resources</h2>
<p>➤ Python <a href="https://zato.io/en/docs/3.3/tutorial/01.html">API integration tutorial</a>
<br />
➤ <a href="https://zato.io/articles/integration-platform.html">What is an integration platform?</a>
<br />
➤ <a href="https://zato.io/articles/python-ipaas.html">Python Integration platform as a Service (iPaaS)</a>
<br />
➤ <a href="https://zato.io/en/docs/3.3/intro/esb-soa.html">What is an Enterprise Service Bus (ESB)? What is SOA?</a>
<br />
➤ <a href="https://zato.io/articles/open-source-ipaas.html">Open-source iPaaS</a> in Python</p>
<div class="nav-title footer">
    <a class="rounded nav-title" href="https://zato.io/en/blog/">More blog posts</a><span class="arrow-footer">➤</span>
</div>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 13, 2024 08:00 AM UTC by
            <a href="https://zato.io/blog/rss.xml" class="link link-hover text-primary"
              >Zato Blog</a
            >
          </div>
          <a
            href="https://zato.io/en/blog/web-scraping-api-integrations.html"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://mirekdlugosz.com/blog/2024/understanding-linux-virtualization-stack/" class="hover:underline"
              >Understanding Linux virtualization stack</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>I find Linux virtualization stack confusing. <span class="caps">KVM</span>? libvirt? <span class="caps">QEMU</span>? Xen? What does that even&nbsp;mean?</p>
<p>This post is my attempt at making sense of that all. I don&#8217;t claim it to be correct, but that&#8217;s the way I understand it. If I badly missed a mark somewhere, please …</p>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 12, 2024 10:37 PM UTC by
            <a href="https://mirekdlugosz.com/blog/feeds/planet-python.atom.xml" class="link link-hover text-primary"
              >Mirek Długosz</a
            >
          </div>
          <a
            href="https://mirekdlugosz.com/blog/2024/understanding-linux-virtualization-stack/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://realpython.com/courses/format-floats-f-strings/" class="hover:underline"
              >Formatting Floats Inside Python F-Strings</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            In this video course, you'll learn how to use Python format specifiers within an f-string to allow you to neatly format a float to your required precision.
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 12, 2024 02:00 PM UTC by
            <a href="https://realpython.com/atom.xml" class="link link-hover text-primary"
              >Real Python</a
            >
          </div>
          <a
            href="https://realpython.com/courses/format-floats-f-strings/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
    <div
      class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex flex-col h-[450px] overflow-hidden"
    >
      <div class="card-body p-0 flex flex-col h-full">
        <!-- Title Section -->
        <div class="bg-primary text-primary-content p-4 rounded-t-2xl">
          
          <h2 class="card-title text-xl font-bold text-white">
            <a href="https://pythonspeed.com/articles/simd-stable-rust/" class="hover:underline"
              >Using portable SIMD in stable Rust</a
            >
          </h2>
          
        </div>

        <!-- Content Section -->
        <div class="p-4 flex-grow overflow-hidden">
          <p class="text-base-content">
            <p>In <a href="https://pythonspeed.com/articles/optimizing-with-simd/">a previous post</a> we saw that you can speed up code significantly on a <em>single</em> core using SIMD: Single Instruction Multiple Data.
These specialized CPU instructions allow you to, for example, add 4 values at once with a single instruction, instead of the usual one value at a time.
The performance improvement you get compounds with multi-core parallelism: you can benefit from both SIMD and threading at the same time.</p>

<p>Unfortunately, SIMD instructions are specific both to CPU architecture and CPU model.
Thus ARM CPUs as used on modern Macs have different SIMD instructions than x86-64 CPUs.
And even if you only care about x86-64, different models support different instructions; the i7-12700K CPU in my current computer doesn’t support AVX-512 SIMD, for example.</p>

<p>One way to deal with this is to write custom versions for each variation of SIMD instructions.
Another is to use a portable SIMD library, that provides an abstraction layer on top of these various instruction sets.</p>

<p>In <a href="https://pythonspeed.com/articles/optimizing-with-simd/">the previous post</a> we used the <code class="language-plaintext highlighter-rouge">std::simd</code> library.
It is built-in to the Rust standard library… but unfortunately it’s currently only available when using an unstable (“nightly”) compiler.</p>

<p>How you can write portable SIMD if you want to use stable Rust?
In this article we’ll:</p>

<ul>
  <li>Introduce the <code class="language-plaintext highlighter-rouge">wide</code> crate, that lets you write portable SIMD in stable Rust.</li>
  <li>Show how it can be used to reimplement the Mandelbrot algorithm we previously implemented with <code class="language-plaintext highlighter-rouge">std::simd</code>.</li>
  <li>Go over the pros and cons of these alternatives.</li>
</ul>


   <a href="https://pythonspeed.com/articles/simd-stable-rust/">Read more...</a>
          </p>
        </div>

        <!-- Footer Section -->
        <div class="mt-auto bg-base-200 p-4 rounded-b-2xl">
          <div class="text-sm text-base-content/70 mb-2">
            Posted on November 12, 2024 12:00 AM UTC by
            <a href="https://pythonspeed.com/atom.xml" class="link link-hover text-primary"
              >Python⇒Speed</a
            >
          </div>
          <a
            href="https://pythonspeed.com/articles/simd-stable-rust/"
            class="btn btn-secondary btn-sm w-full hover:btn-accent transition-colors duration-300"
          >
            Read More
          </a>
        </div>
      </div>
    </div>
    
  </div>
  <div class="mt-8"><div class="btn-group my-4"><a href="index8.html" class="btn">«</a><a href="index7.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">7</a><a href="index8.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">8</a><button class="btn btn-active hover:bg-primary hover:shadow-lg hover:shadow-primary/50">9</button><a href="index10.html" class="btn hover:bg-primary hover:shadow-lg hover:shadow-primary/50">10</a><a href="index10.html" class="btn">»</a></div></div>
</div>

      </div>
      <div class="drawer-side">
        <label for="my-drawer-2" class="drawer-overlay"></label>
        
<ul class="menu p-4 w-80 min-h-full bg-base-200 text-base-content">
  <li class="menu-title">Stats</li>
  
    <li><a>Total Entries: 9103</a></li>
    <li><a>Unique Feeds: 426</a></li>
    

  <li class="menu-title mt-4">Top Authors</li>
  <div class="pl-4 max-h-48 overflow-y-auto"><li><a href="https://pythonbytes.fm/episodes/rss">Talk Python to Me (490)</a></li><li><a href="http://testandcode.com/rss">Awesome Python Applications (424)</a></li><li><a href="https://www.mattlayman.com/categories/python/index.xml">Python Bytes (416)</a></li><li><a href="http://www.talkpythontome.com/episodes/rss">Matt Layman (324)</a></li><li><a href="https://www.mattlayman.com/categories/python/index.xml">Test and Code (223)</a></li></div>

  <li class="menu-title mt-4">Feeds</li>
  <div class="pl-4 max-h-96 overflow-y-auto">
    <ul>
      
      <li><a href="http://dev.2degreesnetwork.com/feeds/posts/default/-/python">2degrees</a></li>
      
      <li><a href="https://emptysqua.re/blog/category/python/index.xml">A. Jesse Jiryu Davis</a></li>
      
      <li><a href="http://www.artima.com/weblogs/feeds/bloggers/aahz.rss">Aahz</a></li>
      
      <li><a href="https://djangocentral.com/feed/">Abhijeet Pal</a></li>
      
      <li><a href="http://masnun.rocks/tags/python/index.xml">Abu Ashraf Masnun</a></li>
      
      <li><a href="http://techarttiki.blogspot.com/feeds/posts/default/-/python">Adam Pletcher</a></li>
      
      <li><a href="http://agendaless.com/blog/index.atom?category=python">Agendaless Consulting</a></li>
      
      <li><a href="https://www.ahmedbouchefra.com/python/feed.xml">Ahmed Bouchefra</a></li>
      
      <li><a href="http://alstatr.blogspot.com/feeds/posts/default/-/Python">Al-Ahmadgaid Asaad</a></li>
      
      <li><a href="http://alecmunro.blogspot.com/feeds/posts/default/-/python">Alec Munro</a></li>
      
      <li><a href="http://alextechrants.blogspot.com/feeds/posts/default/-/python">Alex Grönholm</a></li>
      
      <li><a href="https://alexmorozov.github.io/feeds/tag-python.atom.xml">Alex Morozov</a></li>
      
      <li><a href="http://www.alexconrad.org/feeds/posts/default/-/python">Alexandre Conrad</a></li>
      
      <li><a href="http://peadrop.com/blog/category/python/feed/">Alexandre Vassalotti</a></li>
      
      <li><a href="http://feeds.feedburner.com/en_lexevorg">Alexey Evseev</a></li>
      
      <li><a href="http://akaptur.github.io/blog/categories/python/atom.xml">Allison Kaptur</a></li>
      
      <li><a href="http://blog.amjith.com/posts.atom?tag=python">Amjith Ramanujam</a></li>
      
      <li><a href="http://blog.amvtek.com/feeds/tags/python.atom.xml">AmvTek</a></li>
      
      <li><a href="https://anarc.at/tag/python-planet/index.rss">Anarcat</a></li>
      
      <li><a href="http://techtonik.rainforce.org/feeds/posts/default/-/python">Anatoly Techtonik</a></li>
      
      <li><a href="http://aroberge.blogspot.com/atom.xml">Andre Roberge</a></li>
      
      <li><a href="http://dalkescientific.com/writings/diary/diary-rss.xml">Andrew Dalke</a></li>
      
      <li><a href="http://mindref.blogspot.com/feeds/posts/default/-/python">Andriy Kornatskyy</a></li>
      
      <li><a href="http://mysql-python.blogspot.com/feeds/posts/default">Andy Dustman</a></li>
      
      <li><a href="http://andy.terrel.us/feeds/python-tag.rss.xml">Andy R. Terrel</a></li>
      
      <li><a href="http://annaraven.blogspot.com/feeds/posts/default/-/python">Anna Martelli Ravenscroft</a></li>
      
      <li><a href="http://codingweasel.blogspot.com/feeds/posts/default/-/python">Anthony Baxter</a></li>
      
      <li><a href="http://kpoxit.blogspot.com/feeds/posts/default/-/python">Anton Belyaev</a></li>
      
      <li><a href="http://bobrochel.blogspot.com/feeds/posts/default/-/python">Anton Bobrov</a></li>
      
      <li><a href="https://anweshadas.in/tag/python/rss/">Anwesha Das</a></li>
      
      <li><a href="http://lucumr.pocoo.org/feed.atom">Armin Ronacher</a></li>
      
      <li><a href="https://rushter.com/blog/feed/pyplanet.xml">Artem Golubin</a></li>
      
      <li><a href="https://medium.com/feed/python4you">Artem Rys</a></li>
      
      <li><a href="http://pyfunc.blogspot.com/feeds/posts/default/-/python">Ashish Vidyarthi</a></li>
      
      <li><a href="http://astrocodeschool.com/feeds/all.rss.xml">Astro Code School</a></li>
      
      <li><a href="https://raw.githubusercontent.com/mahmoud/awesome-python-applications/master/atom.xml">Awesome Python Applications</a></li>
      
      <li><a href="http://baijum.blogspot.com/feeds/posts/default/-/python">Baiju Muthukadan</a></li>
      
      <li><a href="http://gbtami.github.io/feed.python.xml">Bajusz Tamás</a></li>
      
      <li><a href="http://www.bedjango.com/planet/feed/">BeDjango</a></li>
      
      <li><a href="http://codedstructure.blogspot.com/feeds/posts/default/-/python">Ben Bass</a></li>
      
      <li><a href="https://jbencook.com/feed.xml">Ben Cook</a></li>
      
      <li><a href="http://clusterbleep.net/blog/category/python/feed/">Ben Rousch</a></li>
      
      <li><a href="http://pybites.blogspot.com/feeds/posts/default">Benjamin Peterson</a></li>
      
      <li><a href="http://www.benjiyork.com/blog/atom.xml">Benji York</a></li>
      
      <li><a href="http://zebert.blogspot.com/feeds/posts/default/-/python">Bertrand Mathieu</a></li>
      
      <li><a href="https://geeksocket.in/tags/python/index.xml">Bhavin Gandhi</a></li>
      
      <li><a href="http://feeds.feedburner.com/thetaranights">Bhishan Bhandari</a></li>
      
      <li><a href="http://news.open-bio.org/news/category/obf-projects/biopython/feed/atom/">BioPython News</a></li>
      
      <li><a href="http://bitofcheese.blogspot.com/feeds/posts/default">Bit of Cheese</a></li>
      
      <li><a href="http://source.mihelac.org/feeds/categories/django/">Bojan Mihelac</a></li>
      
      <li><a href="http://rhodesmill.org/brandon/category/python/feed">Brandon Rhodes</a></li>
      
      <li><a href="http://python4dads.wordpress.com/feed/">Brendan Scott</a></li>
      
      <li><a href="https://snarky.ca/rss/">Brett Cannon</a></li>
      
      <li><a href="http://pythontest.com/posts/index.xml">Brian Okken</a></li>
      
      <li><a href="http://nicoddemus.github.io/tag/python/atom.xml">Bruno Oliveira</a></li>
      
      <li><a href="https://www.codingthepast.com/feed_python_planet.xml">Bruno Ponne / Coding The Past</a></li>
      
      <li><a href="http://brunorocha.org/tag/pythonplanet.atom">Bruno Rocha</a></li>
      
      <li><a href="http://www.caktusgroup.com/feeds/tags/python/">Caktus Consulting Group</a></li>
      
      <li><a href="http://techblog.ironfroggy.com/feeds/posts/default/-/programming">Calvin Spealman</a></li>
      
      <li><a href="http://carlchenet.com/category/planetpython/feed/">Carl Chenet</a></li>
      
      <li><a href="https://carl.duevel.online/tags/python/index.xml">Carl Düvel</a></li>
      
      <li><a href="http://pyright.blogspot.com/feeds/posts/default?alt=rss">Carl Trachte</a></li>
      
      <li><a href="http://themindcaster.blogspot.com/feeds/posts/default/-/python">Carlos Eduardo de Paula</a></li>
      
      <li><a href="http://eatthedots.blogspot.com/feeds/posts/default">Casey Duncan</a></li>
      
      <li><a href="http://catherinedevlin.blogspot.com/feeds/posts/default/-/python">Catherine Devlin</a></li>
      
      <li><a href="https://chinghwayu.com/category/python/feed/">Ching-Hwa Yu</a></li>
      
      <li><a href="https://www.metachris.com/tags/python/index.xml">Chris Hager</a></li>
      
      <li><a href="http://chris-miles-writes-python.blogspot.com/feeds/posts/default?alt=rss">Chris Miles</a></li>
      
      <li><a href="http://pyinformatics.blogspot.com/feeds/posts/default">Chris Mitchell</a></li>
      
      <li><a href="http://pbpython.com/feeds/all.atom.xml">Chris Moffitt</a></li>
      
      <li><a href="http://ideas.offby1.net/feeds/tag-python.atom.xml">Chris Rose</a></li>
      
      <li><a href="http://feeds.feedburner.com/ChrisWarrickPython">Chris Warrick</a></li>
      
      <li><a href="http://lipyrary.blogspot.com/feeds/posts/default">Christian Heimes</a></li>
      
      <li><a href="https://dev.to/feed/ldrscke.rss">Christian Ledermann</a></li>
      
      <li><a href="http://feeds.feedburner.com/mrtopf-python">Christian Scholz</a></li>
      
      <li><a href="https://cito.github.io/tags/python/index.xml">Christoph Zwerschke</a></li>
      
      <li><a href="https://blog.codegrades.com/feed.xml">CodeGrades</a></li>
      
      <li><a href="http://codesnipers.com/?q=taxonomy/term/16/0/feed">CodeSnipers</a></li>
      
      <li><a href="https://coderslegacy.com/category/python/feed/">CodersLegacy</a></li>
      
      <li><a href="http://allanderek.github.io/categories/python.xml">Coding Diet</a></li>
      
      <li><a href="https://www.gallon.me/tag/python/feed">Corey Gallon</a></li>
      
      <li><a href="http://feeds.feedburner.com/goldblog/python">Corey Goldberg</a></li>
      
      <li><a href="http://feeds.feedburner.com/cormoran-project">Cormoran Project</a></li>
      
      <li><a href="http://feeds2.feedburner.com/portablecommandline">Cross-Platform Command Line Tools</a></li>
      
      <li><a href="http://feeds.feedburner.com/cubicweborg">CubicWeb</a></li>
      
      <li><a href="https://ntguardian.wordpress.com/category/python/feed/">Curtis Miller</a></li>
      
      <li><a href="http://dspillustrations.com/static/dspillustrations.rss.xml">DSPIllustrations.com</a></li>
      
      <li><a href="http://dailytechvideo.com/category/python/feed/">Daily Tech Video (Python)</a></li>
      
      <li><a href="http://dfwpython.blogspot.com/feeds/posts/default">Dallas Fort Worth Pythoneers</a></li>
      
      <li><a href="http://late.am/python.feed.xml">Dan Crosta</a></li>
      
      <li><a href="http://strombrg.blogspot.com/feeds/posts/default/-/Python">Dan Stromberg</a></li>
      
      <li><a href="http://dan.yeaw.me/categories/python.xml">Dan Yeaw</a></li>
      
      <li><a href="http://dbader.org/blog/tags/python/rss">Daniel Bader</a></li>
      
      <li><a href="https://daniel.roygreenfeld.com/feeds/python.atom.xml">Daniel Roy Greenfeld</a></li>
      
      <li><a href="https://www.dataschool.io/tag/python/rss/">Data School</a></li>
      
      <li><a href="https://www.datawars.io/articles/rss.xml">DataWars.io</a></li>
      
      <li><a href="http://dabeaz.blogspot.com/feeds/posts/default">Dave Beazley</a></li>
      
      <li><a href="https://davidamos.dev/tag/python/rss/">David Amos</a></li>
      
      <li><a href="https://davidcaron.dev/feeds/tags/python.atom.xml">David Caron</a></li>
      
      <li><a href="http://www.artima.com/weblogs/feeds/bloggers/goodger.rss">David Goodger</a></li>
      
      <li><a href="http://davidlindelof.com/category/python/feed/">David Lindelof</a></li>
      
      <li><a href="http://www.drmaciver.com/category/python/feed/">David MacIver</a></li>
      
      <li><a href="http://dmalcolm.livejournal.com/data/atom?tag=python">David Malcolm</a></li>
      
      <li><a href="http://www.szotten.com/david/feeds/python.atom.xml">David Szotten</a></li>
      
      <li><a href="http://davidemoro.blogspot.com/feeds/posts/default/-/planetpython">Davide Moro</a></li>
      
      <li><a href="http://feeds2.feedburner.com/Daftpython">Davy Mitchell</a></li>
      
      <li><a href="http://davywybiral.blogspot.com/feeds/posts/default">Davy Wybiral</a></li>
      
      <li><a href="https://declassed.art/en/feed/python.xml">Declassed Art</a></li>
      
      <li><a href="http://makkalot-opensource.blogspot.com/feeds/posts/default/-/python">Denis Kurov</a></li>
      
      <li><a href="http://www.djangoproject.com/rss/weblog/">Django Weblog</a></li>
      
      <li><a href="http://doingmathwithpython.github.io/feeds/all.atom.xml">Doing Math with Python</a></li>
      
      <li><a href="https://feeds.feedburner.com/doughellmann/python">Doug Hellmann</a></li>
      
      <li><a href="http://www.dougalmatthews.com/feeds/python.atom.xml">Dougal Matthews</a></li>
      
      <li><a href="http://oubiwann.blogspot.com/feeds/posts/default/-/python">Duncan McGreggor</a></li>
      
      <li><a href="http://edcrewe.blogspot.com/feeds/posts/default/-/python">Ed Crewe</a></li>
      
      <li><a href="http://edreamleo.blogspot.com/feeds/posts/default/-/python">Edward K. Ream</a></li>
      
      <li><a href="http://eli.thegreenplace.net/feeds/python.atom.xml">Eli Bendersky</a></li>
      
      <li><a href="http://eniramltd.github.io/devblog/rss/categories/python.xml">Eniram Ltd.</a></li>
      
      <li><a href="https://examachine.net/blog/category/python/feed/">Eray Özkural (examachine)</a></li>
      
      <li><a href="http://www.marsja.se/category/python/feed/">Erik Marsja</a></li>
      
      <li><a href="http://etienned.github.io/categories/python.xml">Etienne Desautels</a></li>
      
      <li><a href="http://blog.europython.eu/rss">EuroPython</a></li>
      
      <li><a href="http://www.europython-society.org/rss">EuroPython Society</a></li>
      
      <li><a href="http://evennia.blogspot.com/feeds/posts/default">Evennia</a></li>
      
      <li><a href="https://everydaysuperpowers.dev/feed/python/">Everyday Superpowers</a></li>
      
      <li><a href="http://pydev.blogspot.com/atom.xml">Fabio Zadrozny</a></li>
      
      <li><a href="http://en.ig.ma/notebook/feeds/atom/tag/python.xml">Filip Wasilewski</a></li>
      
      <li><a href="http://blog.filipesaraiva.info/?feed=rss2&tag=planet-python">Filipe Saraiva</a></li>
      
      <li><a href="http://pyinsci.blogspot.com/feeds/posts/default">Flavio Coelho</a></li>
      
      <li><a href="http://blog.flaper87.com/feeds/python.atom.xml">Flavio Percoco</a></li>
      
      <li><a href="http://fwierzbicki.blogspot.com/atom.xml">Frank Wierzbicki</a></li>
      
      <li><a href="http://raspberry-python.blogspot.com/feeds/posts/default/-/english/python">François Dion</a></li>
      
      <li><a href="http://feeding.cloud.geek.nz/tags/python/index.rss">François Marier</a></li>
      
      <li><a href="http://www.fridh.nl/tag/python.atom.xml">Frederik Rietdijk</a></li>
      
      <li><a href="https://www.frompythonimportpodcast.com/feed">From Python Import Podcast</a></li>
      
      <li><a href="https://www.fullstackpython.com/feeds/all.atom.xml">Full Stack Python</a></li>
      
      <li><a href="http://gael-varoquaux.info/feeds/programming.atom.xml">Ga&#235;l Varoquaux</a></li>
      
      <li><a href="http://compiletoi.net/feeds/python.atom.xml">Georges Dubus</a></li>
      
      <li><a href="http://ghaandeeonit.tumblr.com/rss">Ghaandee on IT</a></li>
      
      <li><a href="https://gmpy.dev/feeds/atom.tag.python.xml">Giampaolo Rodola</a></li>
      
      <li><a href="http://giuliofidente.com/feeds/tag/python.atom.xml">Giulio Fidente</a></li>
      
      <li><a href="http://hackermojo.com/mt-static/tagged/python.rdf">Glenn Franxman</a></li>
      
      <li><a href="http://glyph.twistedmatrix.com/feeds/posts/default">Glyph Lefkowitz</a></li>
      
      <li><a href="http://feeds.feedburner.com/GoDeh">Go Deh</a></li>
      
      <li><a href="http://blog.godson.in/feeds/posts/default/-/Python">Godson Gera</a></li>
      
      <li><a href="http://www.curiousvenn.com/?feed=rss2&cat=4">Graeme Cross</a></li>
      
      <li><a href="http://blog.dscpl.com.au/feeds/posts/default">Graham Dumpleton</a></li>
      
      <li><a href="http://defrobnication.blogspot.com/feeds/posts/default/-/python">Grant Baillie</a></li>
      
      <li><a href="http://www.wisdomandwonder.com/tag/python/feed">Grant Rettke</a></li>
      
      <li><a href="http://gc-taylor.com/?format=rss&category=Python">Greg Taylor</a></li>
      
      <li><a href="http://agiletesting.blogspot.com/feeds/posts/default/-/python">Grig Gheorghiu</a></li>
      
      <li><a href="http://blog.fizyk.net.pl/tags/python.xml">Grzegorz Śliwiński</a></li>
      
      <li><a href="http://neopythonic.blogspot.com/feeds/posts/default">Guido van Rossum</a></li>
      
      <li><a href="http://gustavonarea.net/blog/tags/python/feed/">Gustavo Narea</a></li>
      
      <li><a href="http://blog.labix.org/tag/python/feed">Gustavo Niemeyer</a></li>
      
      <li><a href="http://pycloud.blogspot.com/feeds/posts/default/-/python">Gökhan Sever</a></li>
      
      <li><a href="http://python-in-the-lab.blogspot.de//feeds/posts/default/-/Python">Hernan Grecco</a></li>
      
      <li><a href="http://www.hilarymason.com/tag/python/feed/">Hilary Mason</a></li>
      
      <li><a href="http://tetamap.wordpress.com/feed/atom/">Holger Krekel</a></li>
      
      <li><a href="http://www.holger-peters.de/feeds/python.atom.xml">Holger Peters</a></li>
      
      <li><a href="https://blog.holoviz.org/index.xml">HoloViz</a></li>
      
      <li><a href="https://humberto.io/tags/python/index.xml">Humberto Rocha</a></li>
      
      <li><a href="https://hynek.me/feed-python.xml">Hynek Schlawack</a></li>
      
      <li><a href="http://ianozsvald.com/category/python/feed/atom/">Ian Ozsvald</a></li>
      
      <li><a href="http://ilian.i-n-i.org/feed/?tag=python">Ilian Iliev</a></li>
      
      <li><a href="http://importpython.com/blog/feed/">Import Python</a></li>
      
      <li><a href="https://www.inspiredpython.com/feed">Inspired Python</a></li>
      
      <li><a href="https://blog.ionelmc.ro/feeds/python.rss.xml">Ionel Cristian Maries</a></li>
      
      <li><a href="http://ironpython-urls.blogspot.com/feeds/posts/default">IronPython-URLs</a></li>
      
      <li><a href="https://islandtropicaman.com/wp/category/python/feed/">IslandT</a></li>
      
      <li><a href="http://fruch.github.io/feed.python.xml">Israel Fruchter</a></li>
      
      <li><a href="http://codewithoutrules.com/python-atom.xml">Itamar Turner Trauring</a></li>
      
      <li><a href="https://iximiuz.com/feed-python.atom">Ivan Velichko</a></li>
      
      <li><a href="https://pupeno.com/tag/python/feed/">J. Pablo Fernández</a></li>
      
      <li><a href="http://jackdied.blogspot.com/feeds/posts/default">Jack Diederich</a></li>
      
      <li><a href="http://feeds.feedburner.com/StreamHackerPython">Jacob Perkins</a></li>
      
      <li><a href="http://rahmonov.me/feeds/python.atom.xml">Jahongir Rahmonov</a></li>
      
      <li><a href="http://wrongsideofmemphis.wordpress.com/feed/atom/?tag=english+python">Jaime Buelta</a></li>
      
      <li><a href="http://www.datadependence.com/tag/python/feed/">Jamal Moir</a></li>
      
      <li><a href="https://www.b-list.org/feeds/entries/">James Bennett</a></li>
      
      <li><a href="https://janusworx.com/tags/planetpython/index.xml">Janusworx</a></li>
      
      <li><a href="http://blog.jarrodmillman.com/feeds/posts/default/-/python">Jarrod Millman</a></li>
      
      <li><a href="http://jbisbee.blogspot.com/feeds/posts/default/-/python">Jeff Bisbee</a></li>
      
      <li><a href="http://jeffbradberry.com/feeds/python.atom.xml">Jeff Bradberry</a></li>
      
      <li><a href="http://inre.dundeemt.com/category/python/feed/">Jeff Hinrichs</a></li>
      
      <li><a href="http://griddlenoise.blogspot.com/feeds/posts/default/-/python">Jeff Shell</a></li>
      
      <li><a href="http://greenash.net.au/thoughts/topics/python/rss/">Jeremy Epstein</a></li>
      
      <li><a href="http://jeremyhylton.blogspot.com/atom.xml">Jeremy Hylton</a></li>
      
      <li><a href="http://www.blogger.com/feeds/6330681631629046724/posts/default">Jim Fulton</a></li>
      
      <li><a href="http://pyrseas.wordpress.com/tag/python/feed/atom/">Joe Abbate</a></li>
      
      <li><a href="http://feeds.feedburner.com/JoePitz-TechnologyBlogPython">Joe Pitz</a></li>
      
      <li><a href="http://blogs.gnome.org/johan/category/python/feed/atom">Johan Dahlin</a></li>
      
      <li><a href="http://clouddbs.blogspot.com/feeds/posts/default/-/python">John Burns</a></li>
      
      <li><a href="http://www.johndcook.com/blog/category/python/feed/">John Cook</a></li>
      
      <li><a href="http://eigenhombre.com/feed.python.xml">John Jacobsen</a></li>
      
      <li><a href="https://www.nbshare.io/feeds/all.atom.xml">John Ludhi/nbshare.io</a></li>
      
      <li><a href="http://www.indelible.org/feeds/ink/python.xml">Jon Parise</a></li>
      
      <li><a href="http://spyced.blogspot.com/feeds/posts/default/-/python">Jonathan Ellis</a></li>
      
      <li><a href="http://feeds.feedburner.com/JonathansPythonBlog">Jonathan Harrington</a></li>
      
      <li><a href="https://www.tartley.com/categories/python.xml">Jonathan Hartley</a></li>
      
      <li><a href="http://jonathanstreet.com/blog/tag/python/atom/">Jonathan Street</a></li>
      
      <li><a href="http://blog.jorgenschaefer.de/feeds/posts/default/-/Python">Jorgen Schäfer</a></li>
      
      <li><a href="http://pythonmonopoly.wordpress.com/feed/">Juan Manuel Contreras</a></li>
      
      <li><a href="http://beauty-of-imagination.blogspot.fr/feeds/posts/default/-/python">Julien Tayon</a></li>
      
      <li><a href="http://www.iki.fi/juri/blog/index.rss">Juri Pakaste</a></li>
      
      <li><a href="http://feeds.hackercodex.com/feeds/python">Justin Mayer</a></li>
      
      <li><a href="http://lautaportti.wordpress.com/feed/atom/">Kai Lautaportti</a></li>
      
      <li><a href="https://www.afternerd.com/blog/tag/python/feed/">Karim Elghamrawy</a></li>
      
      <li><a href="http://nuitka.net/categories/Python.xml">Kay Hayen</a></li>
      
      <li><a href="http://fiber-space.de/wordpress/category/python/feed">Kay Schluehr</a></li>
      
      <li><a href="http://kbyanc.blogspot.com/feeds/posts/default/-/python">Kelly Yancey</a></li>
      
      <li><a href="https://kodnito.com/python/rss/">Kodnito</a></li>
      
      <li><a href="https://devblog.kogan.com/?category=Django&format=rss">Kogan Dev</a></li>
      
      <li><a href="http://konryd.blogspot.com/feeds/posts/default">Konrad Delong</a></li>
      
      <li><a href="https://koodaamo.wordpress.com/category/python/feed">Koodaamo</a></li>
      
      <li><a href="http://cosmicpercolator.com/category/python/feed/atom/">Kristján Valur Jónsson</a></li>
      
      <li><a href="http://blog.kritigodey.com/tag/python/rss">Kriti Godey</a></li>
      
      <li><a href="http://gofedora.com/archives/category/python/feed/">Kulbir Saini</a></li>
      
      <li><a href="http://farmdev.com/feeds/thoughts/on/3/python/">Kumar McMillan</a></li>
      
      <li><a href="https://vipin711.wordpress.com/category/python/feed/">Kumar Vipin Yadav</a></li>
      
      <li><a href="http://kushaldas.in/categories/python.xml">Kushal Das</a></li>
      
      <li><a href="http://charlesnagy.info/category/it/python/feed/">Károly Nagy</a></li>
      
      <li><a href="https://www.laac.dev/tags/python/index.xml">LAAC Technology</a></li>
      
      <li><a href="http://laurentszyster.be/blog/feed/">Laurent Szyster</a></li>
      
      <li><a href="http://hypatia.ca/tag/python/feed/">Leigh Honeywell</a></li>
      
      <li><a href="http://regebro.wordpress.com/category/python/feed/atom/">Lennart Regebro</a></li>
      
      <li><a href="http://leovt.wordpress.com/category/python/feed/atom/">Leonhard Vogt</a></li>
      
      <li><a href="http://blog.lintel.in/tag/python/feed/">Lintel Technologies</a></li>
      
      <li><a href="https://linuxstans.com/tag/python/feed/">Linux Stans</a></li>
      
      <li><a href="https://www.listendata.com/feeds/posts/default/-/Python">ListenData</a></li>
      
      <li><a href="http://feeds.feedburner.com/logilaborg_en">Logilab</a></li>
      
      <li><a href="http://codingandlinux.blogspot.com/feeds/posts/default/-/python">Luca Botti</a></li>
      
      <li><a href="https://chezsoi.org/shaarli/?do=atom&searchtags=python+FromPelican">Lucas Cimon</a></li>
      
      <li><a href="http://blog.gmludo.eu/feeds/posts/default/-/python">Ludovic Gasc</a></li>
      
      <li><a href="http://lukeplant.me.uk/blog/categories/python/atom/index.xml">Luke Plant</a></li>
      
      <li><a href="http://lostinjit.blogspot.com/feeds/posts/default">Maciej Fijalkowsk</a></li>
      
      <li><a href="https://madewith.mu/feed.xml">Made With Mu</a></li>
      
      <li><a href="http://sedimental.org/tagged/python/atom.xml">Mahmoud Hashemi</a></li>
      
      <li><a href="https://maltheborch.com/rss?tags=python">Malthe Borch</a></li>
      
      <li><a href="https://www.marc-richter.info/category/python/planet-python-articles/feed/">Marc Richter</a></li>
      
      <li><a href="http://www.malemburg.com/rss">Marc-André Lemburg</a></li>
      
      <li><a href="http://www.grulic.org.ar/~mdione/glob/categories/python.xml">Marcos Dione</a></li>
      
      <li><a href="http://mg.pov.lt/blog/index.xml">Marius Gedminas</a></li>
      
      <li><a href="http://shed-skin.blogspot.com/feeds/posts/default">Mark Dufour</a></li>
      
      <li><a href="http://blogs.gnome.org/markmc/category/python/feed/">Mark McLoughlin</a></li>
      
      <li><a href="http://pywinauto.blogspot.com/atom.xml">Mark McMahon</a></li>
      
      <li><a href="http://feeds.feedburner.com/zopatista/python">Martijn Pieters</a></li>
      
      <li><a href="https://www.mfitzp.com/feeds/python.tag.atom.xml">Martin Fitzpatrick</a></li>
      
      <li><a href="https://mathspp.com/blog/pydonts.rss">"Mathspp Pydon'ts"</a></li>
      
      <li><a href="http://mysqlmusings.blogspot.se/feeds/posts/default/-/python">Mats Kindahl</a></li>
      
      <li><a href="https://www.mattlayman.com/categories/python/index.xml">Matt Layman</a></li>
      
      <li><a href="http://matthewrocklin.com/blog/feed.python.xml">Matthew Rocklin</a></li>
      
      <li><a href="http://www.stealthcopter.com/blog/tag/python/feed/">Matthew Rollings</a></li>
      
      <li><a href="http://blog.tplus1.com/index.php/category/python/feed">Matthew Wilson</a></li>
      
      <li><a href="https://www.wrighters.io/category/python/feed/">Matthew Wright</a></li>
      
      <li><a href="http://copypasteprogrammer.blogspot.com/feeds/posts/default/-/python">Mattias Brändström</a></li>
      
      <li><a href="http://mauveweb.co.uk/rss.xml">Mauveweb</a></li>
      
      <li><a href="http://freshfoo.com/blog/index.atom">"Menno's Musings"</a></li>
      
      <li><a href="http://beckerfuffle.com/blog/categories/python/atom.xml">Michael Becker</a></li>
      
      <li><a href="http://mdboom.github.io/feeds/all.atom.xml">Michael Droettboom</a></li>
      
      <li><a href="https://agileabstractions.com/feed.xml">Michael Foord</a></li>
      
      <li><a href="http://mjtokelly.blogspot.com/feeds/posts/default/-/Python">"Michael J.T. O'Kelly"</a></li>
      
      <li><a href="http://micknelson.wordpress.com/category/python/feed/atom/">Michael Nelson</a></li>
      
      <li><a href="http://mousebender.wordpress.com/feed/atom/">Michal Kwiatkowski</a></li>
      
      <li><a href="https://bultrowicz.com/blog/tag/python/atom.xml">Michał Bultrowicz</a></li>
      
      <li><a href="http://www.artima.com/weblogs/feeds/bloggers/micheles.rss">Michele Simionato</a></li>
      
      <li><a href="http://www.firsttimeprogrammer.blogspot.com/feeds/posts/default/-/python?alt=rss">Michy Alice</a></li>
      
      <li><a href="http://blog.vrplumber.com/index.php?/feeds/categories/1-Snaking.rss">Mike C. Fletcher</a></li>
      
      <li><a href="http://www.blog.pythonlibrary.org/feed/">Mike Driscoll</a></li>
      
      <li><a href="http://python-academy.blogspot.com/feeds/posts/default">Mike Müller</a></li>
      
      <li><a href="http://kmike.ru/feeds/tags/planet-python.atom.xml">Mikhail Korobov</a></li>
      
      <li><a href="http://opensourcehacker.com/category/python/feed/">Mikko Ohtamaa</a></li>
      
      <li><a href="https://mirekdlugosz.com/blog/feeds/planet-python.atom.xml">Mirek Długosz</a></li>
      
      <li><a href="http://www.elastician.com/feeds/posts/default">Mitchell Garnaat</a></li>
      
      <li><a href="http://pythonbyexample.blogspot.com/feeds/posts/default/">Mitya Sirenef</a></li>
      
      <li><a href="http://montrealpython.com/feed/">Montreal Python User Group</a></li>
      
      <li><a href="http://blogologue.com/atom.xml?category=1470141490X3">"Morphex's Blogologue"</a></li>
      
      <li><a href="https://orbifold.xyz/feeds/all.atom.xml">Moshe Zadka</a></li>
      
      <li><a href="https://www.moyaproject.com/blog/feed/">Moya Project</a></li>
      
      <li><a href="http://blog.mozilla.com/webdev/category/python-2/feed/">Mozilla Web Development</a></li>
      
      <li><a href="http://muharem.wordpress.com/feed/atom/">Muharem Hrnjadovic</a></li>
      
      <li><a href="http://www.mycli.net/feeds/tag.python.rss.xml">Mycli</a></li>
      
      <li><a href="http://learnpython.wordpress.com/feed/atom/">Naomi Ceder</a></li>
      
      <li><a href="http://www.natan.termitnjak.net/blog/category/python/feed/atom/index.xml">Natan Zabkar</a></li>
      
      <li><a href="http://nedbatchelder.com/blog/planetpython.xml">Ned Batchelder</a></li>
      
      <li><a href="http://python.ca/nas/log/rss-python.xml">Neil Schemenauer</a></li>
      
      <li><a href="http://www.curiousefficiency.org/categories/python.xml">Nick Coghlan</a></li>
      
      <li><a href="http://blog.efford.org/tag/feeds/python.atom.xml">Nick Efford</a></li>
      
      <li><a href="http://nickjanetakis.blogspot.com/feeds/posts/default/-/python">Nick Janetakis</a></li>
      
      <li><a href="http://nicolaiarocci.com/tags/python/index.xml">Nicola Iarocci</a></li>
      
      <li><a href="http://www.nicosphere.net/tag/python-en/feed/">Nicolas Paris</a></li>
      
      <li><a href="http://nigelb.me/python.xml">Nigel Babu</a></li>
      
      <li><a href="http://feeds.feedburner.com/getnikola/QBjz">Nikola</a></li>
      
      <li><a href="https://nikos7am.com/index.xml">Nikolaos Diamantis</a></li>
      
      <li><a href="http://dev.nextthought.com/blog/categories/python.atom">Not Invented Here</a></li>
      
      <li><a href="https://nskm.xyz/tags/python/index.xml">Nsukami Patrick</a></li>
      
      <li><a href="http://www.obeythetestinggoat.com/feeds/all.atom.xml">Obey the Testing Goat</a></li>
      
      <li><a href="https://ofosos.org/tag/python/rss/">Ofosos</a></li>
      
      <li><a href="http://www.omahapython.org/blog/feed">Omaha Python Users Group</a></li>
      
      <li><a href="http://ondrejcertik.blogspot.com/feeds/posts/default/-/python">Ond&#345;ej &#268;ert&iacute;k</a></li>
      
      <li><a href="https://www.paulox.net/feed/python.xml">Paolo Melchiorre</a></li>
      
      <li><a href="http://s3.amazonaws.com/blog.pathwright.com/feeds/tag.Python.atom.xml">Pathwright</a></li>
      
      <li><a href="http://weblog.patrice.ch/tags/Python.atom">Patrice Neff</a></li>
      
      <li><a href="http://pauleveritt.wordpress.com/feed/atom/">Paul Everitt</a></li>
      
      <li><a href="http://www.logarithmic.net/pfh?action=atom;hasname=1;name=gcgmgpghfpgdgpgegf">Paul Harrison</a></li>
      
      <li><a href="http://codebright.wordpress.com/category/python/feed/atom/">Paul Redman</a></li>
      
      <li><a href="http://pedro.valelima.com/blog/feed/tag/python/">Pedro Lima</a></li>
      
      <li><a href="http://www.peterbe.com/oc-Python/rss.xml">Peter Bengtsson</a></li>
      
      <li><a href="http://petereisentraut.blogspot.com/feeds/posts/default/-/Python/">Peter Eisentraut</a></li>
      
      <li><a href="http://neovox.advancedmagic.de/?feed=rss2&cat=6">Peter Fankhänel</a></li>
      
      <li><a href="http://push.cx/tag/python/feed">Peter Harkins</a></li>
      
      <li><a href="http://peter-hoffmann.com/feed/atom-python.xml">Peter Hoffmann</a></li>
      
      <li><a href="http://www.philhassey.com/blog/category/python/feed">Phil Hassey</a></li>
      
      <li><a href="http://dunderboss.blogspot.com/feeds/posts/default/-/python">Philip Jenvey</a></li>
      
      <li><a href="http://philikon.wordpress.com/category/python/feed/atom/">Philipp von Weitershausen</a></li>
      
      <li><a href="http://base-art.net/Articles/rss.xml">Philippe Normand</a></li>
      
      <li><a href="http://feeds.feedburner.com/pje-on-programming">Phillip J. Eby</a></li>
      
      <li><a href="http://polyglot.ninja/category/python/feed/">Polyglot.Ninja()</a></li>
      
      <li><a href="https://blog.ironboundsoftware.com/category/python/feed.xml">Possbility and Probability</a></li>
      
      <li><a href="http://feeds.feedburner.com/btbytes_python">Pradeep Gowda</a></li>
      
      <li><a href="http://www.flicker-technical.blogspot.fr/feeds/posts/default/-/Python">Pranav Pandey</a></li>
      
      <li><a href="http://feeds.feedburner.com/shutupandship_python">Praveen Gollakota</a></li>
      
      <li><a href="https://www.programiz.com/python-programming/rss.xml">Programiz</a></li>
      
      <li><a href="https://programmingideaswithjake.wordpress.com/category/python/feed/rdf/">Programming Ideas With Jake</a></li>
      
      <li><a href="http://feeds.feedburner.com/Pycharm">PyCharm</a></li>
      
      <li><a href="https://pycoders.com/feed/planetpython">PyCoder’s Weekly</a></li>
      
      <li><a href="http://feeds.feedburner.com/PyCon">PyCon</a></li>
      
      <li><a href="https://www.pygame.org/news/feed/atom">pygame</a></li>
      
      <li><a href="https://www.pypy.org/rss.xml">PyPy</a></li>
      
      <li><a href="http://pytennessee.tumblr.com/rss">PyTennessee</a></li>
      
      <li><a href="http://python4kids.wordpress.com/feed/atom/">Python 4 Kids</a></li>
      
      <li><a href="http://www.awaretek.com/python/index.xml">Python 411 Podcast</a></li>
      
      <li><a href="http://python-advocacy.blogspot.com/atom.xml">Python Advocacy</a></li>
      
      <li><a href="http://blog.pythonanywhere.com/feed/">Python Anywhere</a></li>
      
      <li><a href="https://pythonbytes.fm/episodes/rss">Python Bytes</a></li>
      
      <li><a href="https://www.python-celery.com/feed.xml">Python Celery - Weekly Celery Tutorials and How-tos</a></li>
      
      <li><a href="https://www.pythoncircle.com/feed/">Python Circle</a></li>
      
      <li><a href="http://pythondata.com/feed/">Python Data</a></li>
      
      <li><a href="http://pythondoeswhat.blogspot.com/feeds/posts/default">Python Does What?!</a></li>
      
      <li><a href="https://blogs.msdn.microsoft.com/pythonengineering/feed/">Python Engineering at Microsoft</a></li>
      
      <li><a href="https://www.pythonguis.com/feeds/all.atom.xml">Python GUIs</a></li>
      
      <li><a href="http://feeds.feedburner.com/PythonInsider">Python Insider</a></li>
      
      <li><a href="https://www.pythonmorsels.com/topics/feed/">Python Morsels</a></li>
      
      <li><a href="https://pythonpeople.fm/rss">Python People</a></li>
      
      <li><a href="http://www.pyptug.org/feeds/posts/default/">Python Piedmont Triad User Group</a></li>
      
      <li><a href="https://www.pythonpool.com/feed/">Python Pool</a></li>
      
      <li><a href="http://pyfound.blogspot.com/atom.xml">Python Software Foundation</a></li>
      
      <li><a href="https://sweetness.hmmz.org/feeds/python.rss.xml">Python Sweetness</a></li>
      
      <li><a href="http://python-groups.blogspot.com/feeds/posts/default">Python User Groups</a></li>
      
      <li><a href="https://www.pythonforbeginners.com/feed/">Python for Beginners</a></li>
      
      <li><a href="http://python-karan.blogspot.in//feeds/posts/default">Python on Karan</a></li>
      
      <li><a href="http://developerblog.myo.com/tag/python/rss/">Python with Myo</a></li>
      
      <li><a href="http://pythonxynews.blogspot.com/feeds/posts/default">Python(x,y) News</a></li>
      
      <li><a href="http://pythonclub.com.br/feeds/all.atom.xml">PythonClub - A Brazilian collaborative blog about Python</a></li>
      
      <li><a href="http://pythondebugging.com/category/python/feed.xml">PythonDebugging.com</a></li>
      
      <li><a href="https://coady.github.io/index.xml">Pythonicity</a></li>
      
      <li><a href="http://pythonology.blogspot.com/atom.xml">Pythonology</a></li>
      
      <li><a href="https://pythonspeed.com/atom.xml">Python⇒Speed</a></li>
      
      <li><a href="http://ptspts.blogspot.com/feeds/posts/default/-/planet-python">Péter Szabó</a></li>
      
      <li><a href="http://blog.zsoldosp.eu/category/python/feed/">Péter Zsoldos</a></li>
      
      <li><a href="https://labs.quansight.org/rss.xml">Quansight Labs Blog</a></li>
      
      <li><a href="http://www.bitdance.com/blog/rss.xml">R David Murray</a></li>
      
      <li><a href="https://blog.rmotr.com/feed/tagged/python">RMOTR</a></li>
      
      <li><a href="http://threebean.org/blog/category/python/feed/atom/index.xml">Ralph Bean</a></li>
      
      <li><a href="https://blog.ram.rachum.com/tagged/planetpython/rss">Ram Rachum</a></li>
      
      <li><a href="http://blog.randell.ph/tag/python/feed/atom/">Randell Benavidez</a></li>
      
      <li><a href="http://randlet.com/blog/python/rss.xml">Randle Taylor</a></li>
      
      <li><a href="http://randyzwitch.com/tag/python/feed/">Randy Zwitch</a></li>
      
      <li><a href="http://rhettinger.wordpress.com/feed/atom/">Raymond Hettinger</a></li>
      
      <li><a href="http://blog.readthedocs.com/archive/tag/python/atom.xml">Read the Docs</a></li>
      
      <li><a href="https://realpython.com/atom.xml">Real Python</a></li>
      
      <li><a href="http://renesd.blogspot.com/feeds/posts/default/-/python">Rene Dudfield</a></li>
      
      <li><a href="http://posted-stuff.blogspot.com/feeds/posts/default/-/python">Richard Tew</a></li>
      
      <li><a href="http://blog.the-moon.net/feeds/posts/default/-/python">Richard Wall</a></li>
      
      <li><a href="http://rickardlindberg.me/tags/python/rss.xml">Rickard Lindberg</a></li>
      
      <li><a href="https://cmlzagk.github.io/feeds/python.atom.xml">Rishi Maker</a></li>
      
      <li><a href="http://www.robg3d.com/?tag=python&feed=atom">Rob Galanakis</a></li>
      
      <li><a href="http://rbtcollins.wordpress.com/tag/python/feed/atom/">Robert Collins</a></li>
      
      <li><a href="http://rz.scale-it.pl/rss-python.html">Robert Zaremba</a></li>
      
      <li><a href="http://www.theatreofnoise.com/feeds/posts/default/-/dev">Robin Parmar</a></li>
      
      <li><a href="http://blog.rtwilson.com/category/programming-2/python/feed/">Robin Wilson</a></li>
      
      <li><a href="http://linil.wordpress.com/feed/atom/">Rodrigo Araúj</a></li>
      
      <li><a href="https://www.rosehosting.com/blog/tag/python/feed/">RoseHosting Blog</a></li>
      
      <li><a href="http://ruslanspivak.com/category/python/feed/atom/">Ruslan Spivak</a></li>
      
      <li><a href="http://www.asciiarmor.com/tagged/python/rss">Ryan Cox</a></li>
      
      <li><a href="http://slott-softwarearchitect.blogspot.com/feeds/posts/default/-/python">S. Lott</a></li>
      
      <li><a href="https://pyhelper.wordpress.com/feed/">S. R. Krishnan</a></li>
      
      <li><a href="http://www.sdjournal.com/archives/categories/languages/python/rss.xml">SDJournal</a></li>
      
      <li><a href="http://pythonide.blogspot.com/feeds/posts/default">SPE Weblog</a></li>
      
      <li><a href="http://feeds.feedburner.com/sfpy">Salim Fadhley</a></li>
      
      <li><a href="https://sandipanweb.wordpress.com/category/python/feed/">Sandipan Dey</a></li>
      
      <li><a href="http://sandrotosi.blogspot.com/feeds/posts/default/-/Python">Sandro Tosi</a></li>
      
      <li><a href="http://seanmcgrath.blogspot.com/feeds/posts/default/-/python">Sean McGrath</a></li>
      
      <li><a href="https://k-d-w.org/tags/python/index.xml">Sebastian Pölsterl</a></li>
      
      <li><a href="https://switowski.com/python.feed.xml">Sebastian Witowski</a></li>
      
      <li><a href="http://www.chesnok.com/daily/category/python/feed/">Selena Deckelmann</a></li>
      
      <li><a href="http://feeds.feedburner.com/phoe6pythonfeeds">Senthil Kumaran</a></li>
      
      <li><a href="https://sethmlarson.dev/feed">Seth Michael Larson</a></li>
      
      <li><a href="http://jjinux.blogspot.com/feeds/posts/default/-/python">Shannon -jj Behrens</a></li>
      
      <li><a href="http://simeonfranklin.com/feeds/python/">Simeon Franklin</a></li>
      
      <li><a href="http://feeds.feedburner.com/simeon_visser_python">Simeon Visser</a></li>
      
      <li><a href="http://aboutsimon.com/category/python/feed/atom/">Simon</a></li>
      
      <li><a href="http://www.brunningonline.net/simon/blog/index-P.xml">Simon Brunning</a></li>
      
      <li><a href="http://entitycrisis.blogspot.com/feeds/posts/default/-/Python">Simon Wittber</a></li>
      
      <li><a href="https://simpleisbetterthancomplex.com/feed.xml">Simple is Better Than Complex</a></li>
      
      <li><a href="http://www.softformance.com/feed/?tag=python">SoftFormance</a></li>
      
      <li><a href="https://brmmm3.github.io/feed.xml">Speed Matters</a></li>
      
      <li><a href="http://speno.blogspot.com/atom.xml">"Speno's Pythonic Avocado"</a></li>
      
      <li><a href="http://spikeekips.tumblr.com/tagged/python/rss">Spike ekipS</a></li>
      
      <li><a href="https://www.spyder-ide.org/blog/feed.xml">Spyder IDE</a></li>
      
      <li><a href="http://stackabuse.com/tag/python/rss">Stack Abuse</a></li>
      
      <li><a href="https://smorbieu.gitlab.io/feeds/tag_python.atom.xml">Stanislas Morbieu</a></li>
      
      <li><a href="http://blog.behnel.de/index.php?feed=rss2&cat=22">Stefan Behnel</a></li>
      
      <li><a href="http://stefan.sofa-rockers.org/feeds/python">Stefan Scherfke</a></li>
      
      <li><a href="http://www.jodal.no/atom-python.xml">Stein Magnus Jodal</a></li>
      
      <li><a href="http://pythonconquerstheuniverse.wordpress.com/feed/atom/">Stephen Ferg</a></li>
      
      <li><a href="http://holdenweb.blogspot.com/feeds/posts/default/-/python">Steve Holden</a></li>
      
      <li><a href="http://rh0dium.blogspot.com/feeds/posts/default/-/python">Steven Klass</a></li>
      
      <li><a href="http://TuringFinance.com/category/python/feed/">Stuart Gordon Reid</a></li>
      
      <li><a href="https://wirtel.be/tags/python/index.xml">Stéphane Wirtel</a></li>
      
      <li><a href="https://www.harihareswara.net/rss/python/">Sumana Harihareswara - Cogito, Ergo Sumana</a></li>
      
      <li><a href="https://www.tutlane.com/pythonfeed.xml">Suresh Dasari/Tutlane.com</a></li>
      
      <li><a href="https://ict.swisscom.ch/feed/?post_type=cubetech_post&cubetech_keyword=Python">Swisscom ICT</a></li>
      
      <li><a href="http://www.talkpythontome.com/episodes/rss">Talk Python to Me</a></li>
      
      <li><a href="http://blog.tedmiston.com/tag/python/rss">Taylor Edmiston</a></li>
      
      <li><a href="https://www.techbeamers.com/python-programming-tutorials/feed/">TechBeamers Python</a></li>
      
      <li><a href="https://www.techiediaries.com/tag/django/index.xml">Techiediaries - Django</a></li>
      
      <li><a href="http://terriko.dreamwidth.org/data/rss?tag=python">Terri Oda</a></li>
      
      <li><a href="http://blogs.fluidinfo.com/terry/category/python/feed/atom/">Terry Jones</a></li>
      
      <li><a href="http://testandcode.com/rss">Test and Code</a></li>
      
      <li><a href="https://testdriven.io/blog/topics/django/feed.xml">TestDriven.io</a></li>
      
      <li><a href="http://www.thedatascientist.de/category/python/feed/">The Data Scientist</a></li>
      
      <li><a href="https://www.thedigitalcatonline.com/categories/python/atom.xml">The Digital Cat</a></li>
      
      <li><a href="https://lunarcowboy.com/feeds/python.atom.xml">The Lunar Cowboy</a></li>
      
      <li><a href="https://no-title.victordomingos.com/feeds/python_rss.xml">The No Title® Tech Blog</a></li>
      
      <li><a href="http://blog.dowski.com/category/python/feed">The Occasional Occurrence</a></li>
      
      <li><a href="https://fortintam.com/blog/category/planet-python/feed/">The Open Sourcerer</a></li>
      
      <li><a href="http://blog.parcon.opengroove.org/feeds/posts/default">The Parcon Blog</a></li>
      
      <li><a href="https://thepythoncodingbook.com/feed/">The Python Coding Blog</a></li>
      
      <li><a href="https://threeofwands.com/tag/python/rss/">The Three of Wands</a></li>
      
      <li><a href="http://www.tibonihoo.net/blog/en/tag/python/feed/">Thibauld Nion</a></li>
      
      <li><a href="https://thishosting.rocks/tag/python/feed/">ThisHosting.Rocks</a></li>
      
      <li><a href="http://feeds.wordaligned.org/wordaligned/python">Thomas Guest</a></li>
      
      <li><a href="http://thomas.apestaart.org/log/?feed=rss2&cat=22">Thomas Vander Stichele</a></li>
      
      <li><a href="https://www.tibobeijen.nl/tags/python/index.xml">Tibo Beijen</a></li>
      
      <li><a href="https://reachtim.com/feeds/python.atom.xml">Tim Arnold / reachtim</a></li>
      
      <li><a href="http://timgilbert.wordpress.com/category/python/feed/atom/">Tim Gilbert</a></li>
      
      <li><a href="http://feeds.feedburner.com/duffyd">Tim Knapp</a></li>
      
      <li><a href="http://apipes.blogspot.com/feeds/posts/default/-/python">Tim Lesher</a></li>
      
      <li><a href="http://feeds.feedburner.com/thobe/wardrobe">Tobias Ivarsson</a></li>
      
      <li><a href="http://thewebhaswon.wordpress.com/category/python/atom">Tom Christie</a></li>
      
      <li><a href="http://www.sys-exit.blogspot.com/feeds/posts/default/-/python">Tomasz Ducin</a></li>
      
      <li><a href="http://www.tomaz.me/tags/python.xml">Tomaž Muraus</a></li>
      
      <li><a href="http://tomerfiliba.com/blog/python-atom.xml">Tomer Filiba</a></li>
      
      <li><a href="http://tonybreyal.wordpress.com/category/python/feed/atom/">Tony Breyal</a></li>
      
      <li><a href="http://anonbadger.wordpress.com/tag/python/feed/atom/">Toshio Kuratomi</a></li>
      
      <li><a href="http://technicaldiscovery.blogspot.com/feeds/posts/default/-/python">Travis Oliphant</a></li>
      
      <li><a href="https://treyhunner.com/python.xml">Trey Hunner</a></li>
      
      <li><a href="http://www.tryton.org/rss.xml">Tryton News</a></li>
      
      <li><a href="http://www.turnkeylinux.org/taxonomy/term/103/0/feed">Turnkey Linux</a></li>
      
      <li><a href="https://typethepipe.com/categories/python/index.xml">TypeThePipe</a></li>
      
      <li><a href="http://vsbabu.org/mt/index.rdf">V.S. Babu</a></li>
      
      <li><a href="http://prayogshala.wordpress.com/category/scripting/python/feed/atom/">Varun Nischal</a></li>
      
      <li><a href="http://jugad2.blogspot.co.uk/feeds/posts/default/-/python">Vasudev Ram</a></li>
      
      <li><a href="http://pymolurus.blogspot.com/feeds/posts/default">Vinay Sajip</a></li>
      
      <li><a href="http://plumberjack.blogspot.com/feeds/posts/default">Vinay Sajip (Logging)</a></li>
      
      <li><a href="https://vinayak.io/feed/tag/python/rss.xml">Vinayak Mehta</a></li>
      
      <li><a href="http://www.vperic.blogspot.com/feeds/posts/default/-/Twisted">Vladimir Perić</a></li>
      
      <li><a href="http://pieceofpy.com/category/python/feed/atom/index.xml">Wayne Witzel</a></li>
      
      <li><a href="http://www.weeklypython.chat/feed/">Weekly Python Chat</a></li>
      
      <li><a href="http://python-weekly.blogspot.com/feeds/posts/default?alt=rss">Weekly Python StackOverflow Report</a></li>
      
      <li><a href="http://1stvamp.org/tag/python/atom/">Wes Mason</a></li>
      
      <li><a href="http://wescpy.blogspot.com/feeds/posts/default/-/python">Wesley Chun</a></li>
      
      <li><a href="http://bluesock.org/~willkg/blog/tag/python.xml">Will Kahn-Greene</a></li>
      
      <li><a href="http://www.willmcgugan.com/blog/tech/feeds/posts/">Will McGugan</a></li>
      
      <li><a href="http://willpython.blogspot.com/feeds/posts/default">Will Pierce</a></li>
      
      <li><a href="http://blog.minchin.ca/feeds/label.python.atom.xml">William Minchin</a></li>
      
      <li><a href="http://foolish-assertions.blogspot.com/feeds/posts/default/-/python">William Reade</a></li>
      
      <li><a href="http://william-os4y.livejournal.com/data/atom">"William's Journal"</a></li>
      
      <li><a href="http://wingware.com/blog/rss&noheader=1">Wing Tips</a></li>
      
      <li><a href="http://wingware.com/news/rss&noheader=1">Wingware</a></li>
      
      <li><a href="https://wyattbaldwin.com/categories/planet-python/rss.xml">Wyatt Baldwin</a></li>
      
      <li><a href="http://tech.blog.aknin.name/tag/python/feed/atom/">Yaniv Aknin</a></li>
      
      <li><a href="http://www.ylarrivee.com/tag/python/feed/">Yann Larrivée</a></li>
      
      <li><a href="http://uberpython.wordpress.com/tag/python/feed/atom/">Yuval Greenfield</a></li>
      
      <li><a href="http://za.github.io/feed.python.xml">Zaki Akhmad</a></li>
      
      <li><a href="https://zato.io/blog/rss.xml">Zato Blog</a></li>
      
      <li><a href="https://zerotomastery.io/rss/python-rss.xml">Zero to Mastery</a></li>
      
      <li><a href="https://zerowithdot.com/feed.xml">Zero-with-Dot (Oleg Żero)</a></li>
      
      <li><a href="https://medium.com/feed/@ZeroDB_">ZeroDB</a></li>
      
      <li><a href="http://blog.bottlepy.org/feeds/all.atom.xml">bottlepy-dev</a></li>
      
      <li><a href="http://feeds.feedburner.com/codeboje_python">codeboje</a></li>
      
      <li><a href="https://death.andgravity.com/_feed/index/_tags/python.xml">death and gravity</a></li>
      
      <li><a href="http://www.egenix.com/company/news/rss2">eGenix.com</a></li>
      
      <li><a href="http://hypothesis.works/articles/python/feed/">hypothesis.works articles</a></li>
      
      <li><a href="http://scummos.blogspot.com/feeds/posts/default/-/kdev-python">kdev-python</a></li>
      
      <li><a href="https://meejah.ca/planetpython.xml">meejah.ca</a></li>
      
      <li><a href="http://nl-project.blogspot.com/feeds/posts/default/-/python">nl-project</a></li>
      
      <li><a href="http://pgcli.com/feeds/tag.python.atom.xml">pgcli</a></li>
      
      <li><a href="https://py.checkio.org/blog/special-rss/">py.CheckIO</a></li>
      
      <li><a href="http://www.pythonwise.blogspot.com/feeds/posts/default/-/python">pythonwise</a></li>
      
      <li><a href="http://blog.qutebrowser.org/feeds/tag-pyplanet.rss.xml">qutebrowser development blog</a></li>
      
      <li><a href="http://recollection.saaj.me/tag/python.xml">saaj/recollection</a></li>
      
      <li><a href="https://blog.scikit-learn.org/feed.xml">scikit-learn</a></li>
      
      <li><a href="https://testmon.org/index.xml">testmon</a></li>
      
      <li><a href="http://tryexceptpass.org/index.xml">tryexceptpass</a></li>
      
      <li><a href="http://wokslog.wordpress.com/tag/python/feed/atom/">Éric Araujo</a></li>
      
      <li><a href="https://lukasz.langa.pl/python/atom.xml">Łukasz Langa</a></li>
      
      <li><a href="https://www.pythonshow.com/feed">The Python Show</a></li>
      
      <li><a href="https://stefaniemolin.com/feeds/Python-atom.xml">Stefanie Molin</a></li>
      
      <li><a href="https://bugfactory.io/articles-on-python/feed.xml">Christoph Schiessl</a></li>
      
    </ul>
  </div>
</ul>

      </div>
    </div>
  </body>
</html>